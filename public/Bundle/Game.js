var t={onCreate(){this.attr={style:{textAlign:"right",textBaseline:"top"},position:{x:this.$config.screen.width},text:""}},getFps(){const t=performance.now();this.timeStamp&&(this.attr.text=(1e3/(t-this.timeStamp)).toFixed()+"fps"),this.timeStamp=t},render(){return this.getFps(),this.$createElement("view",this.attr)}};var e={onMessage(t){const{width:e,pixelRatio:i}=this.$config.screen,s={message:t+="",tick:60,messageStyle:{position:{x:e/2},size:{width:8*(function(t){let e=0;for(let i=0;i<t.length;i++)t.charCodeAt(i)>127?e+=2:e+=1;return e}(t)+1)/i},border:{width:2,color:"white"}}};this.messages.unshift(s)},onCreate(){this.messages=[],this.$event.on("message",this.onMessage)},onDestroy(){this.$event.off("message",this.onMessage)},calc(){this.messages=this.messages.filter((t=>(t.tick--,t.tick>0)))},render(){return this.calc(),this.messages.map(((t,e)=>{const{message:i,messageStyle:s,tick:n}=t,o={globalAlpha:n/60};return this.$createElement("view",{style:o,align:"center",text:i,position:s.position,size:{height:1,width:5},bgColor:"rgba(0,0,0,.7)"})}))}},i={onCreate(){this.$event.on("talk",((t,e,i)=>{this.talks=e,this.next=i}))},onClose(){this.talks=null,this.next()},render(){return this.talks?this.$createElement(Talk,{talks:this.talks,onClose:this.onClose}):null}},s={onCreate(){const{$config:t}=this;this.progressBar={align:"center",position:{x:t.screen.width/2,y:9},size:{width:7,height:.2},bgColor:"#fff"},this.progress={size:{height:.2},bgColor:"#666"}},getProgressOn(){const{$loader:t}=this,e=t.loaded/t.total;this.progress.size.width=this.progressBar.size.width*e},render(){this.getProgressOn();const{progressBar:t,progress:e}=this;return this.$createElement("view",t,this.$createElement("view",e))}},n={onCreate(){this.textProps={position:{x:this.$config.screen.width/2,y:4},text:"Loading",style:{font:"128px 楷体"}}},render(){return this.$createElement("view",null,this.$createElement("view",this.textProps),this.$createElement(s,null))}},o={onCreate(){const{activeIndex:t=0}=this.props;this.activeIndex=t,this.optionSize=this.props.optionSize||{},this.optionSize.width=this.optionSize.width||this.props?.style?.width,this.optionSize.height=this.optionSize.height||1},onChange(){this.props.onChange?.(this.props.options[this.activeIndex],this.activeIndex)},onConfirm(){this.props.options[this.activeIndex]&&this.props.onConfirm?.(this.props.options[this.activeIndex],this.activeIndex)},onClick({props:t}){this.activeIndex=t.index,this.onConfirm()},onMouseMove({props:t}){this.activeIndex=t.index,this.onChange()},render(){const t=this.props.options.map((({text:t},e)=>this.$createElement("view",{text:t,position:{x:0,y:1.2*e},size:{height:1,width:3},border:{width:3,height:5},index:e,onClick:this.onClick})));return this.$createElement("view",this.props,t)}},h={onCreate(){this.textProps={position:{x:this.$config.screen.width/2,y:4},text:this.$config.title,style:{font:"128px 楷体"},bgColor:"red"},this.style={font:"24px 楷体"},this.position={x:this.$config.screen.width/2,y:8},this.options=[{text:"开始",event:"startGame"},{text:"继续",event:"loadGame"}]},onConfirm({event:t}){t&&this.$event.emit(t)},render(){return this.$createElement("view",null,this.$createElement("view",this.textProps),this.$createElement(o,{style:this.style,position:this.position,size:{height:5,width:3},align:"center",options:this.options,onConfirm:this.onConfirm}))}};function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r.apply(null,arguments)}var a={onCreate(){const{text:t,bgm:e}=this.$state.map;this.mapBgm=this.$sound.play("bgm",e),this.textArr=t.split("\n");const i=this.$config.screen.width,s=this.$config.screen.height;this.scrollSpeed=1/16,this.scrollSpeed=1,this.lineHeight=1.5;this.scrollText={position:{x:1,y:13},style:{font:"24px 楷体",textAlign:"left",textBaseline:"top"}},this.continueMessage={align:"center",verticalAlign:"middle",style:{font:"64px 楷体"},position:{x:i/2,y:s/2},bgColor:"red"},this.max=this.textArr.length*this.lineHeight},onDestroy(){this.mapBgm.pause()},onClick(){this.$event.emit("startGame")},renderContinue(){return this.$createElement("view",r({},this.continueMessage,{onClick:this.onClick,text:"点击继续"}))},renderScrollText(){const{lineHeight:t}=this;return this.$createElement("view",this.scrollText,this.textArr.map(((e,i)=>this.$createElement("view",{position:{y:i*t},text:e}))))},render(){const t=this.scrollText.position;return t.y+this.max>0?t.y-=this.scrollSpeed:this.ready=!0,this.ready?this.renderContinue():this.renderScrollText()}},l={render(){}},c={onCreate(){this.wrapProps={position:{x:1,y:1},style:{font:"24px 楷体"}}},onClick({event:t,data:e},i){t&&this.$event.emit(t,e)},render(){const{wrapProps:t,$state:e}=this,{save:i}=e,s=[{text:i.hero.lv,sposition:{sy:2},event:"message",data:"属性"},{text:i.hero.hp,sposition:{sy:3},event:"message",data:"属性"},{text:i.hero.atk,sposition:{sy:4},event:"message",data:"属性"},{text:i.hero.def,sposition:{sy:5},event:"message",data:"属性"},{text:i.hero.exp,sposition:{sy:6},event:"message",data:"属性"},{text:i.money,sposition:{sy:7},event:"message",data:"属性"},{text:i.items.yellowKey,sposition:{sy:8},event:"message",data:"属性"},{text:i.items.blueKey,sposition:{sy:9},event:"message",data:"属性"},{text:i.items.redKey,sposition:{sy:10},event:"message",data:"属性"}],n={width:1,height:1};return this.$createElement("view",t,s.map((({sposition:t,text:e,event:i,data:s},o)=>this.$createElement("view",{position:{y:1.2*o+.2},size:{width:4},event:i,data:s,onClick:this.onClick},this.$createElement("view",{image:"icons",size:n,sposition:t}),this.$createElement("view",{position:{x:1.5},size:{height:1,width:2.5},bgColor:"rgba(0,0,0,.5)",text:e})))))}},p={onCreate(){this.wrapProps={position:{x:18,y:1},style:{font:"24px 楷体"},onClick:function(){console.log(this)}}},onClick({event:t,data:e},i){t&&this.$event.emit(t,e)},render(){const{mapId:t}=this.$state,e=this.$loader.$resource.maps[t],i=[{text:this.$config.title,sposition:{sy:0},event:"message",data:"啦啦啦"},{text:e.name,sposition:{sy:1},event:"message",data:"啦啦啦"},{text:"怪物",sposition:{sy:11},event:"toggleShowEnemyInfo"},{text:"罗盘",sposition:{sy:12},event:"toggleShowCompass"},{text:"商店",sposition:{sy:13},event:"toggleShowShopList"},{text:"统计",sposition:{sy:17},event:"toggleStaticList"},{text:"读档",sposition:{sy:15},event:"loadGame"},{text:"存档",sposition:{sy:14},event:"saveGame"},{text:"设置",sposition:{sy:16},event:"toggleShowConfig"}],s={width:1,height:1};return this.$createElement("operation",this.wrapProps,i.map((({sposition:t,text:e,event:i},n)=>this.$createElement("wrap",{position:{y:1.2*n+.2},size:{width:4},event:i,onClick:this.onClick},this.$createElement("icon",{image:"icons",size:s,sposition:t}),this.$createElement("text",{position:{x:1.5},size:{height:1,width:2.5},bgColor:"rgba(0,0,0,.5)"},e)))))}},m={render(){return this.$createElement("view",null,this.$createElement("view",{size:{width:this.$config.screen.width,height:1},bgImage:"Background/blueWall.png"}),this.$createElement("view",{position:{y:this.$config.screen.height-1},size:{width:this.$config.screen.width,height:1},bgImage:"Background/blueWall.png"}),this.$createElement("view",{position:{y:1},size:{width:1,height:13},bgImage:"Background/blueWall.png"}),this.$createElement("view",{position:{x:this.$config.screen.width-1,y:1},size:{width:1,height:13},bgImage:"Background/blueWall.png"}))}};var d={name:"EventBlock",onCreate(){this.value=this.props.value,this.value&&(this.data=function(t,e){const i=e.mapping[t],{type:s,name:n}=i,o=e.sprites[s][n],h={animates:4,terrains:1,items:1,npcs:2,enemy:2}[s];return{image:s,sy:o.sy,type:s,name:n,maxInterval:10,maxTick:h}}(this.props.value,this.$resource),this.event=this.props.event)},runEvent(t=0){const e=this.event[t];if(!e)return;const{data:i,type:s,next:n,condition:o,yes:h,no:r}=e;"if"===s?this.$event.emit("checkSaveByStr",o)?(this.event=h,this.runEvent()):Array.isArray(r)?(this.event=r,this.runEvent()):this.runEvent(t+1):"removeSelf"===s?this.$event.emit("removeMapEventByKey",this.props.id,(()=>this.runEvent(t+1))):this.$event.emit(s,i,(()=>this.runEvent(t+1)))},onZhuangji(){const{type:t,enemy:e,name:i}=this.data;if(this.props.event)return this.event=this.props.event,void this.runEvent();if("enemys"===t)this.event=[{type:"battle",data:e},{type:"removeMapEventByKey",data:this.props.id}],this.runEvent();else{if("items"===t){const t=this.$state.items[i],{type:e,property:s}=t;return"normal"===e||"special"===e?(this.event=[{type:"message",data:`获得${t.name}`},{type:"getItem",data:i},{type:"removeMapEventByKey",data:this.props.id}],this.runEvent()):"update"===e&&(this.event=[{type:"setSaveByStr",data:s},{type:"removeMapEventByKey",data:this.props.id}],this.runEvent(),this.$sound.play("se","item.mp3")),!0}if("terrains"===t){const t=["yellowDoor","redDoor","blueDoor"];if(t.includes(i)){const e=i.slice(0,-4)+"Key";if(this.$state.save.items[e])return this.$state.save.items[e]--,this.$event.emit("removeMapEventByKey",this.props.id),this.$sound.play("se","door.mp3"),!0;const s=["黄色钥匙","红色钥匙","蓝色钥匙"];this.$event.emit("message",`你没有${s[t.indexOf(i)]}`)}}}},onClick(){return this.data,this.props?.onClick?.(this),!0},render(){if(!this.value)return null;const{x:t,y:e}=this.props;return this.$createElement("view",{position:{x:t,y:e},style:{width:1,height:1,x:t,y:e},onClick:this.onClick},this.$createElement("view",{size:{height:1,width:1},image:this.data.image,sposition:{sy:this.data.sy}}),this.enemy)}};var g={onCreate(){this.moving=!1,this.$event.on("setPath",((t,e)=>{this.setPath(e)}))},setPath({dist:t,map:e}){this.map=e,this.dist=t,this.needFind=!0},runSteps(){if(this.current)return void this.runOneStep();const t=this.props.map;if(this.needFind){const{x:t,y:e}=this.dist;this.path=((t,e,i)=>{const{map:s,height:n,width:o}=i,h=new Map,r=[];if(t.x===e.x&&t.y===e.y)return[];function a(i){const{x:a,y:l}=i;if(a===e.x&&l===e.y){for(;i.start;)r.push(i),i=i.start;return!1}return!(a<0||l<0||a>=o||l>=n||s[l][a]||h.has([a,l]+"")||a===t.x&&l===t.y||(h.set([a,l]+"",1),0))}function l(t){const{x:e,y:i}=t;return[{x:e-1,y:i,sy:1,rad:Math.PI,dir:"left"},{x:e+1,y:i,sy:2,rad:0,dir:"right"},{x:e,y:i+1,sy:0,rad:.5*Math.PI,dir:"bottom"},{x:e,y:i-1,sy:3,rad:1.5*Math.PI,dir:"top"}].map((e=>(e.start=t,e))).filter(a)}const c=(t,e)=>{if(0===e)return;if(0===t.length)return;const i=[];for(const e of t){const t=l(e);if(r.length)return;i.push(...t)}return c(i,e-1),i};return c([t],1/0),r.map((t=>(delete t.start,t)))})(this.$state.save.position,{x:t,y:e},this.map),this.needFind=!1}if(this.path&&this.path.length){const e=this.path.pop(),{x:i,y:s,sy:n}=e;t[s][i]||(this.current=e,this.loop=this.createLoop(1/4,1.25,1,1/4),this.runOneStep()),this.$state.save.position.sy=n}},runOneStep(){},onKeyDown(t){console.log(t)},onClick(t){t.stopPropagation(),this.step=1,this.stepMax=8,this.count=0,this.isWalking=!0},render(){return this.runOneStep(),this.$createElement("view",{image:"Characters/hero.png",position:this.$state.save.position,size:{width:1,height:1}})}},w={name:"Floor",onCreate(){this.position={x:5,y:0},this.mapContainerProps={position:this.position,size:{width:13,height:13}};const{mapId:t}=this.$state;this.mapJSON=this.$resource.maps[t],this.mapsDestroyTerrains=this.$state.save.mapsDestroyTerrains,this.mapsDestroyEvents=this.$state.save.mapsDestroyEvents;const e=this.mapJSON;e&&(this.mapBgm=this.$sound.play("bgm",e)),this.mapTerrainsData=this.getMapTerrainsDataX(),this.mapEventsData=this.getMapEventsDataX()},onDestroy(){this.mapBgm&&this.mapBgm.pause()},getKey:(t,e,i)=>String([t,e,i]),destoryTerrains({props:t}){const{position:e}=t,{mapId:i}=this.$state,{x:s,y:n}=e,o=this.getKey(i,s,n);this.mapsDestroyTerrains[o]=!0,this.mapTerrainsData[n][s]=null},getMapTerrainsDataX(){const{mapId:t}=this.$state;return this.mapJSON.mapTerrains.map(((e,i)=>e.map(((e,s)=>{if(0===e)return null;const n=this.getKey(t,s,i);return this.mapsDestroyTerrains[n]?null:e}))))},getMapEventsDataX(){return this.mapJSON.mapEvents.slice()},onEventClick(t){const{x:e,y:i}=t.props,{height:s,width:n}=this.$state.map,{map:o}=this;this.$event.emit("setPath",{map:{height:s,width:n,map:o},dist:{x:e,y:i}})},renderMapTerrains(){return this.mapTerrainsData.map((t=>t.map((t=>t?this.$createElement("view",t):null))))},onClickx(t){const e=t.gameX,i=t.gameY;this.$state.save.position.x=e-this.position.x,this.$state.save.position.y=i-this.position.y},onkeydown(t){console.log(t)},render(){return this.$createElement("view",r({},this.mapContainerProps,{onClick:this.onClickx}),this.mapTerrainsData.map(((t,e)=>t.map(((t,i)=>t?this.$createElement(d,{value:t,x:i,y:e}):null)))),this.mapEventsData.map((t=>this.$createElement(d,t))),this.$createElement(g,null))}},y={name:"window",onCreate(){this.wrapProps={bgImage:"Background/ground.png",size:{width:this.$config.screen.width,height:this.$config.screen.height}}},render(){return this.$createElement("view",this.wrapProps,this.$createElement(m,null),this.$createElement(c,null),this.$createElement(p,null),this.$createElement(w,null))}},v={onCreate(){const{width:t,height:e}=this.$config.screen;this.wrapProps={size:{width:t,height:e},bgColor:"rgba(0,0,0,0.4)",onClick(){this.props.onClick?.()}},this.closeButtonProps={text:"X",size:{height:1,width:1},position:{x:1,y:1}}},render(){if(this.props.show)return this.$createElement("view",this.wrapProps,this.$createElement("view",this.closeButtonProps),this.children)}},$={render(){let t=0;const{render:e=[],...i}=this.props;return this.$createElement("view",i,e.map((e=>{if(!e)return null;const{height:i=1}={},s=this.$createElement("view",{position:{y:t}},e);return t+=i,s})))}};const u="toggleShowEnemyInfo",x="toggleShowCompass",E="toggleShowShopList",f="toggleStaticList",C="toggleShowConfig";var k={[u](t,{$state:e}){e.showEnemyInfo=!e.showEnemyInfo},[x](t,{$state:e}){e.showCompass=!e.showCompass},[f](t,{$state:e}){e.showStatistics=!e.showStatistics},[C](t,{$state:e}){e.showConfig=!e.showConfig},[E](t,{$state:e}){e.showShopList=!e.showShopList}};function S(t){return e="game",i=t,localStorage.setItem(e,JSON.stringify(i));var e,i}function b(){return function(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){return null}}("game")}function I(t){return JSON.parse(JSON.stringify(t))}const z="startGame",M="endGame",B="loadGame",D="saveGame",P="gotoMap",O="gotoTitle",T="openShop",A="closeShop";var J={[z](t,{$state:e,$config:i}){e.save=I(i.save),this.emit("gotoMap",e.save.mapId)},[M](t,{$state:e,$config:i}){window.close()},[B](t,{$state:e,$config:i}){e.save=Object.assign(I(i.save),b()),this.emit("gotoMap",e.save.mapId),this.emit("message","读档成功")},[D](t,{$state:e}){S(e.save),this.emit("message","存档成功")},[P]:(t,{$state:e,$loader:i})=>(e.mapId=null,i.loadMap(t).then((i=>{const s=setTimeout((()=>{e.mapId=t,clearTimeout(s)}))}))),[O](t,{$state:e}){e.mapId=null},[T]:(t,{$state:e,$loader:i})=>i.loadShop(t).then((i=>{e.shopId=t})),[A](t,{$state:e,$loader:i}){e.shopId=null}};const N={width:1,color:"white"},K={width:2,color:"white"},W="25px 楷体";var L={onClick({text:t}){this.$event.emit(E),this.$event.emit(T,t)},render(){return this.$createElement("view",{position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:9,height:8},align:"center",verticalAlign:"middle",bgColor:"black",border:K},this.$createElement("view",{text:"选择商店",position:{x:4.5,y:.8},style:{font:W}}),this.$createElement($,{position:{x:1,y:1.5},render:this.$state.save.shops.map((t=>this.$createElement("view",{text:t,size:{height:.7,width:7},bgColor:"rgba(0,0,0,.5)",border:N,onClick:this.onClick})))}))}},G={render(){const{render:t,columns:e=3,columnWidth:i=3,...s}=this.props;return this.$createElement("view",this.props,t.map(((t,s)=>{const n=s%e,o=s/e|0;return this.$createElement("view",{position:{x:n*i,y:o}},t)})))}};var F={onClick({text:t}){this.$event.emit("toggleShowCompass"),this.$event.emit("gotoMap",{map:t,x:6,y:11,sx:0,sy:0})},render(){return this.$createElement("view",{align:"center",verticalAlign:"middle",position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:10,height:11},bgColor:"black",border:{width:2,color:"white"}},this.$createElement("view",{text:"选择楼层",position:{x:5,y:.8},style:{font:W}}),this.$createElement(G,{align:"center",position:{x:5,y:1.5},size:{width:9,height:11},columns:3,columnWidth:3,render:this.$state.save.floors.map((t=>this.$createElement("view",{text:t,position:{x:.2},size:{height:.9,width:2.6},border:{width:1,color:"white"},onClick:this.onClick})))}))}};var j={onCreate(){const{shopId:t}=this.$state;this.shopJSON=this.$loader.$resource.shops[t],this.$state.save.shops.includes(t)||this.$state.save.shops.push(t),this.textArr=this.shopJSON.text.split(/\n/)},onConfirm(t,e){const{need:i,effect:s}=t;i?this.$event.emit("checkSaveByStr",i)?(this.$event.emit("setSaveByStr",i),this.$event.emit("setSaveByStr",s)):this.$event.emit("message","不行"):this.$state.shopId=null},renderText(){return this.textArr.map(((t,e)=>this.$createElement("view",{position:{y:e/2},text:t})))},render(){return this.$createElement("view",{position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:8,height:9},align:"center",verticalAlign:"middle",bgColor:"black",border:K},this.$createElement("view",{text:this.shopJSON.title,position:{x:4,y:.8},style:{font:W}}),this.$createElement("view",{position:{x:4,y:2}},this.renderText()),this.$createElement(o,{position:{x:4,y:5},options:this.shopJSON.choices,onConfirm:this.onConfirm}))}},X={onCreate(){this.enemy=JSON.parse(JSON.stringify(this.$state.enemy)),this.callback=callback,this.turn=!1,this.tick=0,this.battleMsg=null,this.styles={battle:{x:1,y:1,width:16,height:11,fontSize:20,borderWidth:3,borderColor:"#deb887",swidth:20,sheight:10},enemy:{x:1,y:1},hero:{x:10,y:1},heroImageStyle:{x:1,y:4.5,swidth:1,sheight:1,width:2,height:2,sy:0},enemyImageStyle:{x:1,y:4.5,swidth:1,sheight:1,width:2,height:2}},this.loop=this.createLoop(1.5,2,2,1/32,!0),this.proprety=[{text:"名称",key:"name"},{text:"生命",key:"hp"},{text:"攻击",key:"atk"},{text:"防御",key:"def"}]},onClick(){return this.battleMsg&&(this.enemy=null,this.callback&&this.callback()),!0},calc(){const t=this.enemy,e=this.$state.save,i=e.hero;if(t.hp>0&&(this.tick++,3===this.tick)){if(this.turn){const e=t.atk-i.def;e>0&&(i.hp-=e)}else{const s=i.atk-t.def;if(s>0&&(t.hp-=s),t.hp<=0){t.hp=0;const{exp:s,money:n}=t;i.exp+=s,e.money+=n,this.battleMsg=`战斗胜利，获得${n}金币，${s}经验`}}this.turn=!this.turn,this.tick=0}},render(){this.calc();const t=this.enemy,e=this.$state.save.hero;t.sy;const i={x:6.5,y:2,height:64,width:64},s=this.loop(),{styles:n}=this;return this.$createElement("view",{image:"Battlebacks/mota.jpg",style:this.styles.battle,onClick:this.onClick},this.battleMsg&&this.$createElement("view",{style:{fontSize:24,height:1,y:8,width:15,textAlign:"center"}},this.battleMsg,this.$createElement("view",{style:{x:8,y:s,height:1}},"↓")),this.$createElement("view",{style:this.styles.enemy},this.$createElement("view",{image:"enemys",style:n.enemyImageStyle}),this.proprety.map(((e,i)=>this.$createElement("view",{style:{x:0,y:1*i}},this.$createElement("view",{style:{width:4,textAlign:"left",height:1}},e.text),this.$createElement("view",{style:{width:4,textAlign:"right",height:1}},t[e.key]))))),this.$createElement("view",{style:i},"VS"),this.$createElement("view",{style:this.styles.hero},this.$createElement("view",{image:"Characters/hero.png",style:n.heroImageStyle}),this.proprety.map(((t,i)=>this.$createElement("view",{style:{x:0,y:1*i}},this.$createElement("view",{style:{width:4,textAlign:"left",height:1}},e[t.key]),this.$createElement("view",{style:{width:4,textAlign:"right",height:1}},t.text))))))}},H={render(){const{dataSource:t,columns:e,dataExtra:i}=this.props;let s=1;return this.$createElement("view",this.props,t.map(((t,n)=>{let o=0;return e.map(((e,h)=>{const{title:r,dataIndex:a,width:l=1,height:c=1,render:p}=e;return this.$createElement("view",{position:{x:o,y:n},right:o+=l,bottom:s+=c},p?p.call(this,{rowData:t,rowIndex:n,columnIndex:h,column:e,dataExtra:i}):this.$createElement("view",{text:t[a]}))}))})))}};const R=[{title:null,width:1,height:1.2,render({rowIndex:t}){return this.$createElement("view",{image:"enemys",sposition:{sx:0,sy:t},size:{width:1,height:1}})}},{title:"名字",width:2.5,height:1,dataIndex:"name",render({rowData:t,column:e}){return this.$createElement("view",{text:t[e.dataIndex],size:{width:e.width,height:e.height}})}},{title:"生命",width:1.5,height:1,dataIndex:"hp",render({rowData:t,column:e}){return this.$createElement("view",{text:t[e.dataIndex],size:{width:e.width,height:e.height}})}},{title:"攻击",width:2,height:1,dataIndex:"atk",render({rowData:t,column:e}){return this.$createElement("view",{text:t[e.dataIndex],size:{width:e.width,height:e.height}})}},{title:"防御",width:2,height:1,dataIndex:"def",render({rowData:t,column:e}){return this.$createElement("view",{text:t[e.dataIndex],size:{width:e.width,height:e.height}})}},{title:"损失",width:2,height:.7,dataIndex:"battleResult",render({rowData:t,column:e}){return this.$createElement("view",{text:t[e.dataIndex],size:{width:e.width,height:e.height}})}}];var V={onCreate(){this.dataSource=Object.values(this.$loader.$resource.sprites.enemys).slice(0,5)},onClick(){this.$event.emit(u)},render(){const{dataSource:t}=this;return this.$createElement("view",{position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:9,height:11},align:"center",verticalAlign:"middle",bgColor:"black",border:{width:2,color:"white"},onClick:this.onClick},this.$createElement(H,{dataSource:t,columns:R}))}};var Y={onClick({text:t}){this.$event.emit("toggleShowCompass"),this.$event.emit("gotoMap",{map:t,x:6,y:11,sx:0,sy:0})},render(){return this.$createElement("view",{align:"center",verticalAlign:"middle",position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:10,height:11},bgColor:"black",border:{width:2,color:"white"}},this.$createElement("view",{text:"选择楼层",position:{x:5,y:.8},style:{font:W}}),this.$createElement(G,{align:"center",position:{x:5,y:1.5},size:{width:9,height:11},columns:3,columnWidth:3,render:this.$state.save.floors.map((t=>this.$createElement("view",{text:t,position:{x:.2},size:{height:.9,width:2.6},border:{width:1,color:"white"},onClick:this.onClick})))}))}};var Z={onClick({text:t}){this.$event.emit("toggleShowCompass"),this.$event.emit("gotoMap",{map:t,x:6,y:11,sx:0,sy:0})},render(){return this.$createElement("view",{align:"center",verticalAlign:"middle",position:{x:this.$config.screen.width/2,y:this.$config.screen.height/2},size:{width:10,height:11},bgColor:"black",border:{width:2,color:"white"}},this.$createElement("view",{text:"选择楼层",position:{x:5,y:.8},style:{font:W}}),this.$createElement(G,{align:"center",position:{x:5,y:1.5},size:{width:9,height:11},columns:3,columnWidth:3,render:this.$state.save.floors.map((t=>this.$createElement("view",{text:t,position:{x:.2},size:{height:.9,width:2.6},border:{width:1,color:"white"},onClick:this.onClick})))}))}};const q="playSound";var Q={[q]:(t,{$state:e,$sound:i,$loader:s})=>i.play(t)},U={onCreate(){console.log(this),this.$event.registry(J,k,Q)},renderWindow(){const{$state:t}=this,{mapId:e}=t,i=this.$loader.$resource.maps[e];if(i){const{text:t,movie:e}=i;return t?this.$createElement(a,null):e?this.$createElement(l,null):this.$createElement(y,null)}return this.$createElement(h,null)},renderModal(){const{$state:t}=this,{shopId:e,showShopList:i,showEnemyInfo:s,showCompass:n,showBattle:o,showConfig:h,showStatistics:r}=t||{};return this.$createElement("view",null,this.$createElement(v,{show:s,onClose:()=>t.showEnemyInfo=!1},this.$createElement(V,null)),this.$createElement(v,{show:n},this.$createElement(F,null)),this.$createElement(v,{show:i},this.$createElement(L,null)),this.$createElement(v,{show:e},this.$createElement(j,null)),this.$createElement(v,{show:h},this.$createElement(Y,null)),this.$createElement(v,{show:r},this.$createElement(Z,null)),this.$createElement(v,{show:o},this.$createElement(X,null)))},renderDemo(){return this.$createElement("view",{onClick:()=>alert(1),style:{font:"18px 楷体"},position:{x:4,y:5},textAlign:"center",size:{width:5,height:5},bgColor:"red"},this.$createElement("view",{position:{x:1,y:1},style:{font:"22px 楷体"},bgColor:"blue",size:{width:2,height:2},onClick:()=>alert(2)},"textProps",this.$createElement("view",{position:{x:1,y:1},size:{width:2,height:2},bgColor:"yellow",onClick:t=>{t.stopPropagation(),alert(3)}},"222")))},render(){const{$loader:s}=this;return s.loading?this.$createElement(n,null):this.$createElement("view",null,this.renderWindow(),this.renderModal(),this.$createElement(e,null),this.$createElement(i,null),this.$createElement(t,null))}};export{U as default};
