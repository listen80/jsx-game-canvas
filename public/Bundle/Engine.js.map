{"version":3,"file":"Engine.js","sources":["../../src/Engine/const/fonts.js","../../src/Engine/const/style.js","../../src/Engine/core/Draw.js","../../src/Engine/utils/type.js","../../src/Engine/core/Render.js","../../src/Engine/utils/http.js","../../src/Engine/core/Loader.js","../../src/Engine/core/Sound.js","../../src/Engine/core/EventStream.js","../../src/Engine/core/EventEmitter.js","../../src/Engine/core/Node.js","../../src/Engine/index.js"],"sourcesContent":["export function checkFont (name, size = 16) {\r\n  return document.fonts.check(`${size}px ${name}`)\r\n}\r\n\r\nexport const fontsIos = [\r\n  '娃娃体-简',\r\n  '兰亭黑-简',\r\n  '凌慧体-简',\r\n  '翩翩体-简',\r\n  '魏碑体-简',\r\n  '雅痞体-简',\r\n  '苹方-简',\r\n  '楷体-简',\r\n  '黑体-简',\r\n  '宋体-简',\r\n]\r\n\r\nexport const fontsAndroid = ['Roboto', 'Noto Sans', 'Droid']\r\n\r\nexport const fontsMircroSoft = ['楷体', '黑体', '宋体', '微软雅黑', '仿宋']\r\n\r\nexport const fonts = [...fontsMircroSoft, ...fontsIos, ...fontsAndroid]\r\n\r\nexport const fontFamily = fonts.find(checkFont) || '楷体'\r\n","import { fontFamily } from './fonts'\r\n\r\nexport const baseStyle = {\r\n  direction: 'ltr',\r\n  fillStyle: 'black',\r\n  fillStyle: '#fff',\r\n  // filter: 'grayscale(.9)',\r\n  filter: 'none',\r\n  font: '16px ' + fontFamily,\r\n  globalAlpha: 1,\r\n  globalCompositeOperation: 'source-over',\r\n  // imageSmoothingEnabled: true,\r\n  // imageSmoothingQuality: 'low',\r\n  imageSmoothingEnabled: false,\r\n  lineCap: 'butt',\r\n  lineDashOffset: 0,\r\n  lineJoin: 'miter',\r\n  lineWidth: 1,\r\n  miterLimit: 10,\r\n  shadowBlur: 0,\r\n  shadowColor: 'rgba(0, 0, 0, 0)',\r\n  shadowOffsetX: 0,\r\n  shadowOffsetY: 0,\r\n  strokeStyle: 'white',\r\n  textAlign: 'center',\r\n  // textBaseline: \"alphabetic\",\r\n  textBaseline: 'middle',\r\n  // textBaseline: \"top\",\r\n}\r\n\r\n// const { textAlign, textBaseline } = context;\r\n// const x = { start: 0, left: 0, center: 0.5, right: 1, end: 0 };\r\n// const y = {\r\n//   alphabetic: 0,\r\n//   hanging: 0,\r\n//   ideographic: 0,\r\n//   top: 0,\r\n//   middle: 0.5,\r\n//   bottom: 1,\r\n// };\r\n// start 默认。文本在指定的位置开始。\r\n// end 文本在指定的位置结束。\r\n// center 文本的中心被放置在指定的位置。\r\n// left 文本在指定的位置开始。\r\n// right 文本在指定的位置结束。\r\n\r\n// alphabetic 默认。文本基线是普通的字母基线。\r\n// top 文本基线是 em 方框的顶端。\r\n// hanging 文本基线是悬挂基线。\r\n// middle 文本基线是 em 方框的正中。\r\n// ideographic 文本基线是表意基线。\r\n// bottom 文本基线是 em 方框的底端。\r\n// context.fillText(\r\n//   text,\r\n//   (offsetX + width * x[textAlign]) * size,\r\n//   (offsetY + height * y[textBaseline]) * size\r\n// );\r\n","export default class Draw {\r\n  clearRect() {\r\n    const { context } = this;\r\n    const { canvas } = context;\r\n    context.clearRect(0, 0, canvas.width, canvas.height);\r\n  }\r\n\r\n  drawImage(node, offsetX, offsetY) {\r\n    const { pixelRatio } = this.config;\r\n    const { props } = node;\r\n    const { sposition = {}, spixelRatio = {}, image } = props;\r\n    const { width = 0, height = 0 } = props.size || {};\r\n    const { context } = this;\r\n\r\n    const { sx = 0, sy = 0 } = sposition;\r\n    const { swidth = width, sheight = height } = spixelRatio;\r\n    const imgElement = this.getImage(image);\r\n\r\n    if (imgElement) {\r\n      context.drawImage(\r\n        imgElement,\r\n        sx * pixelRatio,\r\n        sy * pixelRatio,\r\n        swidth * pixelRatio,\r\n        sheight * pixelRatio,\r\n        offsetX * pixelRatio,\r\n        offsetY * pixelRatio,\r\n        width * pixelRatio,\r\n        height * pixelRatio\r\n      );\r\n    }\r\n  }\r\n\r\n  drawBorder(node, offsetX, offsetY) {\r\n    const { pixelRatio } = this.config;\r\n    const { context } = this;\r\n    const { width: borderWidth, color: borderColor } = node.props.border;\r\n    const { width = 0, height = 0 } = node.props.size || {};\r\n    if (borderWidth) {\r\n      context.save();\r\n      context.lineWidth = borderWidth;\r\n      context.beginPath();\r\n      context.rect(\r\n        offsetX * pixelRatio + borderWidth / 2,\r\n        offsetY * pixelRatio + borderWidth / 2,\r\n        width * pixelRatio - borderWidth,\r\n        height * pixelRatio - borderWidth\r\n      );\r\n      context.strokeStyle = borderColor;\r\n      context.stroke();\r\n      context.closePath();\r\n      context.restore();\r\n    }\r\n  }\r\n\r\n  drawBackgroundImage(node, offsetX, offsetY) {\r\n    const { pixelRatio } = this.config;\r\n    const { context } = this;\r\n    const bgImage = node.props.bgImage;\r\n    const { width = 0, height = 0 } = node.props.size || {};\r\n\r\n    if (bgImage) {\r\n      context.save();\r\n      context.beginPath();\r\n      context.rect(\r\n        offsetX * pixelRatio,\r\n        offsetY * pixelRatio,\r\n        width * pixelRatio,\r\n        height * pixelRatio\r\n      );\r\n\r\n      const image = this.getImage(bgImage);\r\n\r\n      if (image) {\r\n        context.fillStyle = context.createPattern(image, \"repeat\");\r\n        context.fill();\r\n        context.closePath();\r\n        context.restore();\r\n      } else {\r\n        this.$loader.loadImage(bgImage);\r\n      }\r\n    }\r\n  }\r\n\r\n  drawBackgroundColor(node, offsetX, offsetY) {\r\n    const bgColor = node.props.bgColor;\r\n    if (bgColor) {\r\n      const { pixelRatio } = this.config;\r\n      const { context } = this;\r\n      const { width = 0, height = 0 } = node.props.size || {};\r\n      context.save();\r\n      context.beginPath();\r\n      context.fillStyle = bgColor;\r\n      context.rect(\r\n        offsetX * pixelRatio,\r\n        offsetY * pixelRatio,\r\n        width * pixelRatio,\r\n        height * pixelRatio\r\n      );\r\n\r\n      context.fill();\r\n      context.restore();\r\n      context.closePath();\r\n    }\r\n  }\r\n\r\n  drawText(node, offsetX, offsetY) {\r\n    const { text, size } = node.props;\r\n    const { context } = this;\r\n    const { pixelRatio } = this.config;\r\n    const { textAlign, textBaseline } = context;\r\n    const { width = 0, height = 0 } = size || {};\r\n\r\n    if (textAlign === \"center\") {\r\n      offsetX += width / 2;\r\n    }\r\n\r\n    if (textBaseline === \"middle\") {\r\n      offsetY += height / 2;\r\n    }\r\n    context.fillText(text, offsetX * pixelRatio, offsetY * pixelRatio);\r\n  }\r\n\r\n  drawTextPrimitiv(text, offsetX, offsetY, node) {\r\n    const { size } = node.props;\r\n    const { context } = this;\r\n    const { pixelRatio } = this.config;\r\n    const { textAlign, textBaseline } = context;\r\n    const { width = 0, height = 0 } = size || {};\r\n\r\n    if (textAlign === \"center\") {\r\n      offsetX += width / 2;\r\n    }\r\n\r\n    if (textBaseline === \"middle\") {\r\n      offsetY += height / 2;\r\n    }\r\n    context.fillText(text, offsetX * pixelRatio, offsetY * pixelRatio);\r\n  }\r\n\r\n  drawLineGradient(node, offsetX, offsetY) {\r\n    const { lineGradient } = node.props;\r\n    const { pixelRatio } = this.config;\r\n\r\n    if (lineGradient) {\r\n      const { context } = this;\r\n      context.fillStyle = lineGradient;\r\n      context.fillRect(offsetX * pixelRatio, offsetY * pixelRatio, 2000, 32);\r\n    }\r\n  }\r\n}\r\n","export const getType = (o) => Object.prototype.toString.call(o).slice(8, -1);\r\n\r\nexport const isPrimitive = (value) => {\r\n  const type = typeof value;\r\n  return type === \"string\" || type === \"number\";\r\n};\r\n\r\nexport const isFunc = (f) => typeof f === \"function\";\r\n\r\nexport const isArray = (a) => Array.isArray(a);\r\n\r\nexport const isUndefined = (o) => o === undefined || o === null;\r\n\r\nexport const isString = (o) => typeof o === \"string\";\r\n\r\nexport const isBoolean = (o) => typeof o === \"boolean\";\r\n\r\nexport const isObject = (o) => getType(o) === \"Object\";\r\n\r\nexport const isComponent = (createNode) =>\r\n  createNode && isObject(createNode.createtor);\r\n\r\nexport const isElement = (createNode) =>\r\n  createNode && isString(createNode.createtor);\r\n\r\nexport const isDisalbedElement = (createNode) =>\r\n  isPrimitive(createNode) || isUndefined(createNode) || isBoolean(createNode);\r\n","import { baseStyle } from \"../const/style\";\r\nimport Draw from \"./Draw\";\r\nimport { defaultHeight, defaultWidth } from \"../const/box\";\r\nimport {\r\n  isArray,\r\n  isDisalbedElement,\r\n  isComponent,\r\n  isElement,\r\n  isUndefined,\r\n} from \"../utils/type\";\r\nexport default class Render extends Draw {\r\n  constructor(config, $loader) {\r\n    super();\r\n    this.config = config.screen;\r\n    this.$loader = $loader;\r\n    this.initCanvas(config);\r\n  }\r\n\r\n  getImage(src) {\r\n    const image = this.$loader.$resource.image[src];\r\n    return image;\r\n  }\r\n\r\n  initCanvas() {\r\n    const { pixelRatio, el, width = 13, height = 13 } = this.config;\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    this.canvas = canvas;\r\n    this.context = canvas.getContext(\"2d\");\r\n\r\n    this.canvas.width = width * pixelRatio;\r\n    this.canvas.height = height * pixelRatio;\r\n\r\n    const dom = document.querySelector(el || \"#game\") || document.body;\r\n    dom && dom.appendChild(this.canvas);\r\n\r\n    this.mergeStyle(baseStyle);\r\n    this.getCanvasRenderRect();\r\n  }\r\n\r\n  getCanvasRenderRect() {\r\n    const canvas = this.canvas;\r\n\r\n    this.canvas.$offsetWidth = canvas.offsetWidth;\r\n    this.canvas.$offsetHeight = canvas.offsetHeight;\r\n  }\r\n\r\n  mergeStyle(style) {\r\n    Object.assign(this.context, style);\r\n  }\r\n\r\n  drawNode(node, offsetX, offsetY, offsetParent) {\r\n    const { context } = this;\r\n    context.save();\r\n    const { children, props } = node;\r\n    if (props) {\r\n      const {\r\n        style,\r\n        image,\r\n        text,\r\n        border,\r\n        bgImage,\r\n        bgColor,\r\n        lineGradient,\r\n      } = props;\r\n\r\n      if (style) {\r\n        this.mergeStyle(style);\r\n      }\r\n\r\n      if (bgColor) {\r\n        this.drawBackgroundColor(node, offsetX, offsetY);\r\n      }\r\n\r\n      if (bgImage) {\r\n        this.drawBackgroundImage(node, offsetX, offsetY);\r\n      }\r\n\r\n      if (image) {\r\n        this.drawImage(node, offsetX, offsetY);\r\n      }\r\n\r\n      if (text != null) {\r\n        this.drawText(node, offsetX, offsetY, offsetParent);\r\n      }\r\n\r\n      if (border) {\r\n        this.drawBorder(node, offsetX, offsetY);\r\n      }\r\n\r\n      if (lineGradient) {\r\n        this.drawLineGradient(node, offsetX, offsetY);\r\n      }\r\n    }\r\n\r\n    children.forEach((child) =>\r\n      this.renderAnything(child, offsetX, offsetY, node)\r\n    );\r\n\r\n    context.restore();\r\n  }\r\n\r\n  renderAnything(createdNode, offsetX, offsetY, offsetParent) {\r\n    // undefined null\r\n    // string number\r\n    // array\r\n    // component\r\n    // view node\r\n    if (isUndefined(createdNode)) {\r\n      return;\r\n    }\r\n    if (isElement(createdNode)) {\r\n      // view node\r\n      this.renderElementNode(createdNode, offsetX, offsetY, offsetParent);\r\n      return;\r\n    }\r\n    if (isDisalbedElement(createdNode, offsetParent)) {\r\n      this.drawTextPrimitiv(createdNode, offsetX, offsetY, offsetParent);\r\n      return;\r\n    }\r\n    if (isArray(createdNode)) {\r\n      createdNode.forEach((child) =>\r\n        this.renderAnything(child, offsetX, offsetY, offsetParent)\r\n      );\r\n      return;\r\n    }\r\n    if (isComponent(createdNode)) {\r\n      this.renderAnything(createdNode.$node, offsetX, offsetY, offsetParent);\r\n      return;\r\n    }\r\n  }\r\n\r\n  renderElementNode(node, offsetX, offsetY, offsetParent) {\r\n    // 非class component\r\n    // view node\r\n    // { props, children }\r\n    if (node.props) {\r\n      const { position, size } = node.props;\r\n\r\n      const { x = 0, y = 0 } = position || {};\r\n      const { width = 0, height = 0 } = size || {};\r\n\r\n      const { align = \"left\", verticalAlign = \"top\" } = node.props;\r\n      const offsetAlign = { left: 0, center: -0.5, right: -1 };\r\n      const offsetAlignRate = offsetAlign[align];\r\n      offsetX += x + width * offsetAlignRate;\r\n\r\n      const offsetVerticalAlign = { top: 0, middle: -0.5, bottom: -1 };\r\n      const offsetVerticalAlignRate = offsetVerticalAlign[verticalAlign];\r\n      offsetY += y + height * offsetVerticalAlignRate;\r\n    }\r\n    this.drawNode(node, offsetX, offsetY, offsetParent);\r\n  }\r\n\r\n  render(createdNode) {\r\n    this.clearRect();\r\n    this.renderAnything(createdNode, 0, 0, null);\r\n  }\r\n}\r\n","\r\nexport const formatText = (text) => {\r\n  const o = Object.create(null)\r\n  const dataArray = text.split(/\\r?\\n/)\r\n  const keys = dataArray.shift().split(',')\r\n  dataArray.forEach((row, index) => {\r\n    if (!row.trim() || row.startsWith('//') || row.startsWith('#')) {\r\n      return\r\n    }\r\n    const properties = row.split(',')\r\n    const [id] = properties\r\n    const item = { sy: index }\r\n    keys.forEach((key, index) => {\r\n      const value = properties[index]\r\n      if (!value) {\r\n        return\r\n      }\r\n      if (['id', 'name', 'type'].includes(key)) {\r\n        item[key] = value\r\n      } else {\r\n        item[key] = isNaN(value) ? value : Number(value)\r\n      }\r\n    })\r\n    o[id] = item\r\n  })\r\n  return o\r\n}\r\n\r\nexport const loadImage = (src, callback) => {\r\n  return new Promise(function (resolve, reject) {\r\n    const img = new Image()\r\n    img.addEventListener('load', () => {\r\n      callback && callback(src, img)\r\n      resolve(img)\r\n    })\r\n    img.addEventListener('error', () => reject(img))\r\n    img.src = src\r\n  })\r\n}\r\n\r\nexport const loadMovie = (src, callback) => {\r\n  return new Promise(function (resolve, reject) {\r\n    const img = new Image()\r\n    img.addEventListener('load', () => {\r\n      callback && callback(src, img)\r\n      resolve(img)\r\n    })\r\n    img.addEventListener('error', () => reject(img))\r\n    img.src = src\r\n  })\r\n}\r\n\r\nexport const loadSound = (src, callback) => {\r\n  const audio = new Audio()\r\n  audio.addEventListener('canplay', () => {\r\n    callback && callback(src, audio)\r\n  })\r\n  audio.addEventListener('error', () => callback(audio))\r\n  audio.src = src\r\n  return audio\r\n}\r\n\r\nexport function loadJSON (url) {\r\n  return fetch(url).then((data) => data.json())\r\n}\r\n\r\nexport function loadText (url) {\r\n  return fetch(url)\r\n    .then((data) => data.text())\r\n    .then((data) => formatText(data))\r\n}\r\n\r\nexport function loadFont ({ name, url }) {\r\n  const fontface = new FontFace(name, `url(\"${url}\")`)\r\n  document.fonts.add(fontface)\r\n  fontface.load()\r\n  return fontface.loaded\r\n}\r\n","import { loadJSON, loadText, loadImage } from \"../utils/http\";\r\n\r\nconst emptyImage = new Image();\r\n\r\nexport default class Loader {\r\n  constructor() {\r\n    this.loaded = 0;\r\n    this.total = 0;\r\n    this.loading = true;\r\n\r\n    this.$resource = Object.create(null);\r\n    this.$resource.maps = Object.create(null);\r\n    this.$resource.shops = Object.create(null);\r\n    this.$resource.image = Object.create(null);\r\n    this.$resource.sprites = Object.create(null);\r\n  }\r\n\r\n  init(config) {\r\n    // this.loading = true\r\n    // config.init.map((item) => this.loadJSON(item))\r\n\r\n    // .then(\r\n    //   (...all) => {\r\n    //     config.init.forEach((item, index) => {\r\n    //       config[item] = all[index];\r\n    //     });\r\n    //   }\r\n    // )\r\n    this.config = config;\r\n    this.loadMapping();\r\n    this.loadImage();\r\n    this.loadSprite();\r\n  }\r\n\r\n  checkStatus() {\r\n    if (this.loaded === this.total) {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  loadMapping() {\r\n    this.config.resource.mapping.forEach((name) => {\r\n      this.total++;\r\n      loadText(`Data/${name}`).then((data) => {\r\n        this.loaded++;\r\n        this.$resource.mapping = data;\r\n      });\r\n    });\r\n  }\r\n\r\n  loadImage() {\r\n    this.config.resource.images.forEach((name) => {\r\n      this.total++;\r\n      loadImage(`Image/${name}`).then((data) => {\r\n        this.$resource.image[name] = data;\r\n        this.loaded++;\r\n        this.checkStatus();\r\n      });\r\n    });\r\n  }\r\n\r\n  loadMovie() {\r\n    this.config.resource.images.forEach((name) => {\r\n      this.total++;\r\n      loadMovie(`Image/${name}`).then((data) => {\r\n        this.$resource.image[name] = data;\r\n        this.loaded++;\r\n        this.checkStatus();\r\n      });\r\n    });\r\n  }\r\n\r\n  loadSprite() {\r\n    this.config.resource.sprites.forEach((name) => {\r\n      this.total++;\r\n      loadImage(`Sprite/${name}.png`).then((data) => {\r\n        this.$resource.image[name] = data;\r\n        this.loaded++;\r\n        this.checkStatus();\r\n      });\r\n      this.total++;\r\n      loadText(`Sprite/${name}.dat`).then((data) => {\r\n        this.$resource.sprites[name] = data;\r\n        this.loaded++;\r\n        this.checkStatus();\r\n      });\r\n    });\r\n  }\r\n\r\n  loadMap(id) {\r\n    // if (this.$resource.maps[id]) {\r\n    //   return Promise.resolve(this.$resource.maps[id]);\r\n    // }\r\n    this.loaded = 0;\r\n    this.total = 0;\r\n\r\n    this.total++;\r\n    return loadJSON(`Maps/${id}.json`).then((data) => {\r\n      this.$resource.maps[id] = data;\r\n      this.loaded++;\r\n      this.checkStatus();\r\n      return data;\r\n    });\r\n  }\r\n\r\n  loadShop(id) {\r\n    // if (this.$resource.maps[id]) {\r\n    //   return Promise.resolve(this.$resource.maps[id]);\r\n    // }\r\n    this.loaded = 0;\r\n    this.total = 0;\r\n\r\n    this.total++;\r\n    return loadJSON(`Shops/${id}.json`).then((data) => {\r\n      this.$resource.shops[id] = data;\r\n      this.loaded++;\r\n      this.checkStatus();\r\n      return data;\r\n    });\r\n  }\r\n\r\n  loadJSON(id) {\r\n    this.loaded = 0;\r\n    this.total = 0;\r\n\r\n    this.total++;\r\n    return loadJSON(`Data/${id}.json`).then((data) => {\r\n      this.$resource.maps[id] = data;\r\n      this.loaded++;\r\n      this.checkStatus();\r\n      return data;\r\n    });\r\n  }\r\n\r\n  loadConfig() {\r\n    return loadJSON(\"config.json\");\r\n  }\r\n\r\n  loadImageNext(url) {\r\n    this.$resource.image[url] = emptyImage;\r\n    this.total++;\r\n    if (!url) {\r\n      return;\r\n    }\r\n    return loadImage(`Image/${url}`)\r\n      .then((data) => {\r\n        this.$resource.image[url] = data;\r\n        this.loaded++;\r\n        this.checkStatus();\r\n      })\r\n      .catch((e) => {});\r\n  }\r\n}\r\n","import { loadSound } from '../utils/http'\r\n\r\nexport default class Sound {\r\n  constructor (config) {\r\n    this.config = config\r\n    this.sounds = Object.create(null)\r\n    this.total = Infinity\r\n  }\r\n\r\n  control (type, name, control) {\r\n    return null\r\n    return loadSound(`Sound/${type}/${name}`, (src, el) => {\r\n      el.loop = type === 'bgm'\r\n      el[control]().catch((e) => e && console.log(e))\r\n    })\r\n  }\r\n\r\n  play (type, name) {\r\n    return this.control(type, name, 'play')\r\n  }\r\n\r\n  pause (type, name) {\r\n    return this.control(type, name, 'pause')\r\n  }\r\n}\r\n","import { baseStyle } from \"../const/style\";\r\nimport Draw from \"./Draw\";\r\nimport { defaultHeight, defaultWidth } from \"../const/box\";\r\nimport {\r\n  isArray,\r\n  isDisalbedElement,\r\n  isComponent,\r\n  isElement,\r\n} from \"../utils/type\";\r\nconst mouseEvents = [\r\n  \"Click\",\r\n  // \"ContextMenu\",\r\n  // \"Wheel\",\r\n  // \"MouseDown\",\r\n  // \"MouseUp\",\r\n  // \"MouseMove\",\r\n];\r\nconst figureEvents = [\"TouchStart\", \"TouchUp\", \"TouchMove\"];\r\n\r\nconst keyEvents = [\"KeyDown\", \"KeyUp\"];\r\n\r\nconst listEvents = [...mouseEvents, ...figureEvents];\r\n\r\nconst map = Object.create(null);\r\n\r\n[...listEvents, ...keyEvents].forEach((name) => {\r\n  map[name.toLocaleLowerCase()] = `on${name}`;\r\n});\r\nexport default class EventStream {\r\n  constructor(engine) {\r\n    this.$render = engine.$render;\r\n    this.canvas = this.$render.canvas;\r\n    this.$engine = engine;\r\n    this.currentFramesList = [];\r\n    this.bindEvents();\r\n\r\n    const canvas = this.canvas;\r\n    this.canvas.$offsetWidth = canvas.offsetWidth;\r\n    this.canvas.$offsetHeight = canvas.offsetHeight;\r\n  }\r\n  callback = (e) => {\r\n    const canvas = this.canvas;\r\n    const { pixelRatio = 32 } = this.$engine.$config;\r\n    const { $offsetWidth, $offsetHeight, width, height } = canvas;\r\n\r\n    e.canvasX = (e.offsetX / $offsetWidth) * width;\r\n    e.canvasY = (e.offsetY / $offsetHeight) * height;\r\n    e.gameX = Math.floor(e.canvasX / pixelRatio);\r\n    e.gameY = Math.floor(e.canvasY / pixelRatio);\r\n    e.name = map[e.type];\r\n    // e.preventDefault();\r\n    this.colletEvent(e);\r\n  };\r\n  colletEvent(e) {\r\n    this.currentFramesList.push(e);\r\n  }\r\n  runEvent(element, name, e) {\r\n    if (!element) {\r\n      return;\r\n    }\r\n    const { props, offsetParent } = element;\r\n\r\n    e.props = props;\r\n    props?.[name]?.(e, props);\r\n\r\n    !e.cancelBubble && this.runEvent(offsetParent, name, e);\r\n  }\r\n  runEvents() {\r\n    this.currentFramesList.forEach((e) => {\r\n      const { name, $node } = e;\r\n      this.runEvent($node, name, e);\r\n    });\r\n    // const length = this.currentFramesList.length;\r\n    // this.currentFramesList.splice(0, length);\r\n    this.currentFramesList = [];\r\n  }\r\n  bind(events, dom) {\r\n    events.forEach((name) => {\r\n      dom.addEventListener(name.toLowerCase(), this.callback, {\r\n        passive: false,\r\n      });\r\n    });\r\n  }\r\n  bindEvents() {\r\n    const canvas = this.canvas;\r\n    this.bind(listEvents, canvas);\r\n    this.bind(keyEvents, window);\r\n  }\r\n  unbindEvents() {\r\n    const canvas = this.canvas;\r\n    listEvents.forEach((name) => {\r\n      document.addEventListener(name.toLowerCase(), this.callback, {\r\n        passive: false,\r\n      });\r\n    });\r\n  }\r\n\r\n  calcChildren(node, offsetX, offsetY, offsetParent) {\r\n    const { children } = node;\r\n    children.forEach((child) =>\r\n      this.calcAnything(child, offsetX, offsetY, node)\r\n    );\r\n  }\r\n  calcNode(node, offsetX, offsetY, offsetParent) {\r\n    // 非class component\r\n    // view node\r\n    // { props, children }\r\n    const { props } = node;\r\n    if (props) {\r\n      const { position, size } = props;\r\n\r\n      const { x = 0, y = 0 } = position || {};\r\n      const { width = 0, height = 0 } = size || {};\r\n\r\n      const { align, verticalAlign } = props;\r\n      if (align) {\r\n        const offsetAlign = { left: 0, center: -0.5, right: -1 };\r\n        const offsetAlignRate = offsetAlign[align];\r\n        offsetX += x + width * offsetAlignRate;\r\n      } else {\r\n        offsetX += x;\r\n      }\r\n      if (verticalAlign) {\r\n        const offsetVerticalAlign = { top: 0, middle: -0.5, bottom: -1 };\r\n        const offsetVerticalAlignRate = offsetVerticalAlign[verticalAlign];\r\n        offsetY += y + height * offsetVerticalAlignRate;\r\n      } else {\r\n        offsetY += y;\r\n      }\r\n    }\r\n    node.offsetParent = offsetParent;\r\n    this.calcEvent(node, offsetX, offsetY, offsetParent);\r\n    this.calcChildren(node, offsetX, offsetY, offsetParent);\r\n  }\r\n\r\n  calcEvent(node, offsetX, offsetY) {\r\n    // events of mouse\r\n    const { props } = node;\r\n    if (props) {\r\n      const { size } = props;\r\n      const { width = 0, height = 0 } = size || {};\r\n      this.currentFramesList.forEach((e) => {\r\n        if (e.code) {\r\n          e.$node = node\r\n          return;\r\n        }\r\n        const { gameX, gameY } = e;\r\n        if (\r\n          gameX >= offsetX &&\r\n          gameX < width + offsetX &&\r\n          gameY >= offsetY &&\r\n          gameY < height + offsetY\r\n        ) {\r\n          e.$node = node;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  calcAnything(createdNode, offsetX, offsetY, offsetParent) {\r\n    // undefined null\r\n    // string number\r\n    // array\r\n    // component\r\n    // view node\r\n    if (isElement(createdNode)) {\r\n      // view node\r\n      this.calcNode(createdNode, offsetX, offsetY, offsetParent);\r\n      return;\r\n    }\r\n    if (isDisalbedElement(createdNode)) {\r\n      return;\r\n    }\r\n    if (isArray(createdNode)) {\r\n      createdNode.forEach((child) =>\r\n        this.calcAnything(child, offsetX, offsetY, offsetParent)\r\n      );\r\n      return;\r\n    }\r\n    if (isComponent(createdNode)) {\r\n      this.calcAnything(createdNode.$node, offsetX, offsetY, offsetParent);\r\n      return;\r\n    }\r\n  }\r\n  calc(node) {\r\n    this.calcAnything(node, 0, 0, null);\r\n    this.runEvents();\r\n  }\r\n}\r\n","export default class EventEmitter {\r\n  constructor (mixin) {\r\n    this.event = {}\r\n    this.mixin = mixin\r\n  }\r\n\r\n  // 监听\r\n  on (type, listener) {\r\n    this.event[type] = this.event[type] || []\r\n    this.event[type].push(listener)\r\n  }\r\n\r\n  // 发送监听\r\n  emit (type, data) {\r\n    this.event[type] = this.event[type] || []\r\n    this.event[type].forEach((fn) => fn.call(this, data, this.mixin))\r\n  }\r\n\r\n  // 移除监听器\r\n  off (type, listener) {\r\n    this.event[type] = this.event[type] || []\r\n    const index = this.event[type].indexOf(listener)\r\n    this.event[type].splice(index, 1)\r\n  }\r\n\r\n  registry (...events) {\r\n    events.forEach((event) => {\r\n      Object.entries(event).forEach(([key, value]) => {\r\n        this.on(key, value)\r\n      })\r\n    })\r\n  }\r\n}\r\n","import {\r\n  isArray,\r\n  isComponent,\r\n  isDisalbedElement,\r\n  isElement,\r\n} from \"../utils/type\";\r\n\r\nexport function createNode(createtor, props, ...children) {\r\n  const $parent = this; // 创建的组件\r\n  // class component\r\n  // view node\r\n  return {\r\n    createtor,\r\n    props,\r\n    children,\r\n    get $parent() {\r\n      return $parent;\r\n    },\r\n  };\r\n}\r\n\r\nfunction createInstance(next) {\r\n  const $instance = Object.create(null);\r\n  const $parent = next.$parent;\r\n  const entries = Object.entries(next.createtor);\r\n\r\n  entries.forEach(([key, value]) => {\r\n    if (value.bind) {\r\n      $instance[key] = value.bind($instance);\r\n    }\r\n  });\r\n\r\n  $instance.$createElement = createNode;\r\n\r\n  $instance.$config = $parent.$config;\r\n  $instance.$state = $parent.$state;\r\n  $instance.$loader = $parent.$loader;\r\n  $instance.$resource = $parent.$loader.$resource;\r\n  $instance.$event = $parent.$event;\r\n  $instance.$sound = $parent.$sound;\r\n  $instance.$render = $parent.$render;\r\n\r\n  $instance.props = next.props;\r\n  $instance.children = next.children;\r\n\r\n  $instance.onCreate?.();\r\n\r\n  // createNode上面生成实例\r\n  next.$instance = $instance;\r\n  next.$node = null;\r\n  renderNode(next);\r\n}\r\n\r\nfunction destoryInstance(pre) {\r\n  // && isBoolean(pre)\r\n  if (!isDisalbedElement(pre)) {\r\n    if (isComponent(pre)) {\r\n      // 组件\r\n      destoryInstance(pre.$node);\r\n      pre.$instance.onDestroy?.();\r\n    } else if (isArray(pre)) {\r\n      pre.forEach((item) => {\r\n        destoryInstance(item);\r\n      });\r\n    } else if (isElement(pre)) {\r\n      // view\r\n      destoryInstance(pre.children);\r\n    }\r\n  }\r\n}\r\n\r\n// next\r\n// { createtor, children, }\r\n// createNode上面更新实例\r\n\r\nfunction updateInstance(pre, next) {\r\n  next.$instance = pre.$instance;\r\n  next.$node = pre.$node;\r\n  next.$instance.props = next.props;\r\n  // pre.props = next.props;\r\n  // pre.$instance.props = next.props;\r\n  renderNode(next);\r\n}\r\n\r\nfunction renderNode(next) {\r\n  const $node = next.$instance.render?.();\r\n  next.$node = patchNode(next.$node, $node);\r\n}\r\n\r\nexport function patchNode(preNode, nextNode) {\r\n  // console.log(\"-----\", preNode, nextNode);\r\n  // undefined null\r\n  // string number\r\n  // array\r\n  // class component\r\n  // view node\r\n  if (isDisalbedElement(nextNode)) {\r\n    destoryInstance(preNode);\r\n  } else if (isElement(nextNode)) {\r\n    if (isElement(preNode)) {\r\n      patchNode(preNode?.children, nextNode.children);\r\n    } else {\r\n      destoryInstance(preNode);\r\n      patchNode(null, nextNode.children);\r\n    }\r\n  } else if (isComponent(nextNode)) {\r\n    if (\r\n      preNode &&\r\n      preNode.createtor === nextNode.createtor &&\r\n      preNode.props?.key === nextNode.props?.key\r\n    ) {\r\n      updateInstance(preNode, nextNode);\r\n    } else {\r\n      destoryInstance(preNode);\r\n      createInstance(nextNode);\r\n    }\r\n  } else if (isArray(nextNode)) {\r\n    nextNode.nodeMap = new Map();\r\n    if (isArray(preNode)) {\r\n      for (let i = 0; i < nextNode.length; i++) {\r\n        // diff array\r\n        const nextChildNode = nextNode[i];\r\n        const key = nextChildNode?.props?.key || i;\r\n        nextNode.nodeMap.set(key, nextChildNode);\r\n        patchNode(preNode.nodeMap.get(key), nextChildNode);\r\n      }\r\n    } else {\r\n      destoryInstance(preNode);\r\n      for (let i = 0; i < nextNode.length; i++) {\r\n        const nextChildNode = nextNode[i];\r\n        const key = nextChildNode?.props?.key || i;\r\n        nextNode.nodeMap.set(key, nextChildNode);\r\n        patchNode(null, nextNode[i]);\r\n      }\r\n    }\r\n  }\r\n  return nextNode;\r\n}\r\n","import Render from \"./core/Render\";\r\nimport Loader from \"./core/Loader\";\r\nimport Sound from \"./core/Sound\";\r\nimport EventStream from \"./core/EventStream\";\r\n\r\nimport EventEmitter from \"./core/EventEmitter\";\r\n\r\nimport { createNode, patchNode } from \"./core/Node\";\r\n\r\nexport default class Engine {\r\n  constructor($app) {\r\n    this.$app = $app;\r\n    if (this.checkRunTime()) {\r\n      this.$loader = new Loader();\r\n      this.$loader\r\n        .loadConfig()\r\n        .catch((error) => alert(\"config.json不存在\" + error))\r\n        .then((config) => this.init(config));\r\n    } else {\r\n      alert(\"不能直接运行index.html 或者 Chrome版本太老\");\r\n    }\r\n  }\r\n\r\n  checkRunTime() {\r\n    if (location.protocol === \"file:\" || !navigator.userAgentData) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  init(config) {\r\n    document.title = config.title;\r\n\r\n    this.$config = config; // 游戏配置，不允许更改\r\n\r\n    this.$state = { save: Object.create(null) }; // 游戏存档，可以修改\r\n\r\n    this.$loader.init(config); // 资源加载器\r\n\r\n    this.$sound = new Sound(config, this.$loader); // 音频控制器\r\n\r\n    this.$render = new Render(config, this.$loader); // 渲染器 + 事件控制器\r\n\r\n    this.$eventStream = new EventStream(this);\r\n\r\n    this.$event = new EventEmitter({\r\n      $config: this.$config,\r\n      $state: this.$state,\r\n      $loader: this.$loader,\r\n      $sound: this.$sound,\r\n      $render: this.$render,\r\n    });\r\n\r\n    this.$root = null;\r\n    this.gameStart();\r\n  }\r\n\r\n  gameStop() {\r\n    cancelAnimationFrame(this.$requestAnimationId);\r\n  }\r\n\r\n  gameStart() {\r\n    const next = () => {\r\n      this.$requestAnimationId = requestAnimationFrame(() => {\r\n        this.gameKeyFrame();\r\n        next();\r\n      });\r\n    };\r\n    next();\r\n  }\r\n\r\n  gameKeyFrame() {\r\n    this.$eventStream.calc(this.$root);\r\n    this.$root = patchNode(this.$root, createNode.call(this, this.$app, null));\r\n    this.$render.render(this.$root); // 渲染开始\r\n  }\r\n}\r\n"],"names":["checkFont","name","size","document","fonts","check","fontsIos","fontsAndroid","fontsMircroSoft","fontFamily","find","baseStyle","direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","Draw","clearRect","context","canvas","width","height","drawImage","node","offsetX","offsetY","pixelRatio","config","props","sposition","spixelRatio","image","sx","sy","swidth","sheight","imgElement","getImage","drawBorder","borderWidth","color","borderColor","border","save","beginPath","rect","stroke","closePath","restore","drawBackgroundImage","bgImage","createPattern","fill","$loader","loadImage","drawBackgroundColor","bgColor","drawText","text","fillText","drawTextPrimitiv","drawLineGradient","lineGradient","fillRect","getType","o","Object","prototype","toString","call","slice","isPrimitive","value","type","isArray","a","Array","isUndefined","undefined","isString","isBoolean","isObject","isComponent","createNode","createtor","isElement","isDisalbedElement","Render","constructor","screen","initCanvas","src","$resource","el","createElement","getContext","dom","querySelector","body","appendChild","mergeStyle","getCanvasRenderRect","$offsetWidth","offsetWidth","$offsetHeight","offsetHeight","style","assign","drawNode","offsetParent","children","forEach","child","renderAnything","createdNode","renderElementNode","$node","position","x","y","align","verticalAlign","offsetAlign","left","center","right","offsetAlignRate","offsetVerticalAlign","top","middle","bottom","offsetVerticalAlignRate","render","formatText","create","dataArray","split","keys","shift","row","index","trim","startsWith","properties","id","item","key","includes","isNaN","Number","callback","Promise","resolve","reject","img","Image","addEventListener","loadJSON","url","fetch","then","data","json","loadText","emptyImage","Loader","loaded","total","loading","maps","shops","sprites","init","loadMapping","loadSprite","checkStatus","resource","mapping","images","loadMovie","loadMap","loadShop","loadConfig","loadImageNext","catch","e","Sound","sounds","Infinity","control","play","pause","mouseEvents","figureEvents","keyEvents","listEvents","map","toLocaleLowerCase","EventStream","engine","$render","$engine","currentFramesList","bindEvents","$config","canvasX","canvasY","gameX","Math","floor","gameY","colletEvent","push","runEvent","element","cancelBubble","runEvents","bind","events","toLowerCase","passive","window","unbindEvents","calcChildren","calcAnything","calcNode","calcEvent","code","calc","EventEmitter","mixin","event","on","listener","emit","fn","off","indexOf","splice","registry","entries","$parent","createInstance","next","$instance","$createElement","$state","$event","$sound","onCreate","renderNode","destoryInstance","pre","onDestroy","updateInstance","patchNode","preNode","nextNode","nodeMap","Map","i","length","nextChildNode","set","get","Engine","$app","checkRunTime","error","alert","location","protocol","navigator","userAgentData","title","$eventStream","$root","gameStart","gameStop","cancelAnimationFrame","$requestAnimationId","requestAnimationFrame","gameKeyFrame"],"mappings":"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"}