{"version":3,"file":"bundle.js","sources":["../src/Engine/core/createNode.js","../src/Engine/core/Component.js","../src/Engine/const/baseStyle.js","../src/Engine/utils/common.js","../src/Engine/core/UI.js","../src/Engine/core/Audio.js","../src/Engine/core/patchNode.js","../src/Engine/Engine.js","../src/Game/Mota/FPS.jsx","../src/Game/Mota/Loading.jsx","../src/Game/Mota/Select.jsx","../src/Engine/utils/storage.js","../src/Game/sl.js","../src/Game/Mota/Title.jsx","../src/Game/Mota/Menu.jsx","../src/Game/Mota/Shop.jsx","../src/Game/Mota/Battle.jsx","../src/Game/Mota/Talks.jsx","../src/Engine/utils/string.js","../src/Game/Mota/Message.jsx","../src/Game/Mota/EnemyInfo.jsx","../src/Game/Mota/ShopList.jsx","../src/Game/physics.js","../src/Game/utils.js","../src/Game/Mota/Hero.jsx","../src/Game/Mota/Status.jsx","../src/Game/Mota/ScrollText.jsx","../src/Game/Mota/Map.jsx","../src/Game/http.js","../src/Game/loader.js","../src/Game/index.jsx","../src/index.js"],"sourcesContent":["export function createNode (tag, props, ...children) {\n  return {\n    tag,\n    props,\n    children,\n  }\n}\n","import { createNode } from './createNode'\nlet curFoucs = null\nexport { curFoucs }\nexport class Component {\n  constructor ({ props, children }) {\n    this.props = props\n    this.$children = children\n  }\n\n  $c (...argu) {\n    return createNode(...argu)\n  }\n}\n\nexport class KeyEventComponent extends Component {\n  constructor (...argu) {\n    super(...argu)\n    if (curFoucs) {\n      curFoucs.$isFocus = false\n      curFoucs.$nextFocus = this\n    }\n    this.$isFocus = true\n    this.$preFocus = curFoucs\n    console.warn(this)\n    curFoucs = this\n  }\n\n  destroy () {\n    console.log('in', this)\n    this.$isFocus = false\n    if (this.$preFocus) {\n      this.$preFocus.$isFocus = true\n    }\n    curFoucs = this.$preFocus\n  }\n}\n","const fontFamily = document.fonts.check('16px 黑体') ? '黑体' : '黑体-简'\n\nexport const baseStyle = {\n  direction: 'ltr',\n  color: 'white',\n  // filter: \"grayscale(.1)\",\n  filter: 'none',\n  fontSize: 32,\n  font: '32px ' + fontFamily,\n  globalAlpha: 1,\n  globalCompositeOperation: 'source-over',\n  // imageSmoothingEnabled: true,\n  // imageSmoothingQuality: 'low',\n  imageSmoothingEnabled: false,\n  lineCap: 'butt',\n  lineDashOffset: 0,\n  lineJoin: 'miter',\n  lineWidth: 1,\n  miterLimit: 10,\n  shadowBlur: 0,\n  shadowColor: 'rgba(0, 0, 0, 0)',\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  strokeStyle: 'white',\n  textAlign: 'start',\n  // textBaseline: \"alphabetic\",\n  textBaseline: 'top',\n}\n","export const isPrimitive = (value) => {\n  const type = typeof value\n  return type === 'string' || type === 'number'\n}\n\nexport const isFunc = (f) => typeof f === 'function'\n\nexport const isArray = (a) => Array.isArray(a)\n\nexport const isUndefined = (o) => o === undefined || o === null\n","import { baseStyle } from '../const/baseStyle'\nimport { isPrimitive, isFunc, isArray, isUndefined } from '../utils/common'\nimport { curFoucs } from './Component'\nconst getImage = (src) => window.$res.images[src]\n\nconst moveEvent = 'MouseMove'\nconst mouseEvents = ['ContextMenu', 'Click', 'Wheel', moveEvent]\n\nconst moveEventTarget = null\nconst mouseClickEventTarget = null\n//  \"MouseDown\", \"MouseUp\"\nconst keyEvents = ['KeyDown', 'KeyUp']\n\nexport default class UI {\n  constructor (screen = {}) {\n    const canvas = document.createElement('canvas')\n    this.canvas = canvas\n    this.context = canvas.getContext('2d')\n    const { el, width = 32 * (13 + 5), height = 32 * 13 } = screen\n    this.screen = screen\n    this.canvas.width = width\n    this.canvas.height = height\n    const dom = document.querySelector(el) || document.body\n    dom && dom.appendChild(this.canvas)\n    this.mergeStyle(baseStyle)\n\n    this.mouseEvents = []\n    this.keyEvents = []\n    this.bind()\n  }\n\n  bind () {\n    mouseEvents.forEach((name) => {\n      this.canvas.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.mouseEvents.push(e)\n        e.preventDefault()\n      }, { passive: false })\n    })\n\n    // const name = moveEvent\n    // this.canvas.addEventListener(name.toLowerCase(), (e) => {\n    //   e.name = 'on' + name\n    //   this.moveEvent = e\n    //   e.preventDefault()\n    // }, { passive: false })\n\n    keyEvents.forEach((name) => {\n      document.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.keyEvents = e\n      })\n    })\n  }\n\n  toDataURL () {\n    return this.canvas.toDataURL()\n  }\n\n  mergeStyle = style => {\n    if (style) {\n      const { fontSize, fontFamily, font, textAlign, textBaseline, color, globalAlpha } = style\n      if (globalAlpha) {\n        this.context.globalAlpha = globalAlpha\n      }\n      if (textAlign) {\n        this.context.textAlign = textAlign\n      }\n      if (textBaseline) {\n        this.context.textBaseline = textBaseline\n      }\n      if (color) {\n        this.context.fillStyle = color\n      }\n      if (font) {\n        this.context.font = font\n      }\n      if (fontSize) {\n        this.context.font = this.context.font.replace(/\\d+/, fontSize)\n      }\n      if (fontFamily) {\n        this.context.font = this.context.font.replace(/[\\u4e00-\\u9fa5]+/, fontFamily)\n      }\n    }\n  };\n\n  clearRect () {\n    const { context, canvas } = this\n    context.clearRect(0, 0, canvas.width, canvas.height)\n  }\n\n  drawText (node, offsetX, offsetY) {\n    const { style, text } = node\n    const { context } = this\n    const { x = 0, y = 0 } = style\n    context.fillText(text, offsetX + x, offsetY + y)\n  }\n\n  drawImage (node, offsetX, offsetY) {\n    const { props } = node\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { sx = 0, sy = 0, width = 32, height = 32, swidth, sheight } = style\n        const { context } = this\n        context.drawImage(getImage(props.src), sx, sy, swidth || width, sheight || height, offsetX, offsetY, width, height)\n      }\n    }\n  }\n\n  drawBack (node, offsetX, offsetY) {\n    const { context } = this\n    const { backgroundImage, backgroundColor, height, width } = node.props.style\n    if (backgroundColor) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = backgroundColor\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n    if (backgroundImage) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = context.createPattern(getImage(backgroundImage), 'repeat')\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  drawBorder (node, offsetX, offsetY) {\n    const { context } = this\n    const { borderWidth, borderColor, height, width } = node.props.style\n    if (borderWidth) {\n      context.save()\n      context.lineWidth = borderWidth\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      if (borderColor) {\n        context.strokeStyle = borderColor\n      }\n      context.stroke()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  translate (box) {\n    const { context } = this\n    const { style } = box\n    const { x = 0, y = 0 } = style\n    context.translate(x, y)\n  }\n\n  transform (box) {\n    const { context } = this\n    const { rotate, scale } = box\n    if (rotate) {\n      const { angle = 0, x = 0, y = 0 } = rotate\n      context.translate(x, y)\n      context.rotate(angle * Math.PI / 180)\n      context.translate(-x, -y)\n    }\n    if (scale) {\n      const { x = 0, y = 0, scaleX = 1, scaleY = 1 } = scale\n      context.translate(x, y)\n      context.scale(scaleX, scaleY)\n      context.translate(-x, -y)\n    }\n  }\n\n  drawCircle (node, offsetX, offsetY) {\n    const { context } = this\n    context.save()\n    context.beginPath()\n    const { cx, cy, r, sAngle, eAngle, counterclockwise = false, stroke, strokeWidth } = node.props\n    context.arc(cx + offsetX, cy + offsetY, r, sAngle / 180 * Math.PI, eAngle / 180 * Math.PI, counterclockwise)\n    context.strokeStyle = stroke\n    context.lineWidth = strokeWidth\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  drawLine (node) {\n    const { context } = this\n    const { x1 = 0, y1 = 0, x2 = 200, y2 = 200 } = node.props\n    context.beginPath()\n    context.moveTo(x1, y1)\n    context.lineTo(x2, y2)\n    context.stroke()\n  }\n\n  drawRect (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props, tag } = node\n    if (props) {\n      const { style } = props\n      this.mergeStyle(style)\n      if (style) {\n        this.drawBack(node, offsetX, offsetY)\n        this.drawBorder(node, offsetX, offsetY)\n      }\n    }\n    if (tag === 'img') {\n      this.drawImage(node, offsetX, offsetY)\n    } else if (tag === 'text') {\n      this.drawText(node, offsetX, offsetY)\n    } else if (tag === 'circle') {\n      this.drawCircle(node, offsetX, offsetY)\n    } else if (tag === 'line') {\n      this.drawLine(node, offsetX, offsetX)\n    }\n    this.renderRect(node.children, offsetX, offsetY, node)\n    context.restore()\n  }\n\n  renderPrimitive (text, offsetX, offsetY, parent) {\n    const { context } = this\n    const { textAlign, textBaseline } = context\n    const { width = 0, height = 0 } = parent?.props?.style || {}\n    const x = { start: 0, left: 0, center: 0.5, right: 1, end: 0 }\n    const y = { alphabetic: 0, hanging: 0, ideographic: 0, top: 0, middle: 0.5, bottom: 1 }\n    // start 默认。文本在指定的位置开始。\n    // end 文本在指定的位置结束。\n    // center 文本的中心被放置在指定的位置。\n    // left 文本在指定的位置开始。\n    // right 文本在指定的位置结束。\n\n    // alphabetic 默认。文本基线是普通的字母基线。\n    // top 文本基线是 em 方框的顶端。\n    // hanging 文本基线是悬挂基线。\n    // middle 文本基线是 em 方框的正中。\n    // ideographic 文本基线是表意基线。\n    // bottom 文本基线是 em 方框的底端。\n    context.fillText(text, offsetX + width * x[textAlign], offsetY + height * y[textBaseline])\n  }\n\n  renderRect (node, offsetX, offsetY, parent) {\n    if (!isUndefined(node)) {\n      if (isArray(node)) {\n        node.forEach(child => this.renderRect(child, offsetX, offsetY, parent))\n      } else if (isPrimitive(node)) {\n        this.renderPrimitive(node, offsetX, offsetY, parent)\n      } else if (isFunc(node.tag)) {\n        this.renderRect(node.node, offsetX, offsetY, parent)\n      } else {\n        this.renderNode(node, offsetX, offsetY, parent)\n      }\n    }\n  }\n\n  renderNode (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props } = node\n\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { x = 0, y = 0 } = style\n        offsetX += x\n        offsetY += y\n        this.mouseEvents.forEach((event) => {\n          const { name } = event\n          if (event.offsetX >= offsetX && event.offsetX < style.width + offsetX && event.offsetY >= offsetY && event.offsetY < style.height + offsetY) {\n            if (name === 'onMouseMove') {\n              this.onMouseMove = { node, event }\n            } else if (name === 'onClick') {\n              this.onMouseClick = { node, event }\n            }\n          }\n        })\n      }\n    }\n\n    this.drawRect(node, offsetX, offsetY, parent)\n\n    context.restore()\n  }\n\n  runEvent () {\n    if (curFoucs && this.keyEvents) {\n      const { name } = this.keyEvents\n      curFoucs[name] && curFoucs[name](this.keyEvents)\n    }\n    this.keyEvents = null\n    // if (this.moveEventTarget && this.moveEvent) {\n    //   if (moveEventTarget !== this.moveEventTarget) {\n    //     if (moveEventTarget) {\n    //       moveEventTarget.props.onMouseLeave && moveEventTarget.props.onMouseLeave()\n    //     }\n    //     moveEventTarget = this.moveEventTarget\n    //     moveEventTarget.props.onMouseEnter && moveEventTarget.props.onMouseEnter()\n    //   }\n    // }\n    if (this.onMouseClick) {\n      const { node, event } = this.onMouseClick\n      if (node?.props?.onClick) {\n        node.props.onClick(event)\n      }\n      this.onMouseClick = null\n    }\n    this.mouseEvents = []\n    this.moveEvent = null\n    this.moveEventTarget = null\n  }\n\n  render (root) {\n    this.clearRect()\n    this.renderRect(root, 0, 0, this.canvas)\n    this.runEvent()\n    self.$root = root\n  }\n}\n","export default class Audio {\n  current = null\n  constructor (audioes) {\n    this.audioes = audioes || window.$res.sounds\n  }\n\n  control (type, name, control) {\n    this.audioes = window.$res.sounds\n    this.current = this.audioes[`${type}/${name}`]\n    this.current.loop = type === 'bgm'\n    this.current[control]()\n  }\n\n  play (type, name) {\n    this.control(type, name, 'play')\n  }\n\n  pause (type, name) {\n    this.control(type, name, 'pause')\n  }\n}\n","import { isFunc, isPrimitive, isArray, isUndefined } from '../utils/common'\n\nfunction createInstance (next) {\n  const Class = next.tag\n  next.instance = new Class(next)\n  next.instance.create && next.instance.create()\n  renderNode(next)\n}\n\nfunction destoryInstance (pre) {\n  if (!isPrimitive(pre) && !isUndefined(pre)) {\n    if (isFunc(pre.tag)) {\n      destoryInstance(pre.node)\n      pre.instance.destroy && pre.instance.destroy()\n    } else if (Array.isArray(pre)) {\n      while (pre.length) {\n        destoryInstance(pre.pop())\n      }\n    } else {\n      destoryInstance(pre.children)\n    }\n  }\n}\n\nfunction updateInstance (pre, next) {\n  next.instance = pre.instance\n  if (!next.instance) {\n    debugger\n    return\n  }\n  next.node = pre.node\n  next.instance.props = next.props\n  renderNode(next)\n}\n\nfunction renderNode (next) {\n  const instance = next.instance\n  next.node = patchNode(next.node, instance.render())\n}\n\nexport function patchNode (pre, next) {\n  if (pre?.tag?.name === 'ShopList') {\n    if (pre?.tag?.name !== 'ShopList') { debugger }\n  }\n  if (isPrimitive(next) || isUndefined(next)) {\n    destoryInstance(pre)\n  } else if (isFunc(next.tag)) {\n    if (pre) {\n      if (pre.tag === next.tag && pre.props?.key === next.props?.key) {\n        updateInstance(pre, next)\n      } else {\n        destoryInstance(pre)\n        createInstance(next)\n      }\n    } else {\n      createInstance(next)\n    }\n  } else if (isArray(next.children)) {\n    if (!pre || !isArray(pre.children)) {\n      destoryInstance(pre)\n      for (let i = 0; i < next.children.length; i++) {\n        patchNode(null, next.children[i])\n      }\n    } else {\n      for (let i = 0; i < next.children.length; i++) {\n        patchNode(pre.children[i], next.children[i])\n      }\n    }\n  } else if (isArray(next)) {\n    if (isArray(pre)) {\n      for (let i = 0; i < next.length; i++) {\n        patchNode(pre[i], next[i])\n      }\n    } else {\n      destoryInstance(pre)\n    }\n  }\n\n  return next\n}\n","import UI from './core/UI'\nimport Audio from './core/Audio'\nimport { createNode } from './core/createNode'\nimport { patchNode } from './core/patchNode'\nexport default class Engine {\n  constructor (Game) {\n    if (this.check()) {\n      this.$resource = Object.create(null)\n      this.$state = Object.create(null)\n      this.Game = createNode(Game, null)\n      this.$foucs = null\n      this.$audio = new Audio()\n      window.$audio = this.$audio\n      this.ui = new UI()\n      this.gameStart()\n    }\n  }\n\n  check () {\n    if (location.protocol === 'file:') {\n      alert('不能直接运行index.html')\n    } else if (!navigator.userAgent.match(/Chrome\\/(\\d+)/) || RegExp.$1 < 88) {\n      alert('需要chrome最新浏览器')\n    } else {\n      return true\n    }\n  }\n\n  gameStop () {\n    cancelAnimationFrame(this.ident)\n    this.ident = -1\n  }\n\n  gameStart () {\n    const frame = () => {\n      this.keyFrame()\n      this.ident = requestAnimationFrame(frame)\n    }\n    frame()\n  }\n\n  keyFrame () {\n    this.root = patchNode(this.root, this.Game, this.ui)\n    this.ui.render(this.root)\n  }\n}\n","\nimport { Component } from 'Engine'\nexport default class FPS extends Component {\n  fps = 60\n  styles = {\n    fps: {\n      textAlign: 'left',\n      height: 32,\n      x: 0,\n    },\n  }\n\n  timeStamp = +new Date();\n  render () {\n    const timeStamp = +new Date()\n    const fps = (1000 / (timeStamp - this.timeStamp))\n    const min = 30\n    const warn = this.fps < min && fps < min\n    this.fps = fps\n    this.timeStamp = timeStamp\n    return (\n      <div style={this.styles.fps}>\n        {warn ? `${this.fps.toFixed()}fps` : null}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nexport default class Loading extends Component {\n  step = 1\n  angle = -this.step\n  render () {\n    this.angle += this.step\n    if (this.angle > 180) {\n      this.angle = 0\n    }\n    const sAngle = this.angle * 2 - 90\n    const eAngle = Math.sin(this.angle / 180 * Math.PI) * 45\n    const width = 32 * (13 + 5)\n    const height = 32 * 13\n    return <div style={{ x: 0, y: 0, width, height }}>\n      {this.props.msg}\n      <circle cx={width / 2} cy={height / 2} r={32 * 3} sAngle={sAngle - eAngle} eAngle={sAngle + eAngle} stroke=\"#4e6ef2\" strokeWidth={10} />\n    </div>\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Select extends KeyEventComponent {\n  styles = {\n    select: {\n      fontSize: 24,\n      textAlign: 'center',\n      width: 320,\n    },\n  }\n\n  create () {\n    this.activeIndex = this.props.activeIndex || 0\n    const { style } = this.props\n    if (style) {\n      Object.assign(this.styles.select, style)\n    }\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'ArrowDown') {\n      this.activeIndex++\n      if (this.activeIndex === this.props.options.length) {\n        this.activeIndex = 0\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'ArrowUp') {\n      this.activeIndex--\n      if (this.activeIndex === -1) {\n        this.activeIndex += this.props.options.length\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Space') {\n      this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Escape') {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  onClick (index) {\n    this.activeIndex = index\n    this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n  }\n\n  render () {\n    const size = 32\n    const borderWidth = 2\n    const select = this.styles.select\n    const { width } = select\n\n    return (\n      <div style={this.styles.select}>\n        {\n          this.props.options && this.props.options.length\n            ? this.props.options.map((item, index) => {\n              const { text } = item\n              const optionStyle = {\n                y: index * size,\n                height: size,\n                width: width,\n                borderWidth: this.activeIndex === index ? borderWidth : 0,\n                borderColor: '#ccc',\n              }\n              return (\n                <div style={optionStyle} onClick={() => this.onClick(index)} onMouseLeave={(e) => { this.activeIndex = -1 }} onMouseEnter={(e) => { this.activeIndex = index }}>\n                  {text}\n                </div>\n              )\n            })\n            : '空空如也'}\n      </div>\n    )\n  }\n}\n","export function setStorage (key, value) {\n  return localStorage.setItem(key, JSON.stringify(value))\n}\n\nexport function getStorage (key) {\n  try {\n    return JSON.parse(localStorage.getItem(key))\n  } catch (e) {\n    return null\n  }\n}\n","import { setStorage, getStorage } from 'Engine/utils/storage'\n\nexport function saveGame (saveData) {\n  return setStorage('game', saveData)\n}\n\nexport function loadGame () {\n  return getStorage('game')\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nimport { loadGame } from '../sl'\n\nexport default class Title extends Component {\n  styles = {\n    title: {\n      width: 32 * (13 + 5),\n      height: 32 * 13,\n    },\n    gameName: {\n      y: 40,\n      width: 32 * (13 + 5),\n      height: 128,\n      font: 'bold 128px 黑体',\n    },\n    select: {\n      x: 16 * 16,\n      y: 32 * 8,\n      width: 64,\n    },\n  }\n\n  create () {\n    this.activeIndex = loadGame() ? 1 : 0\n    this.options = [\n      {\n        text: '开始',\n      },\n      {\n        text: '继续',\n      },\n    ]\n  }\n\n  onConfirm = (isLoad) => {\n    this.props.onLoadMap(isLoad ? loadGame() : null)\n  }\n\n  render () {\n    return (\n      <div style={this.styles.title}>\n        <div style={this.styles.gameName}>魔塔</div>\n        <Select activeIndex={this.activeIndex} options={this.options} style={this.styles.select} onConfirm={this.onConfirm}></Select>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport { loadGame, saveGame } from '../sl'\nimport Select from './Select'\nconst options = [\n  { text: '物品' },\n  { text: '技能' },\n  { text: '装备' },\n  { text: '状态' },\n]\n\nconst itemOption = []\nconst statusOption = []\nconst loadGameOption = [{ text: 12233 }]\nconst saveGameOption = [{ text: 1 }, { text: 2 }, { text: 3 }, { text: 4 }]\n\nconst detailOption = [itemOption, statusOption, itemOption, itemOption, loadGameOption, saveGameOption]\nexport default class Menu extends Component {\n  activeIndex = -1\n  tick = 0\n  create () {\n    this.styles = {\n      menu: {\n        width: 32 * 18,\n        height: 32 * 13,\n        backgroundColor: 'rgba(0,0,0,.6)',\n      },\n      detail: {\n        x: 32 * 4,\n        width: 32 * 9,\n        height: 32 * 13,\n        borderWidth: 2,\n      },\n      select: {\n        width: 32 * 4,\n      },\n    }\n  }\n\n  onConfirm = (activeIndex) => {\n    this.activeIndex = activeIndex\n  }\n\n  render () {\n    return <div style={this.styles.menu}>\n      <Select options={options} style={this.styles.select} onConfirm={this.onConfirm} onClose={this.props.onClose} />\n\n      {\n        this.activeIndex === -1\n          ? null\n          : <Select options={detailOption[this.activeIndex]} style={this.styles.detail} onConfirm={this.onConfirm} onClose={() => { this.activeIndex = -1 }} />\n      }\n    </div>\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class Shop extends Component {\n  styles = {\n    shop: {\n      x: 2 * 32,\n      y: 2 * 32,\n      height: 32 * 7,\n      width: 32 * 9,\n\n      fontSize: 24,\n      borderWidth: 4,\n      borderColor: '#deb887',\n      textAlign: 'center',\n      backgroundImage: 'ground.png',\n    },\n    title: {\n      x: 16 * 9,\n      y: 16,\n    },\n    text: {\n      x: 0,\n      y: 48,\n      fontSize: 14,\n    },\n    select: {\n      x: 32 * 2,\n      y: 112,\n      width: 32 * 5,\n      fontSize: 16,\n    },\n  }\n\n  create () {\n    this.shop = window.$res.shop[this.props.shopid]\n  }\n\n  onConfirm = (index) => {\n    const { need, effect } = this.shop.choices[index]\n    this.props.onShopEvent(need, effect)\n  }\n\n  render () {\n    return (\n      <div style={this.styles.shop}>\n        <div style={this.styles.title}>{this.shop.title}</div>\n        <div style={this.styles.text}>\n          {this.shop.text.split(/\\n/).map((text, index) => <div style={{ x: 16 * 9, y: index * 16 }}>{text}</div>)}\n        </div>\n        <Select options={this.shop.choices} onConfirm={this.onConfirm} style={this.styles.select} onClose={this.props.onClose}></Select>\n      </div>\n    )\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Battle extends KeyEventComponent {\n  tick = 0\n  styles = {\n    battle: {\n      x: 48,\n      y: 48,\n      width: 32 * 15,\n      height: 32 * 10,\n      fontSize: 16,\n      borderWidth: 3,\n      borderColor: '#deb887',\n      font: '32px sans-serif',\n      swidth: 640,\n      sheight: 320,\n    },\n    enemy: {\n      x: 32 * 1,\n      y: 32 * 1,\n    },\n    hero: {\n      x: 32 * 10,\n      y: 32 * 1,\n    },\n  }\n\n  create () {\n    this.enemy = JSON.parse(JSON.stringify(this.props.enemy))\n    this.hero = this.props.hero\n  }\n\n  onKeyDown () {\n    if (this.battleMsg) {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemy = this.enemy\n    const hero = this.hero\n    const tick = location.hostname === 'localhost' ? 1 : 5\n    if (enemy.hp > 0) {\n      this.tick++\n      if (this.tick === tick) {\n        window.$audio.play('se', 'attack.mp3')\n\n        if (this.turn) {\n          const atk = enemy.atk - hero.def\n          if (atk > 0) {\n            hero.hp -= atk\n          }\n        } else {\n          const atk = hero.atk - enemy.def\n          if (atk > 0) {\n            enemy.hp -= atk\n          }\n          if (enemy.hp <= 0) {\n            enemy.hp = 0\n            const { exp, money } = enemy\n            hero.exp += exp\n            this.props.saveData.money += money\n            this.battleMsg = `战斗胜利，获得${money}金币，${exp}经验`\n          }\n        }\n        this.turn = !this.turn\n        this.tick = 0\n      }\n    }\n\n    const proprety = [{ text: '名称', key: 'name' }, { text: '生命', key: 'hp' }, { text: '攻击', key: 'atk' }, { text: '防御', key: 'def' }]\n    const heroImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: 0 }\n    const enemyImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: enemy.sy * 32 }\n    const size = 64\n    const vsStyle = { font: `bold ${size}px sans-serif`, x: 32 * (5 + 1.5), y: 32 * 2, height: size, width: size }\n    const msgStyle = { fontSize: 24, height: 32, y: 32 * 8, width: 32 * 15 }\n    return <img src=\"Battlebacks/mota.jpg\" style={this.styles.battle}>\n      {this.battleMsg && <div style={msgStyle}>{this.battleMsg}</div>}\n      <div style={this.styles.enemy}>\n        <img src=\"enemys.png\" style={enemyImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{item.text}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{enemy[item.key]}</div>\n          </div>\n        })}\n      </div>\n      <div style={vsStyle}>VS</div>\n      <div style={this.styles.hero}>\n        <img src=\"Characters/hero.png\" style={heroImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{hero[item.key]}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{item.text}</div>\n          </div>\n        })}\n      </div>\n    </img>\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Talk extends KeyEventComponent {\n  index = 0\n  width = 7\n  styles = {\n    talk: {\n      width: 32 * this.width,\n      height: 32 * 1,\n      backgroundColor: 'black',\n      borderWidth: 2,\n      borderColor: 'white',\n      fontSize: 16,\n      textAlign: 'left',\n      textBaseline: 'middle',\n    },\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      this.index++\n      if (this.index === this.props.talk.length) {\n        this.props.onConfirm()\n      } else {\n        this.next()\n      }\n    }\n    window.$audio.play('se', 'dialogue.mp3')\n  }\n\n  next () {\n    const talks = this.props.talk[this.index].split(/\\n/)\n    this.current = []\n    talks.forEach((talk) => {\n      for (let i = 0; i < talk.length; i = i + 7 * 2) {\n        this.current.push(talk.substr(i, 7 * 2))\n      }\n    })\n\n    const leftStyle = {\n      x: 32 * 2,\n      y: 32 * 2,\n      height: 32 * this.current.length,\n    }\n    const rightStyle = {\n      x: 32 * 4,\n      y: 32 * 6,\n      height: 32 * this.current.length,\n    }\n    this.turn = !this.turn\n    Object.assign(this.styles.talk, this.turn ? leftStyle : rightStyle)\n  }\n\n  create () {\n    this.next()\n  }\n\n  render () {\n    return <div style={this.styles.talk}>\n      {this.current.map((talk, index) => {\n        return <div style={{ x: 0, y: 32 * index, width: 32 * this.width, height: 32 }}>{talk}</div>\n      })}\n    </div>\n  }\n}\n","export function calcLength (str) {\n  let len = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      len += 2\n    } else {\n      len += 1\n    }\n  }\n  return len\n}\n\nexport function splitStringByWidth (str, w) {\n  let len = 0\n  let start = 0\n  const re = []\n  let i = 0\n  for (; i < str.length; i++) {\n    let c = 0\n    if (str.charCodeAt(i) > 127) {\n      c = 2\n    } else {\n      c = 1\n    }\n    len += c\n    if (len > w) {\n      re.push(str.substring(start, i))\n      start = i\n      len = c\n    }\n  }\n  re.push(str.substring(start, i))\n  return re\n}\n","import { Component } from 'Engine'\nimport { calcLength } from '../../Engine/utils/string'\n\nexport default class Message extends Component {\n  create () {\n    if (this.props) {\n      this.tick = this.props.tick || 120\n    }\n    this.length = calcLength(this.props.msg)\n    this.msg = this.props.msg\n  }\n\n  render () {\n    this.tick--\n    if (this.tick === 0) {\n      this.props.onMessageClose()\n      return null\n    }\n    let globalAlpha = 1\n    if (this.tick < 30) {\n      globalAlpha = this.tick / 30\n    }\n    const fontSize = 18\n    const style = { textAlign: 'left', fontSize, backgroundColor: 'rgba(0,0,0,.7)', globalAlpha, x: 0, y: 0, height: 32, width: fontSize / 2 * this.length + 10 }\n    return <div style={style}>\n      <div style={{ x: 5, height: 32 }}>{this.msg}</div>\n    </div>\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Hero extends KeyEventComponent {\n  onKeyDown ({ code }) {\n    if (code === 'KeyX') {\n      this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemys = Object.keys(this.props.enemys)\n    return (\n      <div\n        style={{\n          textAlign: 'left',\n          fontSize: 16,\n          backgroundColor: 'rgba(0,0,0,.8)',\n          width: 32 * 18,\n          height: 32 * 13,\n        }}\n      >\n        <div style={{ x: 32, y: 32 }}>\n          <div style={{ x: 32 * 1, height: 32 }}>名字</div>\n          <div style={{ x: 32 * 4, height: 32 }}>生命</div>\n          <div style={{ x: 32 * 6, height: 32 }}>攻击</div>\n          <div style={{ x: 32 * 8, height: 32 }}>防御</div>\n          <div style={{ x: 32 * 10, height: 32 }}>损失</div>\n          {enemys.map((enemyId, index) => {\n            const style = {\n              x: 0,\n              y: index * 32 + 32,\n              height: 32,\n            }\n            const enemy = window.$res.enemys[enemyId]\n            const hero = this.props.saveData.hero\n            let cost = 0\n            if (hero.atk > enemy.def) {\n              if (\n                hero.def >= enemy.atk ||\n                enemy.hp / (hero.atk - enemy.def) <=\n                  hero.hp / (enemy.atk - hero.def)\n              ) {\n                if (hero.def >= enemy.atk) {\n                  cost = 0\n                } else {\n                  const atkCount = Math.floor(\n                    enemy.hp / (hero.atk - enemy.def),\n                  )\n                  cost = (enemy.atk - hero.def) * atkCount\n                }\n              } else {\n                cost = '-'\n              }\n            } else {\n              cost = '-'\n            }\n            return (\n              <div style={style}>\n                <img src=\"enemys.png\" alt=\"\" style={{ height: 32, width: 32, sy: enemy.sy * 32 }}/>\n                <div style={{ x: 32 * 1, height: 32 }}>{enemy.name}</div>\n                <div style={{ x: 32 * 4, height: 32 }}>{enemy.hp}</div>\n                <div style={{ x: 32 * 6, height: 32 }}>{enemy.atk}</div>\n                <div style={{ x: 32 * 8, height: 32 }}>{enemy.def}</div>\n                <div style={{ x: 32 * 10, height: 32 }}>{cost}</div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class ShopList extends Component {\n  style = {\n    x: 32 * 3,\n    y: 32 * 2,\n    height: 32 * 8,\n    width: 32 * 7,\n    backgroundImage: 'ground.png',\n    borderWidth: 4,\n    borderColor: '#deb887',\n  }\n\n  create () {\n    const shops = this.props.saveData.shops || []\n    this.options = Object.entries(shops).map(([shopid, text]) => {\n      return { text, shopid }\n    })\n  }\n\n  onConfirm = (index) => {\n    const { shopid } = this.options[index]\n    this.props.onConfirm(shopid)\n  }\n\n  destroy () {\n    debugger\n  }\n\n  render () {\n    return (\n      <div style={this.style}>\n        <div style={{ height: 32, width: 32 * 7, fontSize: 24 }}>商店选择</div>\n        <Select style={{ x: 32, y: 48, width: 160 }} options={this.options} onConfirm={this.onConfirm} onClose={this.props.onClose}/>\n      </div>\n\n    )\n  }\n}\n","export function isCoincided (A, B) {\n  if (\n    A.x >= B.x + B.width ||\n    A.x + A.width <= B.x ||\n    A.y >= B.y + B.height ||\n    A.y + A.height <= B.y\n  ) {\n    return false\n  }\n  return true\n}\n\nexport function updateVector (vector, obj) {\n  vector = Object.assign(Object.create(null), vector)\n  Object.entries(obj).forEach(([key, value]) => {\n    vector[key] += value\n  })\n  return vector\n}\n\nexport function assignVector (vector, obj) {\n  return Object.assign(vector, obj)\n}\n","export function convertPropertyStr (str) {\n  const arr = str.split('.')\n  if (arr.length === 1) {\n    arr.unshift('')\n  }\n  const [key, propertyStr] = arr\n  const properties = propertyStr.split(';').map(v => v.split(':'))\n  return [key, properties]\n}\n\nexport const formatText = (data) => {\n  const o = []\n  data = data.split(/\\r?\\n/)\n  const keys = data.shift().split(',')\n  data.forEach((row, index) => {\n    if (!row.trim()) {\n      return\n    }\n    const properties = row.split(',')\n    const [id] = properties\n    const item = { sy: index }\n    keys.forEach((key, index) => {\n      const value = properties[index]\n      if (!value) {\n        return\n      }\n      if (key === 'property') {\n        item[key] = convertPropertyStr(value)\n      } else if (['id', 'name', 'type'].includes(key)) {\n        item[key] = value\n      } else {\n        if (isNaN(value)) {\n          debugger\n        }\n        item[key] = Number(value)\n      }\n    })\n    o[id] = item\n    o.push(item)\n    return data\n  })\n  return o\n}\n","import { KeyEventComponent } from 'Engine'\n\nimport Menu from './Menu'\nimport Shop from './Shop'\nimport Battle from './Battle'\nimport Talks from './Talks'\nimport Message from './Message'\nimport EnemyInfo from './EnemyInfo'\nimport ShopList from './ShopList'\n\nimport { saveGame, loadGame } from '../sl'\nimport { isCoincided, updateVector, assignVector } from '../physics'\nimport { convertPropertyStr } from '../utils'\n\nconst propertyNames = {\n  lv: '等级',\n  money: '金币',\n  hp: '生命',\n  atk: '攻击',\n  def: '防御',\n  exp: '经验',\n}\nexport default class Hero extends KeyEventComponent {\n  tick = 0;\n  create () {\n    const hero = Object.assign(this.props.saveData.position, {\n      width: 32,\n      height: 32,\n    })\n\n    this.styles = { hero }\n  }\n\n  isCoincidedTerrains (heroStyle) {\n    return this.props.mapTerrains.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  isCoincidedEvents (heroStyle) {\n    return this.props.mapEvents.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  onKeyDown (e) {\n    const { code } = e\n    const styleHero = this.styles.hero\n    const step = 32\n    let moveVector = null\n    if (code === 'ArrowDown') {\n      moveVector = { y: step }\n      styleHero.sy = 0\n    } else if (code === 'ArrowUp') {\n      moveVector = { y: -step }\n      styleHero.sy = 96\n    } else if (code === 'ArrowLeft') {\n      moveVector = { x: -step }\n      styleHero.sy = 32\n    } else if (code === 'ArrowRight') {\n      moveVector = { x: step }\n      styleHero.sy = 64\n    } else if (code === 'KeyS') {\n      saveGame(this.props.saveData)\n      this.msg = '存储成功'\n    } else if (code === 'KeyL') {\n      this.props.onLoadMap(loadGame())\n    } else if (code === 'KeyX') {\n      this.showEnemyInfo = !this.showEnemyInfo\n    } else if (code === 'KeyB') {\n      this.buying = true\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    }\n    if (moveVector) {\n      const vector = updateVector(styleHero, moveVector)\n\n      const terrain = this.isCoincidedTerrains(vector)\n      if (terrain !== -1) {\n        return\n      }\n\n      const eventIndex = this.isCoincidedEvents(vector)\n      if (eventIndex !== -1) {\n        if (this.handleEvents(this.props.map.mapEvents[eventIndex])) {\n          assignVector(styleHero, vector)\n        }\n        return\n      }\n\n      assignVector(styleHero, vector)\n    }\n  }\n\n  onShopClose = () => {\n    this.shopid = null\n    this.setEvent()\n  };\n\n  handleEvents (mapEvent) {\n    if (this.mapEvent) {\n      debugger\n      return\n    }\n\n    if (mapEvent[3]) {\n      this.mapEvent = mapEvent\n      this.eventIndex = 0\n      this.setEvent()\n    } else {\n      const info = window.$res.mapping[mapEvent[2]]\n      const { name, type } = info\n      if (type === 'items') {\n        const item = window.$res.items[name]\n        const { type } = item\n        if (type === '1' || type === '3') {\n          this.remove(mapEvent)\n          this.updateSaveData('items', name)\n          this.msg = `获得${item.name}`\n          window.$audio.play('se', type === '1' ? 'item.mp3' : 'constants.mp3')\n        } else if (type === '2') {\n          this.remove(mapEvent)\n          this.updateSaveData(...item.property)\n          const [name, property] = item.property\n          this.msg = `获得${item.name}`\n          property.forEach((property) => {\n            const [key, value] = property\n            let propertyName = key\n            if (name === 'hero') {\n              propertyName = propertyNames[key]\n            } else if (name === 'items') {\n              propertyName = window.$res.items[key].name\n            } else if (key === 'money') {\n              propertyName = '金币'\n            }\n            this.msg += ` ${propertyName}${value > 0 ? '+' : '-'}${value}`\n          })\n          window.$audio.play('se', 'item.mp3')\n        }\n        return true\n      } else if (type === 'enemys') {\n        mapEvent[3] = [\n          {\n            type: 'enemy',\n            data: name,\n          },\n        ]\n        this.handleEvents(mapEvent)\n        return false\n      } else if (type === 'terrains') {\n        if (\n          [\n            'yellowDoor',\n            'redDoor',\n            'blueDoor',\n            'steelDoor',\n            'specialDoor',\n          ].includes(name)\n        ) {\n          const key = name.slice(0, -4) + 'Key'\n          if (this.props.saveData.items[key]) {\n            this.props.saveData.items[key]--\n            this.remove(mapEvent)\n            window.$audio.play('se', 'door.mp3')\n            return true\n          }\n        }\n      }\n    }\n  }\n\n  setEvent = () => {\n    if (this.eventIndex < this.mapEvent[3].length) {\n      const event = this.mapEvent[3][this.eventIndex++]\n      const { type, data } = event\n      if (type === 'talk') {\n        this.talk = data\n        return\n      } else if (type === 'mapLoad') {\n        this.props.onLoadMap(data)\n      } else if (type === 'openShop') {\n        this.shopid = event.id\n        this.props.saveData.shops = this.props.saveData.shops || {}\n        this.props.saveData.shops[this.shopid] =\n          window.$res.shop[this.shopid].title\n        return\n      } else if (type === 'getItems') {\n        this.updateSaveData('items', data)\n      } else if (type === 'removeSelf') {\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'moveBlock') {\n        console.log(this.mapEvent)\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'enemy') {\n        const enemy = window.$res.enemys[data]\n        const hero = this.props.saveData.hero\n        if (hero.atk > enemy.def) {\n          if (\n            hero.def >= enemy.atk ||\n            enemy.hp / (hero.atk - enemy.def) <=\n              hero.hp / (enemy.atk - hero.def)\n          ) {\n            this.enemy = enemy\n            return\n          } else {\n            this.mapEvent = null\n            this.eventIndex = 0\n            this.msg = `你打不过${enemy.name}`\n            return\n          }\n        } else {\n          this.mapEvent = null\n          this.eventIndex = 0\n          this.msg = `你的攻击比${enemy.name}的防御低`\n          return\n        }\n      } else if (type === 'updateSaveData') {\n        this.updateSaveData(...convertPropertyStr(data))\n      } else if (type === 'removeBlock') {\n        this.props.removeMapEvent(data)\n      } else if (type === 'title') {\n        this.props.onTitle()\n      } else if (type === 'removeMapBlock') {\n        const { mapId, position } = data\n        const { x, y } = position\n        this.props.saveData.destroy[[mapId, x, y]] = true\n      } else if (type === 'if') {\n        const { condition, true: trueEvent, false: falseEvent } = event\n        this.mapEvent = null\n        this.eventIndex = 0\n        if (this.checkSaveData(...convertPropertyStr(condition))) {\n          this.mapEvent = [0, 0, 0, trueEvent]\n        } else {\n          this.mapEvent = [0, 0, 0, falseEvent]\n        }\n      } else {\n        console.error(event)\n      }\n      this.setEvent()\n    } else {\n      this.mapEvent = null\n    }\n  };\n\n  remove (mapEvent) {\n    this.props.removeMapEvent(mapEvent)\n    this.mapEvent = null\n  }\n\n  onBattleClose = () => {\n    this.enemy = null\n    this.props.removeMapEvent(this.mapEvent)\n    this.setEvent()\n  };\n\n  onConfirm = () => {\n    this.talk = null\n    this.setEvent()\n  };\n\n  onMenuClose = () => {\n    this.showMenu = null\n  };\n\n  onMessageClose = () => {\n    this.msg = null\n  };\n\n  updateSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      gets.forEach(([id, value]) => this.updateSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      saveData[gets] += Number(n)\n    } else if (typeof gets === 'object') {\n      this.updateSaveData(context, Object.entries(gets))\n    } else {\n      console.error(gets, n)\n    }\n  }\n\n  checkSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      return gets.some(([id, value]) => this.checkSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      return saveData[gets] + Number(n) >= 0\n    } else if (typeof gets === 'object') {\n      return this.checkSaveData(context, Object.entries(gets), null, 0)\n    } else {\n      return false\n    }\n  }\n\n  onShopEvent = (need, effect) => {\n    if (this.checkSaveData(...convertPropertyStr(need))) {\n      this.updateSaveData(...convertPropertyStr(need))\n      this.updateSaveData(...convertPropertyStr(effect))\n    }\n  };\n\n  onShopListClose = () => {\n    this.buying = false\n  };\n\n  onShopListConfirm = (shopid) => {\n    this.buying = false\n    this.shopid = shopid\n    this.mapEvent = [0, 0, 0, []]\n  };\n\n  render () {\n    return (\n      <div>\n        <img style={this.styles.hero} src=\"Characters/hero.png\"></img>\n        {this.buying && (\n          <ShopList\n            saveData={this.props.saveData}\n            onClose={this.onShopListClose}\n            onConfirm={this.onShopListConfirm}\n          />\n        )}\n        {this.shopid && (\n          <Shop\n            shopid={this.shopid}\n            saveData={this.props.saveData}\n            onClose={this.onShopClose}\n            onShopEvent={this.onShopEvent}\n          />\n        )}\n        {this.enemy && (\n          <Battle\n            enemy={this.enemy}\n            enemyId={this.enemyId}\n            hero={this.props.saveData.hero}\n            saveData={this.props.saveData}\n            onClose={this.onBattleClose}\n          />\n        )}\n        {this.showMenu && (\n          <Menu saveData={this.props.saveData} onClose={this.onMenuClose} />\n        )}\n        {this.talk && (\n          <Talks talk={this.talk} key={this.talk} onConfirm={this.onConfirm} />\n        )}\n        {this.msg && (\n          <Message\n            msg={this.msg}\n            key={this.msg}\n            onMessageClose={this.onMessageClose}\n          />\n        )}\n        {this.showEnemyInfo && (\n          <EnemyInfo\n            enemys={this.props.enemys}\n            saveData={this.props.saveData}\n            onClose={() => (this.showEnemyInfo = false)}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","\nimport { Component } from 'Engine'\n\nexport default class Status extends Component {\n  create () {\n    this.walls = []\n    for (let x = 0; x < 5; x++) {\n      for (let y = 0; y < 13; y++) {\n        if (x === 4 || y === 0 || y === 12) {\n          this.walls.push(<img src=\"terrains.png\" style={{ sx: 0, sy: 32 * 2, x: x * 32, y: y * 32, width: 32, height: 32 }}></img>)\n        }\n      }\n    }\n  }\n\n  render () {\n    const { saveData, map } = this.props\n    const rowProperty = [\n      window.$res.game.title,\n      map.name,\n      saveData.hero.lv,\n      saveData.hero.hp,\n      saveData.hero.atk,\n      saveData.hero.def,\n      saveData.hero.exp,\n      saveData.money,\n      saveData.items.yellowKey,\n      saveData.items.blueKey,\n      saveData.items.redKey,\n    ]\n    const size = 32\n    const offset = (32 - size) / 2\n    return (\n      <div style={{ fontSize: 24 }}>\n        {this.walls}\n        {rowProperty.map((value, index) => {\n          return <div style={{ y: (index + 1) * 32, wdith: 32, height: 32 }}>\n            <img src=\"icons.png\" style={{ x: offset, y: offset, sx: 0, sy: index * 32, wdith: size, height: size, swidth: 32, sheight: 32 }} />\n            <div style={{ x: 32, height: 32, width: 32 * 3 }}>{value}</div>\n          </div>\n        })}\n      </div>\n    )\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class ScrollText extends KeyEventComponent {\n  styles = {\n    text: {\n      fontSize: 20,\n      textAlign: 'left',\n      textBaseline: 'top',\n      x: 32,\n      y: 32 * 5,\n      width: 32 * 18,\n      height: 32 * 13,\n    },\n  };\n\n  create () {\n    const { text, bgm } = this.props.map\n    this.text = text.split('\\n')\n    window.$audio.play('bgm', bgm)\n  }\n\n  destroy () {\n    const bgm = this.props.map.bgm\n    window.$audio.pause('bgm', bgm)\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      if (this.ready) {\n        const { type, data } = this.props.map.event\n        if (type === 'mapLoad') {\n          this.props.onClose(data)\n        } else if (type === 'title') {\n          this.props.onTitle(data)\n        }\n      }\n    }\n  }\n\n  render () {\n    const size = 32\n    const style = this.styles.text\n    if (style.y > -32 * (this.text.length - 2)) {\n      const y = 1\n      style.y -= y\n    } else {\n      this.ready = true\n    }\n    return (\n      <div style={this.styles.text} onClick={this.onKeyDown}>\n        {this.text.map((text, index) => {\n          const optionStyle = {\n            y: index * size,\n          }\n          return <div style={optionStyle}>{text}</div>\n        })}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Hero from './Hero'\nimport Status from './Status'\nimport ScrollText from './ScrollText'\nexport default class Map extends Component {\n  tick = 0\n  interval = 10\n  styles = {\n    map: {\n      height: 32 * 13,\n      width: 32 * (13 + 5),\n      backgroundImage: 'ground.png',\n    },\n  }\n\n  create () {\n    const bgm = this.props.map.bgm\n    window.$audio.play('bgm', bgm)\n  }\n\n  destroy () {\n    const bgm = this.props.map.bgm\n    window.$audio.pause('bgm', bgm)\n  }\n\n  renderMapTerrains (status) {\n    const { mapTerrains } = this.props.map\n    const tick = this.tick\n    const terrains = []\n    if (!mapTerrains) {\n      return\n    }\n    mapTerrains.forEach((line, y) => {\n      line.forEach((value, x) => {\n        if (value) {\n          const info = window.$res.mapping[value]\n          const { type, name } = info\n          const detail = window.$res[type][name]\n          let sx = 0\n          if (info.type === 'animates') {\n            sx = tick % 4 * 32\n          }\n          const style = { sy: detail.sy * 32, sx, x: x * 32, y: y * 32, height: 32, width: 32 }\n          terrains.push(<img src={type + '.png'} style={style}/>)\n        } else {\n          return null\n        }\n      })\n    })\n    return terrains\n  }\n\n  renderMapEvents () {\n    const { mapId, destroy = {} } = this.props.saveData\n    const { mapEvents } = this.props.map\n    const tick = this.tick\n    const enemys = {}\n    this.enemys = enemys\n    if (mapEvents) {\n      return mapEvents.map((event) => {\n        const [x, y, value, events] = event\n        if (value) {\n          const info = window.$res.mapping[value]\n          if (info) {\n            const { type, name } = info\n            const detail = window.$res[type][name]\n            let sx = 0\n            if (type === 'npcs' || type === 'enemys') {\n              sx = tick % 2 * 32\n            }\n            // terrians items icons npcs enemys\n            if (destroy[[mapId, x, y]]) {\n              return null\n            }\n            if (type === 'enemys') {\n              enemys[name] = name\n            }\n            return <div style={{ x: x * 32, y: y * 32, height: 32, width: 32 }}>\n              <img src={type + '.png'} style={{ sy: detail.sy * 32, sx, height: 32, width: 32 }} />\n            </div>\n          } else {\n            debugger\n          }\n        }\n        return null\n      })\n    }\n  }\n\n  onRemoveMapEvent = (mapEvent) => {\n    const [x, y] = mapEvent\n    const mapId = this.props.saveData.mapId\n    this.props.saveData.destroy = this.props.saveData.destroy || {}\n    this.props.saveData.destroy[[mapId, x, y]] = 1\n  }\n\n  onTitle = () => {\n    this.props.onTitle()\n  }\n\n  render () {\n    this.interval--\n    if (this.interval === 0) {\n      this.tick++\n      this.interval = 10\n    }\n    const mapTerrains = this.renderMapTerrains()\n    const mapEvents = this.renderMapEvents()\n    return (\n      <div style={this.styles.map}>\n        <div style={{ x: 32 * 13, y: 0 }}>\n          <Status saveData={this.props.saveData} map={this.props.map}/>\n        </div>\n        {mapTerrains}\n        {mapEvents}\n        <Hero\n          mapTerrains={mapTerrains}\n          mapEvents={mapEvents}\n          saveData={this.props.saveData}\n          enemys={this.enemys}\n          map={this.props.map}\n          onLoadMap={this.props.onLoadMap}\n          removeMapEvent={this.onRemoveMapEvent}\n          onTitle={this.onTitle}\n        />\n      </div>\n    )\n  }\n}\n","import { formatText } from './utils'\n\nexport const loadImage = src => {\n  return new Promise(function (resolve, reject) {\n    const img = new Image()\n    img.addEventListener('load', () => resolve(img))\n    img.addEventListener('error', () => reject(img))\n    img.src = src\n  })\n}\n\nexport const loadSound = src => {\n  return new Promise(function (resolve, reject) {\n    const audio = new Audio()\n    audio.addEventListener('canplay', () => resolve(audio))\n    audio.addEventListener('error', () => reject(audio))\n    audio.src = src\n  })\n}\n\nexport function loadJSON (url) {\n  return fetch(url).then(data => data.json())\n}\n\nexport function loadText (url) {\n  return fetch(url).then(data => data.text()).then(data => formatText(data))\n}\n\nexport function checkFont (name, size = 16) {\n  return document.fonts.check(`${size}px ${name}`)\n}\n\nexport function loadFont ({ name, url }) {\n  if (checkFont(name)) {\n    return Promise.resolve()\n  }\n  const fontface = new FontFace(name, `url(\"${url}\")`)\n  document.fonts.add(fontface)\n  fontface.load()\n  return fontface.loaded\n}\n","import { loadImage, loadSound, loadJSON, loadFont, loadText } from './http'\n\nconst $res = {\n  images: {},\n  sounds: {},\n}\n\nwindow.$res = $res\n\nconst loaderMap = [\n  'game.json',\n  'save.json',\n  'shop.json',\n  'mapping.dat',\n]\n\nconst sprite = [\n  'enemys',\n  'items',\n  'animates',\n  'icons',\n  'npcs',\n  'terrains',\n  'boss',\n]\n\nconst arr3 = [].concat(loaderMap.map(v => `Data/${v}`), sprite.map(v => `Sprite/${v}.dat`))\n\nexport const loaderData = () => Promise.all(arr3.map(url => url.endsWith('.dat') ? loadText(`${url}`) : loadJSON(`${url}`)))\n  .then(([game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss]) => {\n    Object.assign($res, { game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss })\n  })\n\nconst loadImages = () => {\n  const o = sprite.map(v => `Sprite/${v}.png`)\n  const o2 = ['Characters/hero.png', 'ground.png', 'Battlebacks/mota.jpg'].map(v => `Graph/${v}`)\n\n  return Promise.all([...o, ...o2].map(src => {\n    return new Promise((resolve) => {\n      loadImage(`${src}`).then((img) => {\n        src = src.replace('Graph/', '')\n        if (src.includes('Sprite')) {\n          src = src.split('/')[1]\n        }\n        $res.images[src] = img\n        resolve()\n      })\n    })\n  }))\n}\n\nexport const loaderImage = () => Promise.all([loadImages()])\nconst sounds = [\n  'bgm/terror.mp3',\n  'bgm/prologue.mp3',\n  'bgm/area1.mp3',\n  'bgm/area2.mp3',\n  'bgm/area3.mp3',\n  'enemy/redWizard.mp3',\n  'enemy/brownWizard.mp3',\n  'enemy/whiteKing.mp3',\n  'enemy/blackMagician.mp3',\n  'se/attack.mp3',\n  'se/floor.mp3',\n  'se/door.mp3',\n  'se/buy.mp3',\n  'se/item.mp3',\n  'se/dialogue.mp3',\n  'se/unlockCtrl.mp3',\n  'se/step.mp3',\n  'se/constants.mp3',\n  'se/sell.mp3',\n  'se/load.mp3',\n]\n\nexport const loaderMusic = () => Promise.all([\n  loadSounds(sounds),\n  // loadSounds(sounds.sounds),\n])\n\nexport const loaderFont = (font) => {\n  return loadFont(font)\n}\n\nconst loadSounds = data => {\n  return Promise.all(data.map(sound => loadSound(`Audio/${sound}`))).then(audioes => {\n    audioes.forEach((audio, i) => ($res.sounds[data[i]] = audio))\n  })\n}\n\nexport const loadMap = mapId => {\n  return loadJSON(`Maps/${mapId}.json`)\n}\n","import { Component } from 'Engine'\nimport FPS from './Mota/FPS'\nimport Loading from './Mota/Loading'\nimport Title from './Mota/Title'\nimport Map from './Mota/Map'\nimport ScrollText from './Mota/ScrollText'\nimport { loaderData, loaderMusic, loaderImage, loadMap, loaderFont } from './loader'\n\nexport default class Game extends Component {\n  styles = {\n    app: {\n      height: 32 * 13,\n      width: 32 * 18,\n      textAlign: 'center',\n      textBaseline: 'middle',\n    },\n  };\n\n  async loadFont () {\n    this.loading = '加载字体'\n    const font = window.$res.game.font\n    await loaderFont(font)\n    this.styles.app.fontFamily = font.name\n  }\n\n  async create () {\n    this.loading = '加载数据'\n    await loaderData()\n    this.loading = '加载图片'\n    await loaderImage()\n    this.loading = '加载音乐'\n    await loaderMusic()\n    this.loading = false\n\n    this.saveData = window.$res.save\n  }\n\n  onLoadMap = async (data) => {\n    this.loading = '加载地图'\n    Object.assign(this.saveData, data)\n    this.map = await loadMap(this.saveData.mapId)\n    this.loading = false\n    this.randMapKey = `${this.saveData.mapId} ${new Date()}`\n    window.$audio.play('se', 'floor.mp3')\n  };\n\n  onTitle = () => {\n    this.map = null\n  }\n\n  render () {\n    return <div style={this.styles.app}>\n        {\n          this.loading\n            ? <Loading msg={this.loading} />\n            : this.map\n              ? this.map.text\n                ? <ScrollText map={this.map} onClose={this.onLoadMap} onTitle={this.onTitle}></ScrollText>\n                : <Map\n                  map={this.map}\n                  key={this.randMapKey}\n                  onLoadMap={this.onLoadMap}\n                  saveData={this.saveData}\n                  onEvent={this.onEvent}\n                />\n              : <Title onLoadMap={this.onLoadMap} />\n        }\n        <FPS />\n      </div>\n  }\n}\n","import Engine from './Engine'\nimport Game from './Game'\n// eslint-disable-next-line no-new\nnew Engine(Game)\n"],"names":["createNode","tag","props","children","curFoucs","Component","constructor","$children","$c","argu","KeyEventComponent","$isFocus","$nextFocus","$preFocus","console","warn","destroy","log","fontFamily","document","fonts","check","baseStyle","direction","color","filter","fontSize","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","isPrimitive","value","type","isFunc","f","isArray","a","Array","isUndefined","o","undefined","getImage","src","window","$res","images","moveEvent","mouseEvents","keyEvents","UI","screen","canvas","createElement","context","getContext","el","width","height","dom","querySelector","body","appendChild","mergeStyle","bind","forEach","name","addEventListener","toLowerCase","e","push","preventDefault","passive","toDataURL","style","fillStyle","replace","clearRect","drawText","node","offsetX","offsetY","text","x","y","fillText","drawImage","sx","sy","swidth","sheight","drawBack","backgroundImage","backgroundColor","save","beginPath","rect","fill","closePath","restore","createPattern","drawBorder","borderWidth","borderColor","stroke","translate","box","transform","rotate","scale","angle","Math","PI","scaleX","scaleY","drawCircle","cx","cy","r","sAngle","eAngle","counterclockwise","strokeWidth","arc","drawLine","x1","y1","x2","y2","moveTo","lineTo","drawRect","parent","renderRect","renderPrimitive","start","left","center","right","end","alphabetic","hanging","ideographic","top","middle","bottom","child","renderNode","event","onMouseMove","onMouseClick","runEvent","onClick","moveEventTarget","render","root","self","$root","Audio","current","audioes","sounds","control","loop","play","pause","createInstance","next","Class","instance","create","destoryInstance","pre","length","pop","updateInstance","patchNode","key","i","Engine","Game","$resource","Object","$state","$foucs","$audio","ui","gameStart","location","protocol","alert","navigator","userAgent","match","RegExp","$1","gameStop","cancelAnimationFrame","ident","frame","keyFrame","requestAnimationFrame","FPS","fps","styles","timeStamp","Date","min","toFixed","Loading","step","sin","msg","Select","select","activeIndex","assign","onKeyDown","code","options","onChange","onConfirm","onClose","index","size","map","item","optionStyle","setStorage","localStorage","setItem","JSON","stringify","getStorage","parse","getItem","saveGame","saveData","loadGame","Title","title","gameName","isLoad","onLoadMap","itemOption","statusOption","loadGameOption","saveGameOption","detailOption","Menu","tick","menu","detail","Shop","shop","shopid","need","effect","choices","onShopEvent","split","Battle","battle","enemy","hero","battleMsg","hostname","hp","turn","atk","def","exp","money","proprety","heroImageStyle","enemyImageStyle","vsStyle","msgStyle","Talk","talk","talks","substr","leftStyle","rightStyle","calcLength","str","len","charCodeAt","Message","onMessageClose","Hero","enemys","keys","enemyId","cost","atkCount","floor","ShopList","shops","entries","isCoincided","A","B","updateVector","vector","obj","assignVector","convertPropertyStr","arr","unshift","propertyStr","properties","v","formatText","data","shift","row","trim","id","includes","isNaN","Number","propertyNames","lv","position","isCoincidedTerrains","heroStyle","mapTerrains","findIndex","isCoincidedEvents","mapEvents","styleHero","moveVector","showEnemyInfo","buying","terrain","eventIndex","handleEvents","onShopClose","setEvent","mapEvent","info","mapping","items","remove","updateSaveData","property","propertyName","slice","removeMapEvent","onTitle","mapId","condition","true","trueEvent","false","falseEvent","checkSaveData","error","onBattleClose","onMenuClose","showMenu","gets","n","some","onShopListClose","onShopListConfirm","Talks","EnemyInfo","Status","walls","rowProperty","game","yellowKey","blueKey","redKey","offset","wdith","ScrollText","bgm","ready","Map","interval","renderMapTerrains","status","terrains","line","renderMapEvents","events","onRemoveMapEvent","loadImage","Promise","resolve","reject","img","Image","loadSound","audio","loadJSON","url","fetch","then","json","loadText","checkFont","loadFont","fontface","FontFace","add","load","loaded","loaderMap","sprite","arr3","concat","loaderData","all","endsWith","animates","icons","npcs","boss","loadImages","o2","loaderImage","loaderMusic","loadSounds","loaderFont","sound","loadMap","app","loading","randMapKey","onEvent"],"mappings":"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"}