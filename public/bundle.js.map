{"version":3,"file":"bundle.js","sources":["../src/Engine/core/createNode.js","../src/Engine/core/Component.js","../src/Engine/const/baseStyle.js","../src/Engine/utils/common.js","../src/Engine/core/UI.js","../src/Engine/core/Audio.js","../src/Engine/core/patchNode.js","../src/Engine/Engine.js","../src/Game/Mota/FPS.jsx","../src/Game/Mota/Loading.jsx","../src/Game/Mota/Select.jsx","../src/Engine/utils/storage.js","../src/Game/sl.js","../src/Game/Mota/Title.jsx","../src/Game/Mota/Menu.jsx","../src/Game/Mota/Shop.jsx","../src/Game/Mota/Battle.jsx","../src/Game/Mota/Talks.jsx","../src/Engine/utils/string.js","../src/Game/Mota/Message.jsx","../src/Game/Mota/EnemyInfo.jsx","../src/Game/Mota/ShopList.jsx","../src/Game/physics.js","../src/Game/utils.js","../src/Game/Mota/Hero.jsx","../src/Game/Mota/Status.jsx","../src/Game/Mota/ScrollText.jsx","../src/Game/Mota/Map.jsx","../src/Game/http.js","../src/Game/loader.js","../src/Game/index.jsx","../src/index.js"],"sourcesContent":["export function createNode (tag, props, ...children) {\n  return {\n    tag,\n    props,\n    children,\n  }\n}\n","import { createNode } from './createNode'\nlet curFoucs = null\nexport { curFoucs }\nexport class Component {\n  constructor ({ props, children }) {\n    this.props = props\n    this.$children = children\n  }\n\n  $c = createNode\n  $destroy () { }\n}\n\nexport class KeyEventComponent extends Component {\n  constructor (...argu) {\n    super(...argu)\n    if (curFoucs) {\n      curFoucs.$isFocus = false\n    }\n    this.$isFocus = true\n    this.$preFocus = curFoucs\n    curFoucs = this\n  }\n\n  destroy () {\n    this.$isFocus = false\n    if (this.$preFocus) {\n      this.$preFocus.$isFocus = true\n    }\n    curFoucs = this.$preFocus\n  }\n}\n","const fontFamily = document.fonts.check('16px 黑体') ? '黑体' : '黑体-简'\n\nexport const baseStyle = {\n  direction: 'ltr',\n  color: 'white',\n  // filter: \"grayscale(.1)\",\n  filter: 'none',\n  fontSize: 32,\n  font: '32px ' + fontFamily,\n  globalAlpha: 1,\n  globalCompositeOperation: 'source-over',\n  // imageSmoothingEnabled: true,\n  // imageSmoothingQuality: 'low',\n  imageSmoothingEnabled: false,\n  lineCap: 'butt',\n  lineDashOffset: 0,\n  lineJoin: 'miter',\n  lineWidth: 1,\n  miterLimit: 10,\n  shadowBlur: 0,\n  shadowColor: 'rgba(0, 0, 0, 0)',\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  strokeStyle: 'white',\n  textAlign: 'start',\n  // textBaseline: \"alphabetic\",\n  textBaseline: 'top',\n}\n","export const isPrimitive = (value) => {\n  const type = typeof value\n  return type === 'string' || type === 'number'\n}\n\nexport const isFunc = (f) => typeof f === 'function'\n\nexport const isArray = (a) => Array.isArray(a)\n\nexport const isUndefined = (o) => o === undefined || o === null\n","import { baseStyle } from '../const/baseStyle'\nimport { isPrimitive, isFunc, isArray } from '../utils/common'\nimport { curFoucs } from './Component'\nconst getImage = (src) => window.$res.images[src]\n\nconst moveEvent = 'MouseMove'\nconst mouseEvents = ['ContextMenu', 'Click', 'Wheel', moveEvent]\n\nconst moveEventTarget = null\nconst mouseClickEventTarget = null\n//  \"MouseDown\", \"MouseUp\"\nconst keyEvents = ['KeyDown', 'KeyUp']\n\nexport default class UI {\n  constructor (screen = {}) {\n    const canvas = document.createElement('canvas')\n    this.canvas = canvas\n    this.context = canvas.getContext('2d')\n    const { el, width = 32 * (13 + 5), height = 32 * 13 } = screen\n    this.screen = screen\n    this.canvas.width = width\n    this.canvas.height = height\n    const dom = document.querySelector(el) || document.body\n    dom && dom.appendChild(this.canvas)\n    this.mergeStyle(baseStyle)\n\n    this.mouseEvents = []\n    this.keyEvents = []\n    this.bind()\n  }\n\n  bind () {\n    mouseEvents.forEach((name) => {\n      this.canvas.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.mouseEvents.push(e)\n        e.preventDefault()\n      }, { passive: false })\n    })\n\n    // const name = moveEvent\n    // this.canvas.addEventListener(name.toLowerCase(), (e) => {\n    //   e.name = 'on' + name\n    //   this.moveEvent = e\n    //   e.preventDefault()\n    // }, { passive: false })\n\n    keyEvents.forEach((name) => {\n      document.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.keyEvents = e\n      })\n    })\n  }\n\n  toDataURL () {\n    return this.canvas.toDataURL()\n  }\n\n  mergeStyle = style => {\n    if (style) {\n      const { fontSize, fontFamily, font, textAlign, textBaseline, color, globalAlpha } = style\n      if (globalAlpha) {\n        this.context.globalAlpha = globalAlpha\n      }\n      if (textAlign) {\n        this.context.textAlign = textAlign\n      }\n      if (textBaseline) {\n        this.context.textBaseline = textBaseline\n      }\n      if (color) {\n        this.context.fillStyle = color\n      }\n      if (font) {\n        this.context.font = font\n      }\n      if (fontSize) {\n        this.context.font = this.context.font.replace(/\\d+/, fontSize)\n      }\n      if (fontFamily) {\n        this.context.font = this.context.font.replace(/[\\u4e00-\\u9fa5]+/, fontFamily)\n      }\n    }\n  };\n\n  clearRect () {\n    const { context, canvas } = this\n    context.clearRect(0, 0, canvas.width, canvas.height)\n  }\n\n  drawText (node, offsetX, offsetY) {\n    const { style, text } = node\n    const { context } = this\n    const { x = 0, y = 0 } = style\n    context.fillText(text, offsetX + x, offsetY + y)\n  }\n\n  drawImage (node, offsetX, offsetY) {\n    const { props } = node\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { sx = 0, sy = 0, width = 32, height = 32, swidth, sheight } = style\n        const { context } = this\n        context.drawImage(getImage(props.src), sx, sy, swidth || width, sheight || height, offsetX, offsetY, width, height)\n      }\n    }\n  }\n\n  drawBack (node, offsetX, offsetY) {\n    const { context } = this\n    const { backgroundImage, backgroundColor, height, width } = node.props.style\n    if (backgroundColor) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = backgroundColor\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n    if (backgroundImage) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = context.createPattern(getImage(backgroundImage), 'repeat')\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  drawBorder (node, offsetX, offsetY) {\n    const { context } = this\n    const { borderWidth, borderColor, height, width } = node.props.style\n    if (borderWidth) {\n      context.save()\n      context.lineWidth = borderWidth\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      if (borderColor) {\n        context.strokeStyle = borderColor\n      }\n      context.stroke()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  translate (box) {\n    const { context } = this\n    const { style } = box\n    const { x = 0, y = 0 } = style\n    context.translate(x, y)\n  }\n\n  transform (box) {\n    const { context } = this\n    const { rotate, scale } = box\n    if (rotate) {\n      const { angle = 0, x = 0, y = 0 } = rotate\n      context.translate(x, y)\n      context.rotate(angle * Math.PI / 180)\n      context.translate(-x, -y)\n    }\n    if (scale) {\n      const { x = 0, y = 0, scaleX = 1, scaleY = 1 } = scale\n      context.translate(x, y)\n      context.scale(scaleX, scaleY)\n      context.translate(-x, -y)\n    }\n  }\n\n  drawCircle (node, offsetX, offsetY) {\n    const { context } = this\n    context.save()\n    context.beginPath()\n    const { cx, cy, r, sAngle, eAngle, counterclockwise = false, stroke, strokeWidth } = node.props\n    context.arc(cx + offsetX, cy + offsetY, r, sAngle / 180 * Math.PI, eAngle / 180 * Math.PI, counterclockwise)\n    context.strokeStyle = stroke\n    context.lineWidth = strokeWidth\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  drawLine (node) {\n    const { context } = this\n    const { x1 = 0, y1 = 0, x2 = 200, y2 = 200 } = node.props\n    context.beginPath()\n    context.moveTo(x1, y1)\n    context.lineTo(x2, y2)\n    context.stroke()\n  }\n\n  drawRect (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props, tag } = node\n    if (props) {\n      const { style } = props\n      this.mergeStyle(style)\n      if (style) {\n        this.drawBack(node, offsetX, offsetY)\n        this.drawBorder(node, offsetX, offsetY)\n      }\n    }\n    if (tag === 'img') {\n      this.drawImage(node, offsetX, offsetY)\n    } else if (tag === 'text') {\n      this.drawText(node, offsetX, offsetY)\n    } else if (tag === 'circle') {\n      this.drawCircle(node, offsetX, offsetY)\n    } else if (tag === 'line') {\n      this.drawLine(node, offsetX, offsetX)\n    }\n    this.renderRect(node.children, offsetX, offsetY, node)\n    context.restore()\n  }\n\n  renderPrimitive (text, offsetX, offsetY, parent) {\n    const { context } = this\n    const { textAlign, textBaseline } = context\n    const { width = 0, height = 0 } = parent?.props?.style || {}\n    const x = { start: 0, left: 0, center: 0.5, right: 1, end: 0 }\n    const y = { alphabetic: 0, hanging: 0, ideographic: 0, top: 0, middle: 0.5, bottom: 1 }\n    // start 默认。文本在指定的位置开始。\n    // end 文本在指定的位置结束。\n    // center 文本的中心被放置在指定的位置。\n    // left 文本在指定的位置开始。\n    // right 文本在指定的位置结束。\n\n    // alphabetic 默认。文本基线是普通的字母基线。\n    // top 文本基线是 em 方框的顶端。\n    // hanging 文本基线是悬挂基线。\n    // middle 文本基线是 em 方框的正中。\n    // ideographic 文本基线是表意基线。\n    // bottom 文本基线是 em 方框的底端。\n    context.fillText(text, offsetX + width * x[textAlign], offsetY + height * y[textBaseline])\n  }\n\n  renderRect (node, offsetX, offsetY, parent) {\n    if (node !== null && node !== undefined) {\n      if (isArray(node)) {\n        node.forEach(node => this.renderRect(node, offsetX, offsetY, parent))\n      } else if (isPrimitive(node)) {\n        this.renderPrimitive(node, offsetX, offsetY, parent)\n      } else if (isFunc(node.tag)) {\n        this.renderRect(node.node, offsetX, offsetY, parent)\n      } else {\n        this.renderNode(node, offsetX, offsetY, parent)\n      }\n    }\n  }\n\n  renderNode (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props } = node\n\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { x = 0, y = 0 } = style\n        offsetX += x\n        offsetY += y\n        this.mouseEvents.forEach((event) => {\n          const { name } = event\n          if (event.offsetX >= offsetX && event.offsetX < style.width + offsetX && event.offsetY >= offsetY && event.offsetY < style.height + offsetY) {\n            if (name === 'onMouseMove') {\n              this.onMouseMove = { node, event }\n            } else if (name === 'onClick') {\n              this.onMouseClick = { node, event }\n            }\n          }\n        })\n      }\n    }\n\n    this.drawRect(node, offsetX, offsetY, parent)\n\n    context.restore()\n  }\n\n  runEvent () {\n    if (curFoucs && this.keyEvents) {\n      const { name } = this.keyEvents\n      curFoucs[name] && curFoucs[name](this.keyEvents)\n    }\n    this.keyEvents = null\n    // if (this.moveEventTarget && this.moveEvent) {\n    //   if (moveEventTarget !== this.moveEventTarget) {\n    //     if (moveEventTarget) {\n    //       moveEventTarget.props.onMouseLeave && moveEventTarget.props.onMouseLeave()\n    //     }\n    //     moveEventTarget = this.moveEventTarget\n    //     moveEventTarget.props.onMouseEnter && moveEventTarget.props.onMouseEnter()\n    //   }\n    // }\n    if (this.onMouseClick) {\n      const { node, event } = this.onMouseClick\n      if (node?.props?.onClick) {\n        node.props.onClick(event)\n      }\n      this.onMouseClick = null\n    }\n    this.mouseEvents = []\n    this.moveEvent = null\n    this.moveEventTarget = null\n  }\n\n  render (root) {\n    this.clearRect()\n    this.renderRect(root, 0, 0, this.canvas)\n    this.runEvent()\n    self.$root = root\n  }\n}\n","export default class Audio {\n  current = null\n  constructor (audioes) {\n    this.audioes = audioes || window.$res.sounds\n  }\n\n  control (type, name, control) {\n    this.audioes = window.$res.sounds\n    this.current = this.audioes[`${type}/${name}`]\n    this.current.loop = true\n    this.current[control]()\n  }\n\n  play (type, name) {\n    this.control(type, name, 'play')\n  }\n\n  pause (type, name) {\n    this.control(type, name, 'pause')\n  }\n}\n","import { isFunc, isPrimitive, isArray, isUndefined } from '../utils/common'\n\nfunction createInstance (next) {\n  const Class = next.tag\n  next.instance = new Class(next)\n  next.instance.create && next.instance.create()\n  renderNode(next)\n}\n\nfunction destoryInstance (pre) {\n  if (!isPrimitive(pre) && !isUndefined(pre)) {\n    if (isFunc(pre.tag)) {\n      destoryInstance(pre.node)\n      pre.instance.destroy && pre.instance.destroy()\n    } else if (Array.isArray(pre)) {\n      while (pre.length) {\n        destoryInstance(pre.pop())\n      }\n    } else {\n      destoryInstance(pre.children)\n    }\n  }\n}\n\nfunction updateInstance (pre, next) {\n  next.instance = pre.instance\n  if (!next.instance) {\n    debugger\n    return\n  }\n  next.node = pre.node\n  next.instance.props = next.props\n  renderNode(next)\n}\n\nfunction renderNode (next) {\n  const instance = next.instance\n  next.node = patchNode(next.node, instance.render())\n}\n\nexport function patchNode (pre, next) {\n  if (isPrimitive(next) || isUndefined(next)) {\n    destoryInstance(pre)\n  } else if (isFunc(next.tag)) {\n    if (pre) {\n      if (pre.tag === next.tag && pre.props?.key === next.props?.key) {\n        updateInstance(pre, next)\n      } else {\n        destoryInstance(pre)\n        createInstance(next)\n      }\n    } else {\n      createInstance(next)\n    }\n  } else if (isArray(next.children)) {\n    const preChildren = pre?.children || []\n    const nextChildren = next.children\n    // todo diff algorithm\n    for (let i = 0; i < next.children.length; i++) {\n      patchNode(preChildren[i], nextChildren[i])\n    }\n  }\n\n  return next\n}\n","import UI from './core/UI'\nimport Audio from './core/Audio'\nimport { createNode } from './core/createNode'\nimport { patchNode } from './core/patchNode'\nexport default class Engine {\n  constructor (Game) {\n    if (this.check()) {\n      this.$resource = Object.create(null)\n      this.$state = Object.create(null)\n      this.Game = createNode(Game, null)\n      this.$foucs = null\n      this.$audio = new Audio()\n      window.$audio = this.$audio\n      this.ui = new UI()\n      this.gameStart()\n    }\n  }\n\n  check () {\n    if (location.protocol === 'file:') {\n      alert('不能直接运行index.html')\n    } else if (!navigator.userAgent.match(/Chrome\\/(\\d+)/) || RegExp.$1 < 88) {\n      alert('需要chrome最新浏览器')\n    } else {\n      return true\n    }\n  }\n\n  gameStop () {\n    cancelAnimationFrame(this.ident)\n    this.ident = -1\n  }\n\n  gameStart () {\n    const frame = () => {\n      this.keyFrame()\n      this.ident = requestAnimationFrame(frame)\n    }\n    frame()\n  }\n\n  keyFrame () {\n    this.root = patchNode(this.root, this.Game, this.ui)\n    this.ui.render(this.root)\n  }\n}\n","\nimport { Component } from 'Engine'\nexport default class FPS extends Component {\n  fps = 60\n  styles = {\n    fps: {\n      textAlign: 'left',\n      height: 32,\n      x: 0,\n    },\n  }\n\n  timeStamp = +new Date();\n  render () {\n    const timeStamp = +new Date()\n    const fps = (1000 / (timeStamp - this.timeStamp))\n    const min = 30\n    const warn = this.fps < min && fps < min\n    this.fps = fps\n    this.timeStamp = timeStamp\n    return (\n      <div style={this.styles.fps}>\n        {warn ? `${this.fps.toFixed()}fps` : null}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nexport default class Loading extends Component {\n  step = 1\n  angle = -this.step\n  render () {\n    this.angle += this.step\n    if (this.angle > 180) {\n      this.angle = 0\n    }\n    const sAngle = this.angle * 2 - 90\n    const eAngle = Math.sin(this.angle / 180 * Math.PI) * 45\n    const width = 32 * (13 + 5)\n    const height = 32 * 13\n    return <div style={{ x: 0, y: 0, width, height }}>\n      {this.props.msg}\n      <circle cx={width / 2} cy={height / 2} r={32 * 3} sAngle={sAngle - eAngle} eAngle={sAngle + eAngle} stroke=\"#4e6ef2\" strokeWidth={10} />\n    </div>\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Select extends KeyEventComponent {\n  styles = {\n    select: {\n      fontSize: 24,\n      textAlign: 'center',\n      width: 320,\n    },\n  }\n\n  create () {\n    this.activeIndex = this.props.activeIndex || 0\n    const { style } = this.props\n    if (style) {\n      Object.assign(this.styles.select, style)\n    }\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'ArrowDown') {\n      this.activeIndex++\n      if (this.activeIndex === this.props.options.length) {\n        this.activeIndex = 0\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'ArrowUp') {\n      this.activeIndex--\n      if (this.activeIndex === -1) {\n        this.activeIndex += this.props.options.length\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Space') {\n      this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Escape') {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  onClick (index) {\n    this.activeIndex = index\n    this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n  }\n\n  render () {\n    const size = 32\n    const borderWidth = 2\n    const select = this.styles.select\n    const { width } = select\n\n    return (\n      <div style={this.styles.select}>\n        {\n          this.props.options && this.props.options.length\n            ? this.props.options.map((item, index) => {\n              const { text } = item\n              const optionStyle = {\n                y: index * size,\n                height: size,\n                width: width,\n                borderWidth: this.activeIndex === index ? borderWidth : 0,\n                borderColor: '#ccc',\n              }\n              return (\n                <div style={optionStyle} onClick={() => this.onClick(index)} onMouseLeave={(e) => { this.activeIndex = -1 }} onMouseEnter={(e) => { this.activeIndex = index }}>\n                  {text}\n                </div>\n              )\n            })\n            : '空空如也'}\n      </div>\n    )\n  }\n}\n","export function setStorage (key, value) {\n  return localStorage.setItem(key, JSON.stringify(value))\n}\n\nexport function getStorage (key) {\n  try {\n    return JSON.parse(localStorage.getItem(key))\n  } catch (e) {\n    return null\n  }\n}\n","import { setStorage, getStorage } from 'Engine/utils/storage'\n\nexport function saveGame (saveData) {\n  return setStorage('game', saveData)\n}\n\nexport function loadGame () {\n  return getStorage('game')\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nimport { loadGame } from '../sl'\n\nexport default class Title extends Component {\n  styles = {\n    title: {\n      width: 32 * (13 + 5),\n      height: 32 * 13,\n    },\n    gameName: {\n      y: 40,\n      width: 32 * (13 + 5),\n      height: 128,\n      font: 'bold 128px 黑体',\n    },\n    select: {\n      x: 16 * 16,\n      y: 32 * 8,\n      width: 64,\n    },\n  }\n\n  create () {\n    this.activeIndex = loadGame() ? 1 : 0\n    this.options = [\n      {\n        text: '开始',\n      },\n      {\n        text: '继续',\n      },\n    ]\n  }\n\n  onConfirm = (isLoad) => {\n    this.saveData = Object.assign(\n      window.$res.save,\n      isLoad ? loadGame() : null,\n    )\n    this.props.onLoadMap()\n  }\n\n  render () {\n    return (\n      <div style={this.styles.title}>\n        <div style={this.styles.gameName}>魔塔</div>\n        <Select activeIndex={this.activeIndex} options={this.options} style={this.styles.select} onConfirm={this.onConfirm}></Select>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport { loadGame, saveGame } from '../sl'\nimport Select from './Select'\nconst options = [\n  { text: '物品' },\n  { text: '技能' },\n  { text: '装备' },\n  { text: '状态' },\n]\n\nconst itemOption = []\nconst statusOption = []\nconst loadGameOption = [{ text: 12233 }]\nconst saveGameOption = [{ text: 1 }, { text: 2 }, { text: 3 }, { text: 4 }]\n\nconst detailOption = [itemOption, statusOption, itemOption, itemOption, loadGameOption, saveGameOption]\nexport default class Menu extends Component {\n  activeIndex = -1\n  tick = 0\n  create () {\n    this.styles = {\n      menu: {\n        width: 32 * 18,\n        height: 32 * 13,\n        backgroundColor: 'rgba(0,0,0,.6)',\n      },\n      detail: {\n        x: 32 * 4,\n        width: 32 * 9,\n        height: 32 * 13,\n        borderWidth: 2,\n      },\n      select: {\n        width: 32 * 4,\n      },\n    }\n  }\n\n  onConfirm = (activeIndex) => {\n    this.activeIndex = activeIndex\n  }\n\n  render () {\n    return <div style={this.styles.menu}>\n      <Select options={options} style={this.styles.select} onConfirm={this.onConfirm} onClose={this.props.onClose} />\n\n      {\n        this.activeIndex === -1\n          ? null\n          : <Select options={detailOption[this.activeIndex]} style={this.styles.detail} onConfirm={this.onConfirm} onClose={() => { this.activeIndex = -1 }} />\n      }\n    </div>\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class Shop extends Component {\n  styles = {\n    shop: {\n      x: 2 * 32,\n      y: 2 * 32,\n      height: 32 * 7,\n      width: 32 * 9,\n\n      fontSize: 24,\n      borderWidth: 4,\n      borderColor: '#deb887',\n      textAlign: 'center',\n      backgroundImage: 'ground.png',\n    },\n    title: {\n      x: 16 * 9,\n      y: 16,\n    },\n    text: {\n      x: 0,\n      y: 48,\n      fontSize: 14,\n    },\n    select: {\n      x: 32 * 2,\n      y: 112,\n      width: 32 * 5,\n      fontSize: 16,\n    },\n  }\n\n  create () {\n    this.shop = window.$res.shop[this.props.shopid]\n  }\n\n  onConfirm = (index) => {\n    const { need, effect } = this.shop.choices[index]\n    this.props.onShopEvent(need, effect)\n  }\n\n  render () {\n    return (\n      <div style={this.styles.shop}>\n        <div style={this.styles.title}>{this.shop.title}</div>\n        <div style={this.styles.text}>\n          {this.shop.text.split(/\\n/).map((text, index) => <div style={{ x: 16 * 9, y: index * 16 }}>{text}</div>)}\n        </div>\n        <Select options={this.shop.choices} onConfirm={this.onConfirm} style={this.styles.select} onClose={this.props.onClose}></Select>\n      </div>\n    )\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Battle extends KeyEventComponent {\n  tick = 0\n  styles = {\n    battle: {\n      x: 48,\n      y: 48,\n      width: 32 * 15,\n      height: 32 * 10,\n      fontSize: 16,\n      borderWidth: 3,\n      borderColor: '#deb887',\n      font: '32px sans-serif',\n      swidth: 640,\n      sheight: 320,\n    },\n    enemy: {\n      x: 32 * 1,\n      y: 32 * 1,\n    },\n    hero: {\n      x: 32 * 10,\n      y: 32 * 1,\n    },\n  }\n\n  create () {\n    this.enemy = JSON.parse(JSON.stringify(this.props.enemy))\n    this.hero = this.props.hero\n  }\n\n  onKeyDown () {\n    if (this.battleMsg) {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemy = this.enemy\n    const hero = this.hero\n    const tick = location.hostname === 'localhost' ? 1 : 5\n    if (enemy.hp > 0) {\n      this.tick++\n      if (this.tick === tick) {\n        if (this.turn) {\n          const atk = enemy.atk - hero.def\n          if (atk > 0) {\n            hero.hp -= atk\n          }\n        } else {\n          const atk = hero.atk - enemy.def\n          if (atk > 0) {\n            enemy.hp -= atk\n          }\n          if (enemy.hp <= 0) {\n            enemy.hp = 0\n            const { exp, money } = enemy\n            hero.exp += exp\n            this.props.saveData.money += money\n            this.battleMsg = `战斗胜利，获得${money}金币，${exp}经验`\n          }\n        }\n        this.turn = !this.turn\n        this.tick = 0\n      }\n    }\n\n    const proprety = [{ text: '名称', key: 'name' }, { text: '生命', key: 'hp' }, { text: '攻击', key: 'atk' }, { text: '防御', key: 'def' }]\n    const heroImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: 0 }\n    const enemyImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: enemy.sy * 32 }\n    const size = 64\n    const vsStyle = { font: `bold ${size}px sans-serif`, x: 32 * (5 + 1.5), y: 32 * 2, height: size, width: size }\n    const msgStyle = { fontSize: 24, height: 32, y: 32 * 8, width: 32 * 15 }\n    return <img src=\"Battlebacks/mota.jpg\" style={this.styles.battle}>\n      {this.battleMsg && <div style={msgStyle}>{this.battleMsg}</div>}\n      <div style={this.styles.enemy}>\n        <img src=\"enemys.png\" style={enemyImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{item.text}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{enemy[item.key]}</div>\n          </div>\n        })}\n      </div>\n      <div style={vsStyle}>VS</div>\n      <div style={this.styles.hero}>\n        <img src=\"Characters/hero.png\" style={heroImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{hero[item.key]}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{item.text}</div>\n          </div>\n        })}\n      </div>\n    </img>\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Talk extends KeyEventComponent {\n  width = 7\n  styles = {\n    talk: {\n      width: 32 * this.width,\n      height: 32 * 1,\n      backgroundColor: 'black',\n      borderWidth: 2,\n      borderColor: 'white',\n      fontSize: 16,\n      textAlign: 'left',\n      textBaseline: 'middle',\n    },\n  }\n\n  index = 0\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      this.index++\n      if (this.index === this.props.talk.length) {\n        this.props.onConfirm()\n      } else {\n        this.create()\n      }\n    }\n  }\n\n  create () {\n    this.turn = !this.turn\n    const talks = this.props.talk[this.index].split(/\\n/)\n    this.current = []\n    talks.forEach((talk) => {\n      for (let i = 0; i < talk.length; i = i + 7 * 2) {\n        this.current.push(talk.substr(i, 7 * 2))\n      }\n    })\n\n    const leftStyle = {\n      x: 32 * 2,\n      y: 32 * 2,\n      height: 32 * this.current.length,\n    }\n    const rightStyle = {\n      x: 32 * 4,\n      y: 32 * 6,\n      height: 32 * this.current.length,\n    }\n    Object.assign(this.styles.talk, this.turn ? leftStyle : rightStyle)\n  }\n\n  render () {\n    return <div style={this.styles.talk}>\n      {this.current.map((talk, index) => {\n        return <div style={{ x: 0, y: 32 * index, width: 32 * this.width, height: 32 }}>{talk}</div>\n      })}\n    </div>\n  }\n}\n","export function calcLength (str) {\n  let len = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      len += 2\n    } else {\n      len += 1\n    }\n  }\n  return len\n}\n\nexport function splitStringByWidth (str, w) {\n  let len = 0\n  let start = 0\n  const re = []\n  let i = 0\n  for (; i < str.length; i++) {\n    let c = 0\n    if (str.charCodeAt(i) > 127) {\n      c = 2\n    } else {\n      c = 1\n    }\n    len += c\n    if (len > w) {\n      re.push(str.substring(start, i))\n      start = i\n      len = c\n    }\n  }\n  re.push(str.substring(start, i))\n  return re\n}\n","import { Component } from 'Engine'\nimport { calcLength } from '../../Engine/utils/string'\n\nexport default class Message extends Component {\n  create () {\n    if (this.props) {\n      this.tick = this.props.tick || 120\n    }\n    this.length = calcLength(this.props.msg)\n    this.msg = this.props.msg\n  }\n\n  render () {\n    this.tick--\n    if (this.tick === 0) {\n      this.props.onMessageClose()\n      return null\n    }\n    let globalAlpha = 1\n    if (this.tick < 30) {\n      globalAlpha = this.tick / 30\n    }\n    const fontSize = 18\n    const style = { textAlign: 'left', fontSize, backgroundColor: 'rgba(0,0,0,.7)', globalAlpha, x: 0, y: 0, height: 32, width: fontSize / 2 * this.length + 10 }\n    return <div style={style}>\n      <div style={{ x: 5, height: 32 }}>{this.msg}</div>\n    </div>\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Hero extends KeyEventComponent {\n  onKeyDown ({ code }) {\n    if (code === 'KeyX') {\n      this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemys = Object.keys(this.props.enemys)\n    return (\n      <div\n        style={{\n          textAlign: 'left',\n          fontSize: 16,\n          backgroundColor: 'rgba(0,0,0,.8)',\n          width: 32 * 18,\n          height: 32 * 13,\n        }}\n      >\n        <div style={{ x: 32, y: 32 }}>\n          <div style={{ x: 32 * 1, height: 32 }}>名字</div>\n          <div style={{ x: 32 * 4, height: 32 }}>生命</div>\n          <div style={{ x: 32 * 6, height: 32 }}>攻击</div>\n          <div style={{ x: 32 * 8, height: 32 }}>防御</div>\n          <div style={{ x: 32 * 10, height: 32 }}>损失</div>\n          {enemys.map((enemyId, index) => {\n            const style = {\n              x: 0,\n              y: index * 32 + 32,\n              height: 32,\n            }\n            const enemy = window.$res.enemys[enemyId]\n            const hero = this.props.saveData.hero\n            let cost = 0\n            if (hero.atk > enemy.def) {\n              if (\n                hero.def >= enemy.atk ||\n                enemy.hp / (hero.atk - enemy.def) <=\n                  hero.hp / (enemy.atk - hero.def)\n              ) {\n                if (hero.def >= enemy.atk) {\n                  cost = 0\n                } else {\n                  const atkCount = Math.floor(\n                    enemy.hp / (hero.atk - enemy.def),\n                  )\n                  cost = (enemy.atk - hero.def) * atkCount\n                }\n              } else {\n                cost = '-'\n              }\n            } else {\n              cost = '-'\n            }\n            return (\n              <div style={style}>\n                <img src=\"enemys.png\" alt=\"\" style={{ height: 32, width: 32, sy: enemy.sy * 32 }}/>\n                <div style={{ x: 32 * 1, height: 32 }}>{enemy.name}</div>\n                <div style={{ x: 32 * 4, height: 32 }}>{enemy.hp}</div>\n                <div style={{ x: 32 * 6, height: 32 }}>{enemy.atk}</div>\n                <div style={{ x: 32 * 8, height: 32 }}>{enemy.def}</div>\n                <div style={{ x: 32 * 10, height: 32 }}>{cost}</div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class ShopList extends Component {\n  style = {\n    x: 32 * 3,\n    y: 32 * 2,\n    height: 32 * 8,\n    width: 32 * 7,\n    backgroundImage: 'ground.png',\n    borderWidth: 4,\n    borderColor: '#deb887',\n  }\n\n  create () {\n    const shops = this.props.saveData.shops || []\n    this.options = Object.entries(shops).map(([shopid, text]) => {\n      return { text, shopid }\n    })\n  }\n\n  onConfirm = (index) => {\n    const { shopid } = this.options[index]\n    this.props.onConfirm(shopid)\n  }\n\n  render () {\n    return (\n      <div style={this.style}>\n        <div style={{ height: 32, width: 32 * 7, fontSize: 24 }}>商店选择</div>\n        <Select style={{ x: 32, y: 48, width: 160 }} options={this.options} onConfirm={this.onConfirm} onClose={this.props.onClose}/>\n      </div>\n\n    )\n  }\n}\n","export function isCoincided (A, B) {\n  if (\n    A.x >= B.x + B.width ||\n    A.x + A.width <= B.x ||\n    A.y >= B.y + B.height ||\n    A.y + A.height <= B.y\n  ) {\n    return false\n  }\n  return true\n}\n\nexport function updateVector (vector, obj) {\n  vector = Object.assign(Object.create(null), vector)\n  Object.entries(obj).forEach(([key, value]) => {\n    vector[key] += value\n  })\n  return vector\n}\n\nexport function assignVector (vector, obj) {\n  return Object.assign(vector, obj)\n}\n","export function convertPropertyStr (str) {\n  const arr = str.split('.')\n  if (arr.length === 1) {\n    arr.unshift('')\n  }\n  const [key, propertyStr] = arr\n  const properties = propertyStr.split(';').map(v => v.split(':'))\n  return [key, properties]\n}\n\nexport const formatText = (data) => {\n  const o = []\n  data = data.split(/\\r?\\n/)\n  const keys = data.shift().split(',')\n  data.forEach((row, index) => {\n    if (!row.trim()) {\n      return\n    }\n    const properties = row.split(',')\n    const [id] = properties\n    const item = { sy: index }\n    keys.forEach((key, index) => {\n      const value = properties[index]\n      if (!value) {\n        return\n      }\n      if (key === 'property') {\n        item[key] = convertPropertyStr(value)\n      } else if (['id', 'name', 'type'].includes(key)) {\n        item[key] = value\n      } else {\n        if (isNaN(value)) {\n          debugger\n        }\n        item[key] = Number(value)\n      }\n    })\n    o[id] = item\n    o.push(item)\n    return data\n  })\n  return o\n}\n","import { KeyEventComponent } from 'Engine'\n\nimport Menu from './Menu'\nimport Shop from './Shop'\nimport Battle from './Battle'\nimport Talks from './Talks'\nimport Message from './Message'\nimport EnemyInfo from './EnemyInfo'\nimport ShopList from './ShopList'\n\nimport { saveGame, loadGame } from '../sl'\nimport { isCoincided, updateVector, assignVector } from '../physics'\nimport { convertPropertyStr } from '../utils'\n\nconst propertyNames = {\n  lv: '等级',\n  money: '金币',\n  hp: '生命',\n  atk: '攻击',\n  def: '防御',\n  exp: '经验',\n}\nexport default class Hero extends KeyEventComponent {\n  tick = 0;\n  create () {\n    const hero = Object.assign(this.props.saveData.position, {\n      width: 32,\n      height: 32,\n    })\n\n    this.styles = { hero }\n  }\n\n  isCoincidedTerrains (heroStyle) {\n    return this.props.mapTerrains.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  isCoincidedEvents (heroStyle) {\n    return this.props.mapEvents.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  onKeyDown (e) {\n    const { code } = e\n    const styleHero = this.styles.hero\n    const step = 32\n    let moveVector = null\n    if (code === 'ArrowDown') {\n      moveVector = { y: step }\n      styleHero.sy = 0\n    } else if (code === 'ArrowUp') {\n      moveVector = { y: -step }\n      styleHero.sy = 96\n    } else if (code === 'ArrowLeft') {\n      moveVector = { x: -step }\n      styleHero.sy = 32\n    } else if (code === 'ArrowRight') {\n      moveVector = { x: step }\n      styleHero.sy = 64\n    } else if (code === 'KeyS') {\n      saveGame(this.props.saveData)\n      this.msg = '存储成功'\n    } else if (code === 'KeyL') {\n      this.props.onLoadMap(loadGame())\n    } else if (code === 'KeyX') {\n      this.showEnemyInfo = !this.showEnemyInfo\n    } else if (code === 'KeyB') {\n      this.buying = true\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    }\n    if (moveVector) {\n      const vector = updateVector(styleHero, moveVector)\n\n      const terrain = this.isCoincidedTerrains(vector)\n      if (terrain !== -1) {\n        return\n      }\n\n      const eventIndex = this.isCoincidedEvents(vector)\n      if (eventIndex !== -1) {\n        if (this.handleEvents(this.props.map.mapEvents[eventIndex])) {\n          assignVector(styleHero, vector)\n        }\n        return\n      }\n\n      assignVector(styleHero, vector)\n    }\n  }\n\n  onShopClose = () => {\n    this.shopid = null\n    this.setEvent()\n  };\n\n  handleEvents (mapEvent) {\n    if (this.mapEvent) {\n      debugger\n      return\n    }\n\n    if (mapEvent[3]) {\n      this.mapEvent = mapEvent\n      this.eventIndex = 0\n      this.setEvent()\n    } else {\n      const info = window.$res.mapping[mapEvent[2]]\n      const { name, type } = info\n      if (type === 'items') {\n        const item = window.$res.items[name]\n        const { type } = item\n        if (type === '1') {\n          this.remove(mapEvent)\n          this.updateSaveData('items', name)\n          this.msg = `获得${item.name}`\n        } else if (type === '2') {\n          this.remove(mapEvent)\n          this.updateSaveData(...item.property)\n          const [name, property] = item.property\n          this.msg = `获得${item.name}`\n          property.forEach((property) => {\n            const [key, value] = property\n            let propertyName = key\n            if (name === 'hero') {\n              propertyName = propertyNames[key]\n            } else if (name === 'items') {\n              propertyName = window.$res.items[key].name\n            } else if (key === 'money') {\n              propertyName = '金币'\n            }\n            this.msg += ` ${propertyName}${value > 0 ? '+' : '-'}${value}`\n          })\n        }\n        return true\n      } else if (type === 'enemys') {\n        mapEvent[3] = [\n          {\n            type: 'enemy',\n            data: name,\n          },\n        ]\n        this.handleEvents(mapEvent)\n        return false\n      } else if (type === 'terrains') {\n        if (\n          [\n            'yellowDoor',\n            'redDoor',\n            'blueDoor',\n            'steelDoor',\n            'specialDoor',\n          ].includes(name)\n        ) {\n          const key = name.slice(0, -4) + 'Key'\n          if (this.props.saveData.items[key]) {\n            this.props.saveData.items[key]--\n            this.remove(mapEvent)\n            return true\n          }\n        }\n      }\n    }\n  }\n\n  setEvent = () => {\n    if (this.eventIndex < this.mapEvent[3].length) {\n      const event = this.mapEvent[3][this.eventIndex++]\n      const { type, data } = event\n      if (type === 'talk') {\n        this.talk = data\n        return\n      } else if (type === 'mapLoad') {\n        this.props.onLoadMap(data)\n      } else if (type === 'openShop') {\n        this.shopid = event.id\n        this.props.saveData.shops = this.props.saveData.shops || {}\n        this.props.saveData.shops[this.shopid] =\n          window.$res.shop[this.shopid].title\n        return\n      } else if (type === 'getItems') {\n        this.updateSaveData('items', data)\n      } else if (type === 'removeSelf') {\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'moveBlock') {\n        console.log(this.mapEvent)\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'enemy') {\n        const enemy = window.$res.enemys[data]\n        const hero = this.props.saveData.hero\n        if (hero.atk > enemy.def) {\n          if (\n            hero.def >= enemy.atk ||\n            enemy.hp / (hero.atk - enemy.def) <=\n              hero.hp / (enemy.atk - hero.def)\n          ) {\n            this.enemy = enemy\n            return\n          } else {\n            this.mapEvent = null\n            this.eventIndex = 0\n            this.msg = `你打不过${enemy.name}`\n            return\n          }\n        } else {\n          this.mapEvent = null\n          this.eventIndex = 0\n          this.msg = `你的攻击比${enemy.name}的防御低`\n          return\n        }\n      } else if (type === 'updateSaveData') {\n        this.updateSaveData(...convertPropertyStr(data))\n      } else if (type === 'removeBlock') {\n        this.props.removeMapEvent(data)\n      } else if (type === 'title') {\n        this.props.onTitle()\n      } else if (type === 'removeMapBlock') {\n        const { mapId, position } = data\n        const { x, y } = position\n        this.props.saveData.destroy[[mapId, x, y]] = true\n      } else if (type === 'if') {\n        const { condition, true: trueEvent, false: falseEvent } = event\n        this.mapEvent = null\n        this.eventIndex = 0\n        if (this.checkSaveData(...convertPropertyStr(condition))) {\n          this.mapEvent = [0, 0, 0, trueEvent]\n        } else {\n          this.mapEvent = [0, 0, 0, falseEvent]\n        }\n      } else {\n        console.error(event)\n      }\n      this.setEvent()\n    } else {\n      this.mapEvent = null\n    }\n  };\n\n  remove (mapEvent) {\n    this.props.removeMapEvent(mapEvent)\n    this.mapEvent = null\n  }\n\n  onBattleClose = () => {\n    this.enemy = null\n    this.props.removeMapEvent(this.mapEvent)\n    this.setEvent()\n  };\n\n  onConfirm = () => {\n    this.talk = null\n    this.setEvent()\n  };\n\n  onMenuClose = () => {\n    this.showMenu = null\n  };\n\n  onMessageClose = () => {\n    this.msg = null\n  };\n\n  updateSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      gets.forEach(([id, value]) => this.updateSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      saveData[gets] += Number(n)\n    } else if (typeof gets === 'object') {\n      this.updateSaveData(context, Object.entries(gets))\n    } else {\n      console.error(gets, n)\n    }\n  }\n\n  checkSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      return gets.some(([id, value]) => this.checkSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      return saveData[gets] + Number(n) >= 0\n    } else if (typeof gets === 'object') {\n      return this.checkSaveData(context, Object.entries(gets), null, 0)\n    } else {\n      return false\n    }\n  }\n\n  onShopEvent = (need, effect) => {\n    if (this.checkSaveData(...convertPropertyStr(need))) {\n      this.updateSaveData(...convertPropertyStr(need))\n      this.updateSaveData(...convertPropertyStr(effect))\n    }\n  };\n\n  onShopListClose = () => {\n    this.buying = false\n  };\n\n  onShopListConfirm = (shopid) => {\n    this.buying = false\n    this.shopid = shopid\n    this.mapEvent = [0, 0, 0, []]\n  };\n\n  render () {\n    return (\n      <div>\n        <img style={this.styles.hero} src=\"Characters/hero.png\"></img>\n        {this.buying && (\n          <ShopList\n            saveData={this.props.saveData}\n            onClose={this.onShopListClose}\n            onConfirm={this.onShopListConfirm}\n          />\n        )}\n        {this.shopid && (\n          <Shop\n            shopid={this.shopid}\n            saveData={this.props.saveData}\n            onClose={this.onShopClose}\n            onShopEvent={this.onShopEvent}\n          />\n        )}\n        {this.enemy && (\n          <Battle\n            enemy={this.enemy}\n            enemyId={this.enemyId}\n            hero={this.props.saveData.hero}\n            saveData={this.props.saveData}\n            onClose={this.onBattleClose}\n          />\n        )}\n        {this.showMenu && (\n          <Menu saveData={this.props.saveData} onClose={this.onMenuClose} />\n        )}\n        {this.talk && (\n          <Talks talk={this.talk} key={this.talk} onConfirm={this.onConfirm} />\n        )}\n        {this.msg && (\n          <Message\n            msg={this.msg}\n            key={this.msg}\n            onMessageClose={this.onMessageClose}\n          />\n        )}\n        {this.showEnemyInfo && (\n          <EnemyInfo\n            enemys={this.props.enemys}\n            saveData={this.props.saveData}\n            onClose={() => (this.showEnemyInfo = false)}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","\nimport { Component } from 'Engine'\n\nexport default class Status extends Component {\n  create () {\n    this.walls = []\n    for (let x = 0; x < 5; x++) {\n      for (let y = 0; y < 13; y++) {\n        if (x === 4 || y === 0 || y === 12) {\n          this.walls.push(<img src=\"terrains.png\" style={{ sx: 0, sy: 32 * 2, x: x * 32, y: y * 32, width: 32, height: 32 }}></img>)\n        }\n      }\n    }\n  }\n\n  render () {\n    const map = [\n      '魔塔',\n      this.props.map.name,\n      this.props.saveData.hero.lv,\n      this.props.saveData.hero.hp,\n      this.props.saveData.hero.atk,\n      this.props.saveData.hero.def,\n      this.props.saveData.hero.exp,\n      this.props.saveData.money,\n      this.props.saveData.items.yellowKey,\n      this.props.saveData.items.blueKey,\n      this.props.saveData.items.redKey,\n    ]\n    const size = 32\n    const offset = (32 - size) / 2\n    return (\n      <div style={{ fontSize: 24 }}>\n        {this.walls}\n        {map.map((value, index) => {\n          return <div style={{ y: (index + 1) * 32, wdith: 32, height: 32 }}>\n            <img src=\"icons.png\" style={{ x: offset, y: offset, sx: 0, sy: index * 32, wdith: size, height: size, swidth: 32, sheight: 32 }} />\n            <div style={{ x: 32, height: 32, width: 32 * 3 }}>{value}</div>\n          </div>\n        })}\n      </div>\n    )\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class ScrollText extends KeyEventComponent {\n  styles = {\n    text: {\n      fontSize: 20,\n      textAlign: 'left',\n      textBaseline: 'top',\n      x: 32,\n      y: 32 * 5,\n      width: 32 * 18,\n      height: 32 * 13,\n    },\n  };\n\n  create () {\n    const { text, bgm } = this.props.map\n    this.text = text.split('\\n')\n    window.$audio.play('bgm', bgm)\n  }\n\n  destroy () {\n    const bgm = this.props.map.bgm\n    window.$audio.pause('bgm', bgm)\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      if (this.ready) {\n        const { type, data } = this.props.map.event\n        if (type === 'mapLoad') {\n          this.props.onClose(data)\n        } else if (type === 'title') {\n          this.props.onTitle(data)\n        }\n      }\n    }\n  }\n\n  render () {\n    const size = 32\n    const style = this.styles.text\n    if (style.y > -32 * (this.text.length - 2)) {\n      const y = 1\n      style.y -= y\n    } else {\n      this.ready = true\n    }\n    return (\n      <div style={this.styles.text} onClick={this.onKeyDown}>\n        {this.text.map((text, index) => {\n          const optionStyle = {\n            y: index * size,\n          }\n          return <div style={optionStyle}>{text}</div>\n        })}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Hero from './Hero'\nimport Status from './Status'\nimport ScrollText from './ScrollText'\nexport default class Map extends Component {\n  tick = 0\n  interval = 10\n  styles = {\n    map: {\n      height: 32 * 13,\n      width: 32 * (13 + 5),\n      backgroundImage: 'ground.png',\n    },\n  }\n\n  create () {\n    const bgm = this.props.map.bgm\n    window.$audio.play('bgm', bgm)\n  }\n\n  destroy () {\n    const bgm = this.props.map.bgm\n    window.$audio.pause('bgm', bgm)\n  }\n\n  renderMapTerrains (status) {\n    const { mapTerrains } = this.props.map\n    const tick = this.tick\n    const terrains = []\n    if (!mapTerrains) {\n      return\n    }\n    mapTerrains.forEach((line, y) => {\n      line.forEach((value, x) => {\n        if (value) {\n          const info = window.$res.mapping[value]\n          const { type, name } = info\n          const detail = window.$res[type][name]\n          let sx = 0\n          if (info.type === 'animates') {\n            sx = tick % 4 * 32\n          }\n          const style = { sy: detail.sy * 32, sx, x: x * 32, y: y * 32, height: 32, width: 32 }\n          terrains.push(<img src={type + '.png'} style={style}/>)\n        } else {\n          return null\n        }\n      })\n    })\n    return terrains\n  }\n\n  renderMapEvents () {\n    const { mapId, destroy = {} } = this.props.saveData\n    const { mapEvents } = this.props.map\n    const tick = this.tick\n    const enemys = {}\n    this.enemys = enemys\n    if (mapEvents) {\n      return mapEvents.map((event) => {\n        const [x, y, value, events] = event\n        if (value) {\n          const info = window.$res.mapping[value]\n          if (info) {\n            const { type, name } = info\n            const detail = window.$res[type][name]\n            let sx = 0\n            if (type === 'npcs' || type === 'enemys') {\n              sx = tick % 2 * 32\n            }\n            // terrians items icons npcs enemys\n            if (destroy[[mapId, x, y]]) {\n              return null\n            }\n            if (type === 'enemys') {\n              enemys[name] = name\n            }\n            return <div style={{ x: x * 32, y: y * 32, height: 32, width: 32 }}>\n              <img src={type + '.png'} style={{ sy: detail.sy * 32, sx, height: 32, width: 32 }} />\n            </div>\n          } else {\n            debugger\n          }\n        }\n        return null\n      })\n    }\n  }\n\n  onRemoveMapEvent = (mapEvent) => {\n    const [x, y] = mapEvent\n    const mapId = this.props.saveData.mapId\n    this.props.saveData.destroy = this.props.saveData.destroy || {}\n    this.props.saveData.destroy[[mapId, x, y]] = 1\n  }\n\n  onTitle = () => {\n    this.props.onTitle()\n  }\n\n  render () {\n    this.interval--\n    if (this.interval === 0) {\n      this.tick++\n      this.interval = 10\n    }\n    const mapTerrains = this.renderMapTerrains()\n    const mapEvents = this.renderMapEvents()\n    return (\n      <div style={this.styles.map}>\n        <div style={{ x: 32 * 13, y: 0 }}>\n          <Status saveData={this.props.saveData} map={this.props.map}/>\n        </div>\n        {mapTerrains}\n        {mapEvents}\n        <Hero\n          mapTerrains={mapTerrains}\n          mapEvents={mapEvents}\n          saveData={this.props.saveData}\n          enemys={this.enemys}\n          map={this.props.map}\n          onLoadMap={this.props.onLoadMap}\n          removeMapEvent={this.onRemoveMapEvent}\n          onTitle={this.onTitle}\n        />\n      </div>\n    )\n  }\n}\n","import { formatText } from './utils'\n\nexport const loadImage = src => {\n  return new Promise(function (resolve, reject) {\n    const img = new Image()\n    img.addEventListener('load', () => resolve(img))\n    img.addEventListener('error', () => reject(img))\n    img.src = src\n  })\n}\n\nexport const loadSound = src => {\n  return new Promise(function (resolve, reject) {\n    const audio = new Audio()\n    audio.addEventListener('canplay', () => resolve(audio))\n    audio.addEventListener('error', () => reject(audio))\n    audio.src = src\n  })\n}\n\nexport function loadJSON (url) {\n  return fetch(url).then(data => data.json())\n}\n\nexport function loadText (url) {\n  return fetch(url).then(data => data.text()).then(data => formatText(data))\n}\n\nexport function checkFont (name, size = 16) {\n  return document.fonts.check(`${size}px ${name}`)\n}\n\nexport function loadFont ({ name, url }) {\n  if (checkFont(name)) {\n    return Promise.resolve()\n  }\n  const fontface = new FontFace(name, `url(\"${url}\")`)\n  document.fonts.add(fontface)\n  fontface.load()\n  return fontface.loaded\n}\n","import { loadImage, loadSound, loadJSON, loadFont, loadText } from './http'\n\nconst resource = {\n  images: {},\n  sounds: {},\n}\n\nwindow.$res = resource\n\nconst loaderMap = [\n  'game.json',\n  'save.json',\n  'shop.json',\n  'mapping.dat',\n]\n\nconst sprite = [\n  'enemys',\n  'items',\n  'animates',\n  'icons',\n  'npcs',\n  'terrains',\n  'boss',\n]\n\nconst arr3 = [].concat(loaderMap.map(v => `Data/${v}`), sprite.map(v => `Sprite/${v}.dat`))\n\nexport const loaderData = () => Promise.all(arr3.map(url => url.endsWith('.dat') ? loadText(`${url}`) : loadJSON(`${url}`)))\n  .then(([game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss]) => {\n    Object.assign(resource, { game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss })\n  })\n\nconst loadImages = () => {\n  const o = sprite.map(v => `Sprite/${v}.png`)\n  const o2 = ['Characters/hero.png', 'ground.png', 'Battlebacks/mota.jpg'].map(v => `Graph/${v}`)\n\n  return Promise.all([...o, ...o2].map(src => {\n    return new Promise((resolve) => {\n      loadImage(`${src}`).then((img) => {\n        src = src.replace('Graph/', '')\n        if (src.includes('Sprite')) {\n          src = src.split('/')[1]\n        }\n        resource.images[src] = img\n        resolve()\n      })\n    })\n  }))\n}\n\nexport const loaderImage = () => Promise.all([loadImages()])\nconst sounds = [\n  'bgm/terror.mp3',\n  'bgm/prologue.mp3',\n  'bgm/area1.mp3',\n  'bgm/area2.mp3',\n  'bgm/area3.mp3',\n  'enemy/redWizard.mp3',\n  'enemy/brownWizard.mp3',\n  'enemy/whiteKing.mp3',\n  'enemy/blackMagician.mp3',\n  'se/attack.mp3',\n  'se/floor.mp3',\n  'se/door.mp3',\n  'se/buy.mp3',\n  'se/item.mp3',\n  'se/dialogue.mp3',\n  'se/unlockCtrl.mp3',\n  'se/step.mp3',\n  'se/constants.mp3',\n  'se/sell.mp3',\n  'se/load.mp3',\n]\n\nexport const loaderMusic = () => Promise.all([\n  loadSounds(sounds),\n  // loadSounds(sounds.sounds),\n])\n\nexport const loaderFont = (font) => {\n  return loadFont(font)\n}\n\nconst loadSounds = data => {\n  return Promise.all(data.map(sound => loadSound(`Audio/${sound}`))).then(audioes => {\n    audioes.forEach((audio, i) => (resource.sounds[data[i]] = audio))\n  })\n}\n\nexport const loadMap = mapId => {\n  return loadJSON(`Maps/${mapId}.json`)\n}\n","import { Component } from 'Engine'\nimport FPS from './Mota/FPS'\nimport Loading from './Mota/Loading'\nimport Title from './Mota/Title'\nimport Map from './Mota/Map'\nimport ScrollText from './Mota/ScrollText'\nimport { loaderData, loaderMusic, loaderImage, loadMap, loaderFont } from './loader'\n\nexport default class Game extends Component {\n  styles = {\n    app: {\n      height: 32 * 13,\n      width: 32 * 18,\n      textAlign: 'center',\n      textBaseline: 'middle',\n    },\n  };\n\n  async loadFont () {\n    this.loading = '加载字体'\n    const font = window.$res.game.font\n    await loaderFont(font)\n    this.styles.app.fontFamily = font.name\n  }\n\n  async create () {\n    this.loading = '加载数据'\n    await loaderData()\n    this.loading = '加载图片'\n    await loaderImage()\n    this.loading = '加载音乐'\n    await loaderMusic()\n    this.loading = false\n\n    this.saveData = window.$res.save\n  }\n\n  onLoadMap = async (data) => {\n    this.loading = '加载地图'\n    Object.assign(this.saveData, data)\n    this.map = await loadMap(this.saveData.mapId)\n    this.loading = false\n    this.randMapKey = `${this.saveData.mapId} ${new Date()}`\n  };\n\n  onTitle = () => {\n    this.map = null\n  }\n\n  render () {\n    return <div style={this.styles.app}>\n        {\n          this.loading\n            ? <Loading msg={this.loading} />\n            : this.map\n              ? this.map.text\n                ? <ScrollText map={this.map} onClose={this.onLoadMap} onTitle={this.onTitle}></ScrollText>\n                : <Map\n                  map={this.map}\n                  key={this.randMapKey}\n                  onLoadMap={this.onLoadMap}\n                  saveData={this.saveData}\n                  onEvent={this.onEvent}\n                />\n              : <Title onLoadMap={this.onLoadMap} />\n        }\n        <FPS />\n      </div>\n  }\n}\n","import Engine from './Engine'\nimport Game from './Game'\n// eslint-disable-next-line no-new\nnew Engine(Game)\n"],"names":["createNode","tag","props","children","curFoucs","Component","constructor","$children","$c","$destroy","KeyEventComponent","argu","$isFocus","$preFocus","destroy","fontFamily","document","fonts","check","baseStyle","direction","color","filter","fontSize","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","isPrimitive","value","type","isFunc","f","isArray","a","Array","isUndefined","o","undefined","getImage","src","window","$res","images","moveEvent","mouseEvents","keyEvents","UI","screen","canvas","createElement","context","getContext","el","width","height","dom","querySelector","body","appendChild","mergeStyle","bind","forEach","name","addEventListener","toLowerCase","e","push","preventDefault","passive","toDataURL","style","fillStyle","replace","clearRect","drawText","node","offsetX","offsetY","text","x","y","fillText","drawImage","sx","sy","swidth","sheight","drawBack","backgroundImage","backgroundColor","save","beginPath","rect","fill","closePath","restore","createPattern","drawBorder","borderWidth","borderColor","stroke","translate","box","transform","rotate","scale","angle","Math","PI","scaleX","scaleY","drawCircle","cx","cy","r","sAngle","eAngle","counterclockwise","strokeWidth","arc","drawLine","x1","y1","x2","y2","moveTo","lineTo","drawRect","parent","renderRect","renderPrimitive","start","left","center","right","end","alphabetic","hanging","ideographic","top","middle","bottom","renderNode","event","onMouseMove","onMouseClick","runEvent","onClick","moveEventTarget","render","root","self","$root","Audio","current","audioes","sounds","control","loop","play","pause","createInstance","next","Class","instance","create","destoryInstance","pre","length","pop","updateInstance","patchNode","key","preChildren","nextChildren","i","Engine","Game","$resource","Object","$state","$foucs","$audio","ui","gameStart","location","protocol","alert","navigator","userAgent","match","RegExp","$1","gameStop","cancelAnimationFrame","ident","frame","keyFrame","requestAnimationFrame","FPS","fps","styles","timeStamp","Date","min","warn","toFixed","Loading","step","sin","msg","Select","select","activeIndex","assign","onKeyDown","code","options","onChange","onConfirm","onClose","index","size","map","item","optionStyle","setStorage","localStorage","setItem","JSON","stringify","getStorage","parse","getItem","saveGame","saveData","loadGame","Title","title","gameName","isLoad","onLoadMap","itemOption","statusOption","loadGameOption","saveGameOption","detailOption","Menu","tick","menu","detail","Shop","shop","shopid","need","effect","choices","onShopEvent","split","Battle","battle","enemy","hero","battleMsg","hostname","hp","turn","atk","def","exp","money","proprety","heroImageStyle","enemyImageStyle","vsStyle","msgStyle","Talk","talk","talks","substr","leftStyle","rightStyle","calcLength","str","len","charCodeAt","Message","onMessageClose","Hero","enemys","keys","enemyId","cost","atkCount","floor","ShopList","shops","entries","isCoincided","A","B","updateVector","vector","obj","assignVector","convertPropertyStr","arr","unshift","propertyStr","properties","v","formatText","data","shift","row","trim","id","includes","isNaN","Number","propertyNames","lv","position","isCoincidedTerrains","heroStyle","mapTerrains","findIndex","isCoincidedEvents","mapEvents","styleHero","moveVector","showEnemyInfo","buying","console","log","terrain","eventIndex","handleEvents","onShopClose","setEvent","mapEvent","info","mapping","items","remove","updateSaveData","property","propertyName","slice","removeMapEvent","onTitle","mapId","condition","true","trueEvent","false","falseEvent","checkSaveData","error","onBattleClose","onMenuClose","showMenu","gets","n","some","onShopListClose","onShopListConfirm","Talks","EnemyInfo","Status","walls","yellowKey","blueKey","redKey","offset","wdith","ScrollText","bgm","ready","Map","interval","renderMapTerrains","status","terrains","line","renderMapEvents","events","onRemoveMapEvent","loadImage","Promise","resolve","reject","img","Image","loadSound","audio","loadJSON","url","fetch","then","json","loadText","checkFont","loadFont","fontface","FontFace","add","load","loaded","resource","loaderMap","sprite","arr3","concat","loaderData","all","endsWith","game","animates","icons","npcs","boss","loadImages","o2","loaderImage","loaderMusic","loadSounds","loaderFont","sound","loadMap","app","loading","randMapKey","onEvent"],"mappings":"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"}