{"version":3,"file":"bundle.js","sources":["../src/Engine/core/createNode.js","../src/Engine/core/Component.js","../src/Engine/const/baseStyle.js","../src/Engine/utils/common.js","../src/Engine/core/UI.js","../src/Engine/core/Audio.js","../src/Engine/core/patchNode.js","../src/Game/Mota/FPS.jsx","../src/Game/Mota/Loading.jsx","../src/Game/Mota/Select.jsx","../src/Game/sl.js","../src/Engine/utils/storage.js","../src/Game/Mota/Title.jsx","../src/Game/Mota/Menu.jsx","../src/Game/Mota/Shop.jsx","../src/Game/Mota/Battle.jsx","../src/Game/Mota/Talks.jsx","../src/Game/Mota/Message.jsx","../src/Engine/utils/string.js","../src/Game/Mota/EnemyInfo.jsx","../src/Game/Mota/ShopList.jsx","../src/Game/physics.js","../src/Game/utils.js","../src/Game/Mota/Hero.jsx","../src/Game/Mota/Status.jsx","../src/Game/Mota/ScrollText.jsx","../src/Game/Mota/Map.jsx","../src/Game/http.js","../src/Game/loader.js","../src/index.js","../src/Engine/Engine.js","../src/Game/index.jsx"],"sourcesContent":["export function createNode (tag, props, ...children) {\n  return {\n    tag,\n    props,\n    children,\n  }\n}\n","import { createNode } from './createNode'\nlet curFoucs = null\nexport { curFoucs }\nexport class Component {\n  constructor ({ props, children }) {\n    this.props = props\n    this.$children = children\n  }\n\n  $c = createNode\n  $destory () { }\n}\n\nexport class KeyEventComponent extends Component {\n  constructor (...argu) {\n    super(...argu)\n    if (curFoucs) {\n      curFoucs.$isFocus = false\n    }\n    this.$isFocus = true\n    this.$preFocus = curFoucs\n    curFoucs = this\n  }\n\n  destory () {\n    this.$isFocus = false\n    if (this.$preFocus) {\n      this.$preFocus.$isFocus = true\n    }\n    curFoucs = this.$preFocus\n  }\n}\n","const fontFamily = document.fonts.check('16px 黑体') ? '黑体' : '黑体-简'\n\nexport const baseStyle = {\n  direction: 'ltr',\n  color: 'white',\n  // filter: \"grayscale(.1)\",\n  filter: 'none',\n  fontSize: 32,\n  font: '32px ' + fontFamily,\n  globalAlpha: 1,\n  globalCompositeOperation: 'source-over',\n  // imageSmoothingEnabled: true,\n  // imageSmoothingQuality: 'low',\n  imageSmoothingEnabled: false,\n  lineCap: 'butt',\n  lineDashOffset: 0,\n  lineJoin: 'miter',\n  lineWidth: 1,\n  miterLimit: 10,\n  shadowBlur: 0,\n  shadowColor: 'rgba(0, 0, 0, 0)',\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  strokeStyle: 'white',\n  textAlign: 'start',\n  // textBaseline: \"alphabetic\",\n  textBaseline: 'top',\n}\n","export const isPrimitive = (value) => {\n  const type = typeof value\n  return type === 'string' || type === 'number'\n}\n\nexport const isFunc = (f) => typeof f === 'function'\n\nexport const isArray = (a) => Array.isArray(a)\n\nexport const isUndefined = (o) => o === undefined || o === null\n","import { baseStyle } from '../const/baseStyle'\nimport { isPrimitive, isFunc, isArray } from '../utils/common'\nimport { curFoucs } from './Component'\nconst getImage = (src) => window.$res.images[src]\n\nconst moveEvent = 'MouseMove'\nconst mouseEvents = ['ContextMenu', 'Click', 'Wheel', moveEvent]\n\nconst moveEventTarget = null\nconst mouseClickEventTarget = null\n//  \"MouseDown\", \"MouseUp\"\nconst keyEvents = ['KeyDown', 'KeyUp']\n\nexport default class UI {\n  constructor (screen = {}) {\n    const canvas = document.createElement('canvas')\n    this.canvas = canvas\n    this.context = canvas.getContext('2d')\n    const { el, width = 32 * (13 + 5), height = 32 * 13 } = screen\n    this.screen = screen\n    this.canvas.width = width\n    this.canvas.height = height\n    const dom = document.querySelector(el) || document.body\n    dom && dom.appendChild(this.canvas)\n    this.mergeStyle(baseStyle)\n\n    this.mouseEvents = []\n    this.keyEvents = []\n    this.bind()\n  }\n\n  bind () {\n    mouseEvents.forEach((name) => {\n      this.canvas.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.mouseEvents.push(e)\n        e.preventDefault()\n      }, { passive: false })\n    })\n\n    // const name = moveEvent\n    // this.canvas.addEventListener(name.toLowerCase(), (e) => {\n    //   e.name = 'on' + name\n    //   this.moveEvent = e\n    //   e.preventDefault()\n    // }, { passive: false })\n\n    keyEvents.forEach((name) => {\n      document.addEventListener(name.toLowerCase(), (e) => {\n        e.name = 'on' + name\n        this.keyEvents = e\n      })\n    })\n  }\n\n  toDataURL () {\n    return this.canvas.toDataURL()\n  }\n\n  mergeStyle = style => {\n    if (style) {\n      const { fontSize, fontFamily, font, textAlign, textBaseline, color, globalAlpha } = style\n      if (globalAlpha) {\n        this.context.globalAlpha = globalAlpha\n      }\n      if (textAlign) {\n        this.context.textAlign = textAlign\n      }\n      if (textBaseline) {\n        this.context.textBaseline = textBaseline\n      }\n      if (color) {\n        this.context.fillStyle = color\n      }\n      if (font) {\n        this.context.font = font\n      }\n      if (fontSize) {\n        this.context.font = this.context.font.replace(/\\d+/, fontSize)\n      }\n      if (fontFamily) {\n        this.context.font = this.context.font.replace(/[\\u4e00-\\u9fa5]+/, fontFamily)\n      }\n    }\n  };\n\n  clearRect () {\n    const { context, canvas } = this\n    context.clearRect(0, 0, canvas.width, canvas.height)\n  }\n\n  drawText (node, offsetX, offsetY) {\n    const { style, text } = node\n    const { context } = this\n    const { x = 0, y = 0 } = style\n    context.fillText(text, offsetX + x, offsetY + y)\n  }\n\n  drawImage (node, offsetX, offsetY) {\n    const { props } = node\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { sx = 0, sy = 0, width = 32, height = 32, swidth, sheight } = style\n        const { context } = this\n        context.drawImage(getImage(props.src), sx, sy, swidth || width, sheight || height, offsetX, offsetY, width, height)\n      }\n    }\n  }\n\n  drawBack (node, offsetX, offsetY) {\n    const { context } = this\n    const { backgroundImage, backgroundColor, height, width } = node.props.style\n    if (backgroundColor) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = backgroundColor\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n    if (backgroundImage) {\n      context.save()\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      context.fillStyle = context.createPattern(getImage(backgroundImage), 'repeat')\n      context.fill()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  drawBorder (node, offsetX, offsetY) {\n    const { context } = this\n    const { borderWidth, borderColor, height, width } = node.props.style\n    if (borderWidth) {\n      context.save()\n      context.lineWidth = borderWidth\n      context.beginPath()\n      context.rect(offsetX, offsetY, width, height)\n      if (borderColor) {\n        context.strokeStyle = borderColor\n      }\n      context.stroke()\n      context.closePath()\n      context.restore()\n    }\n  }\n\n  translate (box) {\n    const { context } = this\n    const { style } = box\n    const { x = 0, y = 0 } = style\n    context.translate(x, y)\n  }\n\n  transform (box) {\n    const { context } = this\n    const { rotate, scale } = box\n    if (rotate) {\n      const { angle = 0, x = 0, y = 0 } = rotate\n      context.translate(x, y)\n      context.rotate(angle * Math.PI / 180)\n      context.translate(-x, -y)\n    }\n    if (scale) {\n      const { x = 0, y = 0, scaleX = 1, scaleY = 1 } = scale\n      context.translate(x, y)\n      context.scale(scaleX, scaleY)\n      context.translate(-x, -y)\n    }\n  }\n\n  drawCircle (node, offsetX, offsetY) {\n    const { context } = this\n    context.save()\n    context.beginPath()\n    const { cx, cy, r, sAngle, eAngle, counterclockwise = false, stroke, strokeWidth } = node.props\n    context.arc(cx + offsetX, cy + offsetY, r, sAngle / 180 * Math.PI, eAngle / 180 * Math.PI, counterclockwise)\n    context.strokeStyle = stroke\n    context.lineWidth = strokeWidth\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  drawLine (node) {\n    const { context } = this\n    const { x1 = 0, y1 = 0, x2 = 200, y2 = 200 } = node.props\n    context.beginPath()\n    context.moveTo(x1, y1)\n    context.lineTo(x2, y2)\n    context.stroke()\n  }\n\n  drawRect (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props, tag } = node\n    if (props) {\n      const { style } = props\n      this.mergeStyle(style)\n      if (style) {\n        this.drawBack(node, offsetX, offsetY)\n        this.drawBorder(node, offsetX, offsetY)\n      }\n    }\n    if (tag === 'img') {\n      this.drawImage(node, offsetX, offsetY)\n    } else if (tag === 'text') {\n      this.drawText(node, offsetX, offsetY)\n    } else if (tag === 'circle') {\n      this.drawCircle(node, offsetX, offsetY)\n    } else if (tag === 'line') {\n      this.drawLine(node, offsetX, offsetX)\n    }\n    this.renderRect(node.children, offsetX, offsetY, node)\n    context.restore()\n  }\n\n  renderPrimitive (text, offsetX, offsetY, parent) {\n    const { context } = this\n    const { textAlign, textBaseline } = context\n    const { width = 0, height = 0 } = parent?.props?.style || {}\n    const x = { start: 0, left: 0, center: 0.5, right: 1, end: 0 }\n    const y = { alphabetic: 0, hanging: 0, ideographic: 0, top: 0, middle: 0.5, bottom: 1 }\n    // start 默认。文本在指定的位置开始。\n    // end 文本在指定的位置结束。\n    // center 文本的中心被放置在指定的位置。\n    // left 文本在指定的位置开始。\n    // right 文本在指定的位置结束。\n\n    // alphabetic 默认。文本基线是普通的字母基线。\n    // top 文本基线是 em 方框的顶端。\n    // hanging 文本基线是悬挂基线。\n    // middle 文本基线是 em 方框的正中。\n    // ideographic 文本基线是表意基线。\n    // bottom 文本基线是 em 方框的底端。\n    context.fillText(text, offsetX + width * x[textAlign], offsetY + height * y[textBaseline])\n  }\n\n  renderRect (node, offsetX, offsetY, parent) {\n    if (node !== null && node !== undefined) {\n      if (isArray(node)) {\n        node.forEach(node => this.renderRect(node, offsetX, offsetY, parent))\n      } else if (isPrimitive(node)) {\n        this.renderPrimitive(node, offsetX, offsetY, parent)\n      } else if (isFunc(node.tag)) {\n        this.renderRect(node.node, offsetX, offsetY, parent)\n      } else {\n        this.renderNode(node, offsetX, offsetY, parent)\n      }\n    }\n  }\n\n  renderNode (node, offsetX, offsetY, parent) {\n    const { context } = this\n    context.save()\n    const { props } = node\n\n    if (props) {\n      const { style } = props\n      if (style) {\n        const { x = 0, y = 0 } = style\n        offsetX += x\n        offsetY += y\n        this.mouseEvents.forEach((event) => {\n          const { name } = event\n          if (event.offsetX >= offsetX && event.offsetX < style.width + offsetX && event.offsetY >= offsetY && event.offsetY < style.height + offsetY) {\n            if (name === 'onMouseMove') {\n              this.onMouseMove = { node, event }\n            } else if (name === 'onClick') {\n              this.onMouseClick = { node, event }\n            }\n          }\n        })\n      }\n    }\n\n    this.drawRect(node, offsetX, offsetY, parent)\n\n    context.restore()\n  }\n\n  runEvent () {\n    if (curFoucs && this.keyEvents) {\n      const { name } = this.keyEvents\n      curFoucs[name] && curFoucs[name](this.keyEvents)\n    }\n    this.keyEvents = null\n    // if (this.moveEventTarget && this.moveEvent) {\n    //   if (moveEventTarget !== this.moveEventTarget) {\n    //     if (moveEventTarget) {\n    //       moveEventTarget.props.onMouseLeave && moveEventTarget.props.onMouseLeave()\n    //     }\n    //     moveEventTarget = this.moveEventTarget\n    //     moveEventTarget.props.onMouseEnter && moveEventTarget.props.onMouseEnter()\n    //   }\n    // }\n    if (this.onMouseClick) {\n      const { node, event } = this.onMouseClick\n      if (node?.props?.onClick) {\n        node.props.onClick(event)\n      }\n      this.onMouseClick = null\n    }\n    this.mouseEvents = []\n    this.moveEvent = null\n    this.moveEventTarget = null\n  }\n\n  render (root) {\n    this.clearRect()\n    this.renderRect(root, 0, 0, this.canvas)\n    this.runEvent()\n    self.$root = root\n  }\n}\n","export default class Audio {\n  current = null\n  constructor (audioes) {\n    this.audioes = audioes || window.$res.sounds\n  }\n\n  play (type, name) {\n    this.audioes = window.$res.sounds\n    if (type === 'bgm') {\n      if (this.current) {\n        this.current.pause()\n      }\n    }\n\n    this.current = this.audioes[`${type}/${name}`]\n    this.current.loop = true\n    this.current.play()\n  }\n}\n","import { isFunc, isPrimitive, isArray, isUndefined } from '../utils/common'\n\nfunction createInstance (next) {\n  const Class = next.tag\n  next.instance = new Class(next)\n  next.instance.create && next.instance.create()\n  renderNode(next)\n}\n\nfunction destoryInstance (pre) {\n  if (!isPrimitive(pre) && !isUndefined(pre)) {\n    if (isFunc(pre.tag)) {\n      destoryInstance(pre.node)\n      pre.instance.destory && pre.instance.destory()\n    } else if (Array.isArray(pre)) {\n      while (pre.length) {\n        destoryInstance(pre.pop())\n      }\n    } else {\n      destoryInstance(pre.children)\n    }\n  }\n}\n\nfunction updateInstance (pre, next) {\n  next.instance = pre.instance\n  next.node = pre.node\n  next.instance.props = next.props\n  renderNode(next)\n}\n\nfunction renderNode (next) {\n  const instance = next.instance\n  next.node = patchNode(next.node, instance.render())\n}\n\nexport function patchNodeBak (pre, next) {\n  if (isPrimitive(next) || isUndefined(pre)) {\n    destoryInstance(pre)\n  } else if (this) {\n    //\n  }\n}\n\nexport function patchNode (pre, next) {\n  if (pre) {\n    if (next) {\n      if (isFunc(next.tag)) {\n        if (pre.tag === next.tag && (pre.props?.key === next.props?.key)) {\n          updateInstance(pre, next)\n        } else {\n          destoryInstance(pre)\n          createInstance(next)\n        }\n      }\n    } else {\n      destoryInstance(pre)\n    }\n  } else {\n    if (next) {\n      if (isFunc(next.tag)) {\n        createInstance(next)\n      }\n    }\n  }\n\n  const preChildren = (pre || {}).children || []\n  const nextChildren = (next || {}).children || []\n  const length = Math.max(preChildren.length, nextChildren.length)\n  for (let i = 0; i < length; i++) {\n    patchNode(preChildren[i], nextChildren[i])\n  }\n\n  return next\n}\n","\nimport { Component } from 'Engine'\nexport default class FPS extends Component {\n  fps = 60\n  styles = {\n    fps: {\n      textAlign: 'left',\n      height: 32,\n      x: 0,\n    },\n  }\n\n  timeStamp = +new Date();\n  render () {\n    const timeStamp = +new Date()\n    const fps = (1000 / (timeStamp - this.timeStamp))\n    const min = 30\n    const warn = this.fps < min && fps < min\n    this.fps = fps\n    this.timeStamp = timeStamp\n    return (\n      <div style={this.styles.fps}>\n        {warn ? `${this.fps.toFixed()}fps` : null}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nexport default class Loading extends Component {\n  step = 1\n  angle = -this.step\n  render () {\n    this.angle += this.step\n    if (this.angle > 180) {\n      this.angle = 0\n    }\n    const sAngle = this.angle * 2 - 90\n    const eAngle = Math.sin(this.angle / 180 * Math.PI) * 45\n    const width = 32 * (13 + 5)\n    const height = 32 * 13\n    return <div style={{ x: 0, y: 0, width, height }}>\n      {this.props.msg}\n      <circle cx={width / 2} cy={height / 2} r={32 * 3} sAngle={sAngle - eAngle} eAngle={sAngle + eAngle} stroke=\"#4e6ef2\" strokeWidth={10} />\n    </div>\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Select extends KeyEventComponent {\n  styles = {\n    select: {\n      fontSize: 24,\n      textAlign: 'center',\n      width: 320,\n    },\n  }\n\n  create () {\n    this.activeIndex = this.props.activeIndex || 0\n    const { style } = this.props\n    if (style) {\n      Object.assign(this.styles.select, style)\n    }\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'ArrowDown') {\n      this.activeIndex++\n      if (this.activeIndex === this.props.options.length) {\n        this.activeIndex = 0\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'ArrowUp') {\n      this.activeIndex--\n      if (this.activeIndex === -1) {\n        this.activeIndex += this.props.options.length\n      }\n      this.props.onChange && this.props.onChange(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Space') {\n      this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n    } else if (code === 'Escape') {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  onClick (index) {\n    this.activeIndex = index\n    this.props.onConfirm && this.props.onConfirm(this.activeIndex, this.props.options[this.activeIndex])\n  }\n\n  render () {\n    const size = 32\n    const borderWidth = 2\n    const select = this.styles.select\n    const { width } = select\n\n    return (\n      <div style={this.styles.select}>\n        {\n          this.props.options && this.props.options.length\n            ? this.props.options.map((item, index) => {\n              const { text } = item\n              const optionStyle = {\n                y: index * size,\n                height: size,\n                width: width,\n                borderWidth: this.activeIndex === index ? borderWidth : 0,\n                borderColor: '#ccc',\n              }\n              return (\n                <div style={optionStyle} onClick={() => this.onClick(index)} onMouseLeave={(e) => { this.activeIndex = -1 }} onMouseEnter={(e) => { this.activeIndex = index }}>\n                  {text}\n                </div>\n              )\n            })\n            : '空空如也'}\n      </div>\n    )\n  }\n}\n","import { setStorage, getStorage } from 'Engine/utils/storage'\n\nexport function saveGame (saveData) {\n  return setStorage('game', saveData)\n}\n\nexport function loadGame () {\n  return getStorage('game')\n}\n","export function setStorage (key, value) {\n  return localStorage.setItem(key, JSON.stringify(value))\n}\n\nexport function getStorage (key) {\n  try {\n    return JSON.parse(localStorage.getItem(key))\n  } catch (e) {\n    return null\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nimport { loadGame } from '../sl'\n\nexport default class Title extends Component {\n  styles = {\n    title: {\n      width: 32 * (13 + 5),\n      height: 32 * 13,\n    },\n    gameName: {\n      y: 40,\n      width: 32 * (13 + 5),\n      height: 128,\n      font: 'bold 128px 黑体',\n    },\n    select: {\n      x: 16 * 16,\n      y: 32 * 8,\n      width: 64,\n    },\n  }\n\n  create () {\n    this.activeIndex = loadGame() ? 1 : 0\n    this.options = [\n      {\n        text: '开始',\n      },\n      {\n        text: '继续',\n      },\n    ]\n  }\n\n  onConfirm = (isLoad) => {\n    this.saveData = Object.assign(\n      window.$res.save,\n      isLoad ? loadGame() : null,\n    )\n    this.props.onLoadMap()\n  }\n\n  render () {\n    return (\n      <div style={this.styles.title}>\n        <div style={this.styles.gameName}>魔塔</div>\n        <Select activeIndex={this.activeIndex} options={this.options} style={this.styles.select} onConfirm={this.onConfirm}></Select>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport { loadGame, saveGame } from '../sl'\nimport Select from './Select'\nconst options = [\n  { text: '物品' },\n  { text: '技能' },\n  { text: '装备' },\n  { text: '状态' },\n]\n\nconst itemOption = []\nconst statusOption = []\nconst loadGameOption = [{ text: 12233 }]\nconst saveGameOption = [{ text: 1 }, { text: 2 }, { text: 3 }, { text: 4 }]\n\nconst detailOption = [itemOption, statusOption, itemOption, itemOption, loadGameOption, saveGameOption]\nexport default class Menu extends Component {\n  activeIndex = -1\n  tick = 0\n  create () {\n    this.styles = {\n      menu: {\n        width: 32 * 18,\n        height: 32 * 13,\n        backgroundColor: 'rgba(0,0,0,.6)',\n      },\n      detail: {\n        x: 32 * 4,\n        width: 32 * 9,\n        height: 32 * 13,\n        borderWidth: 2,\n      },\n      select: {\n        width: 32 * 4,\n      },\n    }\n  }\n\n  onConfirm = (activeIndex) => {\n    this.activeIndex = activeIndex\n  }\n\n  render () {\n    return <div style={this.styles.menu}>\n      <Select options={options} style={this.styles.select} onConfirm={this.onConfirm} onClose={this.props.onClose} />\n\n      {\n        this.activeIndex === -1\n          ? null\n          : <Select options={detailOption[this.activeIndex]} style={this.styles.detail} onConfirm={this.onConfirm} onClose={() => { this.activeIndex = -1 }} />\n      }\n    </div>\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class Shop extends Component {\n  styles = {\n    shop: {\n      x: 2 * 32,\n      y: 2 * 32,\n      height: 32 * 7,\n      width: 32 * 9,\n\n      fontSize: 24,\n      borderWidth: 4,\n      borderColor: '#deb887',\n      textAlign: 'center',\n      backgroundImage: 'ground.png',\n    },\n    title: {\n      x: 16 * 9,\n      y: 16,\n    },\n    text: {\n      x: 0,\n      y: 48,\n      fontSize: 14,\n    },\n    select: {\n      x: 32 * 2,\n      y: 112,\n      width: 32 * 5,\n      fontSize: 16,\n    },\n  }\n\n  create () {\n    this.shop = window.$res.shop[this.props.shopid]\n  }\n\n  onConfirm = (index) => {\n    const { need, effect } = this.shop.choices[index]\n    this.props.onShopEvent(need, effect)\n  }\n\n  render () {\n    return (\n      <div style={this.styles.shop}>\n        <div style={this.styles.title}>{this.shop.title}</div>\n        <div style={this.styles.text}>\n          {this.shop.text.split(/\\n/).map((text, index) => <div style={{ x: 16 * 9, y: index * 16 }}>{text}</div>)}\n        </div>\n        <Select options={this.shop.choices} onConfirm={this.onConfirm} style={this.styles.select} onClose={this.props.onClose}></Select>\n      </div>\n    )\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Battle extends KeyEventComponent {\n  tick = 0\n  styles = {\n    battle: {\n      x: 48,\n      y: 48,\n      width: 32 * 15,\n      height: 32 * 10,\n      fontSize: 16,\n      borderWidth: 3,\n      borderColor: '#deb887',\n      font: '32px sans-serif',\n      swidth: 640,\n      sheight: 320,\n    },\n    enemy: {\n      x: 32 * 1,\n      y: 32 * 1,\n    },\n    hero: {\n      x: 32 * 10,\n      y: 32 * 1,\n    },\n  }\n\n  create () {\n    this.enemy = JSON.parse(JSON.stringify(this.props.enemy))\n    this.hero = this.props.hero\n  }\n\n  onKeyDown () {\n    if (this.battleMsg) {\n      this.props.onClose && this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemy = this.enemy\n    const hero = this.hero\n    const tick = location.hostname === 'localhost' ? 1 : 5\n    if (enemy.hp > 0) {\n      this.tick++\n      if (this.tick === tick) {\n        if (this.turn) {\n          const atk = enemy.atk - hero.def\n          if (atk > 0) {\n            hero.hp -= atk\n          }\n        } else {\n          const atk = hero.atk - enemy.def\n          if (atk > 0) {\n            enemy.hp -= atk\n          }\n          if (enemy.hp <= 0) {\n            enemy.hp = 0\n            const { exp, money } = enemy\n            hero.exp += exp\n            this.props.saveData.money += money\n            this.battleMsg = `战斗胜利，获得${money}金币，${exp}经验`\n          }\n        }\n        this.turn = !this.turn\n        this.tick = 0\n      }\n    }\n\n    const proprety = [{ text: '名称', key: 'name' }, { text: '生命', key: 'hp' }, { text: '攻击', key: 'atk' }, { text: '防御', key: 'def' }]\n    const heroImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: 0 }\n    const enemyImageStyle = { x: 32, y: 32 * 4.5, swidth: 32, sheight: 32, width: 64, height: 64, sy: enemy.sy * 32 }\n    const size = 64\n    const vsStyle = { font: `bold ${size}px sans-serif`, x: 32 * (5 + 1.5), y: 32 * 2, height: size, width: size }\n    const msgStyle = { fontSize: 24, height: 32, y: 32 * 8, width: 32 * 15 }\n    return <img src=\"Battlebacks/mota.jpg\" style={this.styles.battle}>\n      {this.battleMsg && <div style={msgStyle}>{this.battleMsg}</div>}\n      <div style={this.styles.enemy}>\n        <img src=\"enemys.png\" style={enemyImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{item.text}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{enemy[item.key]}</div>\n          </div>\n        })}\n      </div>\n      <div style={vsStyle}>VS</div>\n      <div style={this.styles.hero}>\n        <img src=\"Characters/hero.png\" style={heroImageStyle} />\n        {proprety.map((item, index) => {\n          return <div style={{ x: 0 * 32, y: index * 32 }}>\n            <div style={{ width: 32 * 4, textAlign: 'left', height: 32 }}>{hero[item.key]}</div>\n            <div style={{ width: 32 * 4, textAlign: 'right', height: 32 }}>{item.text}</div>\n          </div>\n        })}\n      </div>\n    </img>\n  }\n}\n","import { Component, KeyEventComponent } from 'Engine'\n\nexport default class Talk extends KeyEventComponent {\n  width = 7\n  styles = {\n    talk: {\n      width: 32 * this.width,\n      height: 32 * 1,\n      backgroundColor: 'black',\n      borderWidth: 2,\n      borderColor: 'white',\n      fontSize: 16,\n      textAlign: 'left',\n      textBaseline: 'middle',\n    },\n  }\n\n  index = 0\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      this.index++\n      if (this.index === this.props.talk.length) {\n        this.props.onConfirm()\n      } else {\n        this.create()\n      }\n    }\n  }\n\n  create () {\n    this.turn = !this.turn\n    const talks = this.props.talk[this.index].split(/\\n/)\n    this.current = []\n    talks.forEach((talk) => {\n      for (let i = 0; i < talk.length; i = i + 7 * 2) {\n        this.current.push(talk.substr(i, 7 * 2))\n      }\n    })\n\n    const leftStyle = {\n      x: 32 * 2,\n      y: 32 * 2,\n      height: 32 * this.current.length,\n    }\n    const rightStyle = {\n      x: 32 * 4,\n      y: 32 * 6,\n      height: 32 * this.current.length,\n    }\n    Object.assign(this.styles.talk, this.turn ? leftStyle : rightStyle)\n  }\n\n  render () {\n    return <div style={this.styles.talk}>\n      {this.current.map((talk, index) => {\n        return <div style={{ x: 0, y: 32 * index, width: 32 * this.width, height: 32 }}>{talk}</div>\n      })}\n    </div>\n  }\n}\n","import { Component } from 'Engine'\nimport { calcLength } from '../../Engine/utils/string'\n\nexport default class Message extends Component {\n  create () {\n    if (this.props) {\n      this.tick = this.props.tick || 120\n    }\n    this.length = calcLength(this.props.msg)\n    this.msg = this.props.msg\n  }\n\n  render () {\n    this.tick--\n    if (this.tick === 0) {\n      this.props.onMessageClose()\n      return null\n    }\n    let globalAlpha = 1\n    if (this.tick < 30) {\n      globalAlpha = this.tick / 30\n    }\n    const fontSize = 18\n    const style = { textAlign: 'left', fontSize, backgroundColor: 'rgba(0,0,0,.7)', globalAlpha, x: 0, y: 0, height: 32, width: fontSize / 2 * this.length + 10 }\n    return <div style={style}>\n      <div style={{ x: 5, height: 32 }}>{this.msg}</div>\n    </div>\n  }\n}\n","export function calcLength (str) {\n  let len = 0\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      len += 2\n    } else {\n      len += 1\n    }\n  }\n  return len\n}\n\nexport function splitStringByWidth (str, w) {\n  let len = 0\n  let start = 0\n  const re = []\n  let i = 0\n  for (; i < str.length; i++) {\n    let c = 0\n    if (str.charCodeAt(i) > 127) {\n      c = 2\n    } else {\n      c = 1\n    }\n    len += c\n    if (len > w) {\n      re.push(str.substring(start, i))\n      start = i\n      len = c\n    }\n  }\n  re.push(str.substring(start, i))\n  return re\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class Hero extends KeyEventComponent {\n  onKeyDown ({ code }) {\n    if (code === 'KeyX') {\n      this.props.onClose()\n    }\n  }\n\n  render () {\n    const enemys = Object.keys(this.props.enemys)\n    return (\n      <div\n        style={{\n          textAlign: 'left',\n          fontSize: 16,\n          backgroundColor: 'rgba(0,0,0,.8)',\n          width: 32 * 18,\n          height: 32 * 13,\n        }}\n      >\n        <div style={{ x: 32, y: 32 }}>\n          <div style={{ x: 32 * 1, height: 32 }}>名字</div>\n          <div style={{ x: 32 * 4, height: 32 }}>生命</div>\n          <div style={{ x: 32 * 6, height: 32 }}>攻击</div>\n          <div style={{ x: 32 * 8, height: 32 }}>防御</div>\n          <div style={{ x: 32 * 10, height: 32 }}>损失</div>\n          {enemys.map((enemyId, index) => {\n            const style = {\n              x: 0,\n              y: index * 32 + 32,\n              height: 32,\n            }\n            const enemy = window.$res.enemys[enemyId]\n            const hero = this.props.saveData.hero\n            let cost = 0\n            if (hero.atk > enemy.def) {\n              if (\n                hero.def >= enemy.atk ||\n                enemy.hp / (hero.atk - enemy.def) <=\n                  hero.hp / (enemy.atk - hero.def)\n              ) {\n                if (hero.def >= enemy.atk) {\n                  cost = 0\n                } else {\n                  const atkCount = Math.floor(\n                    enemy.hp / (hero.atk - enemy.def),\n                  )\n                  cost = (enemy.atk - hero.def) * atkCount\n                }\n              } else {\n                cost = '-'\n              }\n            } else {\n              cost = '-'\n            }\n            return (\n              <div style={style}>\n                <img src=\"enemys.png\" alt=\"\" style={{ height: 32, width: 32, sy: enemy.sy * 32 }}/>\n                <div style={{ x: 32 * 1, height: 32 }}>{enemy.name}</div>\n                <div style={{ x: 32 * 4, height: 32 }}>{enemy.hp}</div>\n                <div style={{ x: 32 * 6, height: 32 }}>{enemy.atk}</div>\n                <div style={{ x: 32 * 8, height: 32 }}>{enemy.def}</div>\n                <div style={{ x: 32 * 10, height: 32 }}>{cost}</div>\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Select from './Select'\nexport default class ShopList extends Component {\n  style = {\n    x: 32 * 3,\n    y: 32 * 2,\n    height: 32 * 8,\n    width: 32 * 7,\n    backgroundImage: 'ground.png',\n    borderWidth: 4,\n    borderColor: '#deb887',\n  }\n\n  create () {\n    const shops = this.props.saveData.shops || []\n    this.options = Object.entries(shops).map(([shopid, text]) => {\n      return { text, shopid }\n    })\n  }\n\n  onConfirm = (index) => {\n    const { shopid } = this.options[index]\n    this.props.onConfirm(shopid)\n  }\n\n  render () {\n    return (\n      <div style={this.style}>\n        <div style={{ height: 32, width: 32 * 7, fontSize: 24 }}>商店选择</div>\n        <Select style={{ x: 32, y: 48, width: 160 }} options={this.options} onConfirm={this.onConfirm} onClose={this.props.onClose}/>\n      </div>\n\n    )\n  }\n}\n","export function isCoincided (A, B) {\n  if (\n    A.x >= B.x + B.width ||\n    A.x + A.width <= B.x ||\n    A.y >= B.y + B.height ||\n    A.y + A.height <= B.y\n  ) {\n    return false\n  }\n  return true\n}\n\nexport function updateVector (vector, obj) {\n  vector = Object.assign(Object.create(null), vector)\n  Object.entries(obj).forEach(([key, value]) => {\n    vector[key] += value\n  })\n  return vector\n}\n\nexport function assignVector (vector, obj) {\n  return Object.assign(vector, obj)\n}\n","export function convertPropertyStr (str) {\n  const arr = str.split('.')\n  if (arr.length === 1) {\n    arr.unshift('')\n  }\n  const [key, propertyStr] = arr\n  const properties = propertyStr.split(';').map(v => v.split(':'))\n  return [key, properties]\n}\n\nexport const formatText = (data) => {\n  const o = []\n  data = data.split(/\\r?\\n/)\n  const keys = data.shift().split(',')\n  data.forEach((row, index) => {\n    if (!row.trim()) {\n      return\n    }\n    const properties = row.split(',')\n    const [id] = properties\n    const item = { sy: index }\n    keys.forEach((key, index) => {\n      const value = properties[index]\n      if (!value) {\n        return\n      }\n      if (key === 'property') {\n        item[key] = convertPropertyStr(value)\n      } else if (['id', 'name', 'type'].includes(key)) {\n        item[key] = value\n      } else {\n        if (isNaN(value)) {\n          debugger\n        }\n        item[key] = Number(value)\n      }\n    })\n    o[id] = item\n    o.push(item)\n    return data\n  })\n  return o\n}\n","import { KeyEventComponent } from 'Engine'\n\nimport Menu from './Menu'\nimport Shop from './Shop'\nimport Battle from './Battle'\nimport Talks from './Talks'\nimport Message from './Message'\nimport EnemyInfo from './EnemyInfo'\nimport ShopList from './ShopList'\n\nimport { saveGame, loadGame } from '../sl'\nimport { isCoincided, updateVector, assignVector } from '../physics'\nimport { convertPropertyStr } from '../utils'\n\nconst propertyNames = {\n  lv: '等级',\n  money: '金币',\n  hp: '生命',\n  atk: '攻击',\n  def: '防御',\n  exp: '经验',\n}\nexport default class Hero extends KeyEventComponent {\n  tick = 0;\n  create () {\n    const hero = Object.assign(this.props.saveData.position, {\n      width: 32,\n      height: 32,\n    })\n\n    this.styles = { hero }\n  }\n\n  isCoincidedTerrains (heroStyle) {\n    return this.props.mapTerrains.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  isCoincidedEvents (heroStyle) {\n    return this.props.mapEvents.findIndex(\n      (item) => item && item && isCoincided(item.props.style, heroStyle),\n    )\n  }\n\n  onKeyDown (e) {\n    const { code } = e\n    const styleHero = this.styles.hero\n    const step = 32\n    let moveVector = null\n    if (code === 'ArrowDown') {\n      moveVector = { y: step }\n      styleHero.sy = 0\n    } else if (code === 'ArrowUp') {\n      moveVector = { y: -step }\n      styleHero.sy = 96\n    } else if (code === 'ArrowLeft') {\n      moveVector = { x: -step }\n      styleHero.sy = 32\n    } else if (code === 'ArrowRight') {\n      moveVector = { x: step }\n      styleHero.sy = 64\n    } else if (code === 'KeyS') {\n      saveGame(this.props.saveData)\n      this.msg = '存储成功'\n    } else if (code === 'KeyL') {\n      this.props.onLoadMap(loadGame())\n    } else if (code === 'KeyX') {\n      this.showEnemyInfo = !this.showEnemyInfo\n    } else if (code === 'KeyB') {\n      this.buying = true\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    } else if (code === 'PageUp') {\n      console.log(this.props)\n    }\n    if (moveVector) {\n      const vector = updateVector(styleHero, moveVector)\n\n      const terrain = this.isCoincidedTerrains(vector)\n      if (terrain !== -1) {\n        return\n      }\n\n      const eventIndex = this.isCoincidedEvents(vector)\n      if (eventIndex !== -1) {\n        if (this.handleEvents(this.props.map.mapEvents[eventIndex])) {\n          assignVector(styleHero, vector)\n        }\n        return\n      }\n\n      assignVector(styleHero, vector)\n    }\n  }\n\n  onShopClose = () => {\n    this.shopid = null\n    this.setEvent()\n  };\n\n  handleEvents (mapEvent) {\n    if (this.mapEvent) {\n      debugger\n      return\n    }\n\n    if (mapEvent[3]) {\n      this.mapEvent = mapEvent\n      this.eventIndex = 0\n      this.setEvent()\n    } else {\n      const info = window.$res.mapping[mapEvent[2]]\n      const { name, type } = info\n      if (type === 'items') {\n        const item = window.$res.items[name]\n        const { type } = item\n        if (type === '1') {\n          this.remove(mapEvent)\n          this.updateSaveData('items', name)\n          this.msg = `获得${item.name}`\n        } else if (type === '2') {\n          this.remove(mapEvent)\n          this.updateSaveData(...item.property)\n          const [name, property] = item.property\n          this.msg = `获得${item.name}`\n          property.forEach((property) => {\n            const [key, value] = property\n            let propertyName = key\n            if (name === 'hero') {\n              propertyName = propertyNames[key]\n            } else if (name === 'items') {\n              propertyName = window.$res.items[key].name\n            } else if (key === 'money') {\n              propertyName = '金币'\n            }\n            this.msg += ` ${propertyName}${value > 0 ? '+' : '-'}${value}`\n          })\n        }\n        return true\n      } else if (type === 'enemys') {\n        mapEvent[3] = [\n          {\n            type: 'enemy',\n            data: name,\n          },\n        ]\n        this.handleEvents(mapEvent)\n        return false\n      } else if (type === 'terrains') {\n        if (\n          [\n            'yellowDoor',\n            'redDoor',\n            'blueDoor',\n            'steelDoor',\n            'specialDoor',\n          ].includes(name)\n        ) {\n          const key = name.slice(0, -4) + 'Key'\n          if (this.props.saveData.items[key]) {\n            this.props.saveData.items[key]--\n            this.remove(mapEvent)\n            return true\n          }\n        }\n      }\n    }\n  }\n\n  setEvent = () => {\n    if (this.eventIndex < this.mapEvent[3].length) {\n      const event = this.mapEvent[3][this.eventIndex++]\n      const { type, data } = event\n      if (type === 'talk') {\n        this.talk = data\n        return\n      } else if (type === 'mapLoad') {\n        this.props.onLoadMap(data)\n      } else if (type === 'openShop') {\n        this.shopid = event.id\n        this.props.saveData.shops = this.props.saveData.shops || {}\n        this.props.saveData.shops[this.shopid] =\n          window.$res.shop[this.shopid].title\n        return\n      } else if (type === 'getItems') {\n        this.updateSaveData('items', data)\n      } else if (type === 'removeSelf') {\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'moveBlock') {\n        console.log(this.mapEvent)\n        this.remove(this.mapEvent)\n        return\n      } else if (type === 'enemy') {\n        const enemy = window.$res.enemys[data]\n        const hero = this.props.saveData.hero\n        if (hero.atk > enemy.def) {\n          if (\n            hero.def >= enemy.atk ||\n            enemy.hp / (hero.atk - enemy.def) <=\n              hero.hp / (enemy.atk - hero.def)\n          ) {\n            this.enemy = enemy\n            return\n          } else {\n            this.mapEvent = null\n            this.eventIndex = 0\n            this.msg = `你打不过${enemy.name}`\n            return\n          }\n        } else {\n          this.mapEvent = null\n          this.eventIndex = 0\n          this.msg = `你的攻击比${enemy.name}的防御低`\n          return\n        }\n      } else if (type === 'updateSaveData') {\n        this.updateSaveData(...convertPropertyStr(data))\n      } else if (type === 'removeBlock') {\n        this.props.removeMapEvent(data)\n      } else if (type === 'title') {\n        this.props.onTitle()\n      } else if (type === 'removeMapBlock') {\n        const { mapId, position } = data\n        const { x, y } = position\n        this.props.saveData.destroy[[mapId, x, y]] = true\n      } else if (type === 'if') {\n        const { condition, true: trueEvent, false: falseEvent } = event\n        this.mapEvent = null\n        this.eventIndex = 0\n        if (this.checkSaveData(...convertPropertyStr(condition))) {\n          this.mapEvent = [0, 0, 0, trueEvent]\n        } else {\n          this.mapEvent = [0, 0, 0, falseEvent]\n        }\n      } else {\n        console.error(event)\n      }\n      this.setEvent()\n    } else {\n      this.mapEvent = null\n    }\n  };\n\n  remove (mapEvent) {\n    this.props.removeMapEvent(mapEvent)\n    this.mapEvent = null\n  }\n\n  onBattleClose = () => {\n    this.enemy = null\n    this.props.removeMapEvent(this.mapEvent)\n    this.setEvent()\n  };\n\n  onConfirm = () => {\n    this.talk = null\n    this.setEvent()\n  };\n\n  onMenuClose = () => {\n    this.showMenu = null\n  };\n\n  onMessageClose = () => {\n    this.msg = null\n  };\n\n  updateSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      gets.forEach(([id, value]) => this.updateSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      saveData[gets] += Number(n)\n    } else if (typeof gets === 'object') {\n      this.updateSaveData(context, Object.entries(gets))\n    } else {\n      console.error(gets, n)\n    }\n  }\n\n  checkSaveData (context, gets, n = 1) {\n    if (Array.isArray(gets)) {\n      return gets.some(([id, value]) => this.checkSaveData(context, id, value))\n    } else if (typeof gets === 'string') {\n      const saveData = context\n        ? this.props.saveData[context]\n        : this.props.saveData\n      saveData[gets] = saveData[gets] || 0\n      return saveData[gets] + Number(n) >= 0\n    } else if (typeof gets === 'object') {\n      return this.checkSaveData(context, Object.entries(gets), null, 0)\n    } else {\n      return false\n    }\n  }\n\n  onShopEvent = (need, effect) => {\n    if (this.checkSaveData(...convertPropertyStr(need))) {\n      this.updateSaveData(...convertPropertyStr(need))\n      this.updateSaveData(...convertPropertyStr(effect))\n    }\n  };\n\n  onShopListClose = () => {\n    this.buying = false\n  };\n\n  onShopListConfirm = (shopid) => {\n    this.buying = false\n    this.shopid = shopid\n    this.mapEvent = [0, 0, 0, []]\n  };\n\n  render () {\n    return (\n      <div>\n        <img style={this.styles.hero} src=\"Characters/hero.png\"></img>\n        {this.buying && (\n          <ShopList\n            saveData={this.props.saveData}\n            onClose={this.onShopListClose}\n            onConfirm={this.onShopListConfirm}\n          />\n        )}\n        {this.shopid && (\n          <Shop\n            shopid={this.shopid}\n            saveData={this.props.saveData}\n            onClose={this.onShopClose}\n            onShopEvent={this.onShopEvent}\n          />\n        )}\n        {this.enemy && (\n          <Battle\n            enemy={this.enemy}\n            enemyId={this.enemyId}\n            hero={this.props.saveData.hero}\n            saveData={this.props.saveData}\n            onClose={this.onBattleClose}\n          />\n        )}\n        {this.showMenu && (\n          <Menu saveData={this.props.saveData} onClose={this.onMenuClose} />\n        )}\n        {this.talk && (\n          <Talks talk={this.talk} key={this.talk} onConfirm={this.onConfirm} />\n        )}\n        {this.msg && (\n          <Message\n            msg={this.msg}\n            key={this.msg}\n            onMessageClose={this.onMessageClose}\n          />\n        )}\n        {this.showEnemyInfo && (\n          <EnemyInfo\n            enemys={this.props.enemys}\n            saveData={this.props.saveData}\n            onClose={() => (this.showEnemyInfo = false)}\n          />\n        )}\n      </div>\n    )\n  }\n}\n","\nimport { Component } from 'Engine'\n\nexport default class Status extends Component {\n  create () {\n    this.walls = []\n    for (let x = 0; x < 5; x++) {\n      for (let y = 0; y < 13; y++) {\n        if (x === 4 || y === 0 || y === 12) {\n          this.walls.push(<img src=\"terrains.png\" style={{ sx: 0, sy: 32 * 2, x: x * 32, y: y * 32, width: 32, height: 32 }}></img>)\n        }\n      }\n    }\n  }\n\n  render () {\n    const map = [\n      '魔塔',\n      this.props.map.name,\n      this.props.saveData.hero.lv,\n      this.props.saveData.hero.hp,\n      this.props.saveData.hero.atk,\n      this.props.saveData.hero.def,\n      this.props.saveData.hero.exp,\n      this.props.saveData.money,\n      this.props.saveData.items.yellowKey,\n      this.props.saveData.items.blueKey,\n      this.props.saveData.items.redKey,\n    ]\n    const size = 32\n    const offset = (32 - size) / 2\n    return (\n      <div style={{ fontSize: 24 }}>\n        {this.walls}\n        {map.map((value, index) => {\n          return <div style={{ y: (index + 1) * 32, wdith: 32, height: 32 }}>\n            <img src=\"icons.png\" style={{ x: offset, y: offset, sx: 0, sy: index * 32, wdith: size, height: size, swidth: 32, sheight: 32 }} />\n            <div style={{ x: 32, height: 32, width: 32 * 3 }}>{value}</div>\n          </div>\n        })}\n      </div>\n    )\n  }\n}\n","import { KeyEventComponent } from 'Engine'\n\nexport default class ScrollText extends KeyEventComponent {\n  styles = {\n    text: {\n      fontSize: 20,\n      textAlign: 'left',\n      textBaseline: 'top',\n      x: 32,\n      y: 32 * 5,\n      width: 32 * 18,\n      height: 32 * 13,\n    },\n  };\n\n  create () {\n    const { text, bgm } = this.props.map\n    this.text = text.split('\\n')\n    window.$audio.play('bgm', bgm)\n  }\n\n  onKeyDown ({ code }) {\n    if (code === 'Space') {\n      if (this.ready) {\n        const { type, data } = this.props.map.event\n        if (type === 'mapLoad') {\n          this.props.onClose(data)\n        } else if (type === 'title') {\n          this.props.onTitle(data)\n        }\n      }\n    }\n  }\n\n  render () {\n    const size = 32\n    const style = this.styles.text\n    if (style.y > -32 * (this.text.length - 2)) {\n      const y = 1\n      style.y -= y\n    } else {\n      this.ready = true\n    }\n    return (\n      <div style={this.styles.text} onClick={this.onKeyDown}>\n        {this.text.map((text, index) => {\n          const optionStyle = {\n            y: index * size,\n          }\n          return <div style={optionStyle}>{text}</div>\n        })}\n      </div>\n    )\n  }\n}\n","import { Component } from 'Engine'\nimport Hero from './Hero'\nimport Status from './Status'\nimport ScrollText from './ScrollText'\nexport default class Map extends Component {\n  tick = 0\n  interval = 10\n  styles = {\n    map: {\n      height: 32 * 13,\n      width: 32 * (13 + 5),\n      backgroundImage: 'ground.png',\n    },\n  }\n\n  create () {\n    const bgm = this.props.map.bgm\n    window.$audio.play('bgm', bgm)\n  }\n\n  destroy () {\n    const bgm = this.props.map.bgm\n    window.$audio.pause('bgm', bgm)\n  }\n\n  renderMapTerrains (status) {\n    const { mapTerrains } = this.props.map\n    const tick = this.tick\n    const terrains = []\n    if (!mapTerrains) {\n      return\n    }\n    mapTerrains.forEach((line, y) => {\n      line.forEach((value, x) => {\n        if (value) {\n          const info = window.$res.mapping[value]\n          const { type, name } = info\n          const detail = window.$res[type][name]\n          let sx = 0\n          if (info.type === 'animates') {\n            sx = tick % 4 * 32\n          }\n          const style = { sy: detail.sy * 32, sx, x: x * 32, y: y * 32, height: 32, width: 32 }\n          terrains.push(<img src={type + '.png'} style={style}/>)\n        } else {\n          return null\n        }\n      })\n    })\n    return terrains\n  }\n\n  renderMapEvents () {\n    const { mapId, destroy = {} } = this.props.saveData\n    const { mapEvents } = this.props.map\n    const tick = this.tick\n    const enemys = {}\n    this.enemys = enemys\n    if (mapEvents) {\n      return mapEvents.map((event) => {\n        const [x, y, value, events] = event\n        if (value) {\n          const info = window.$res.mapping[value]\n          if (info) {\n            const { type, name } = info\n            const detail = window.$res[type][name]\n            let sx = 0\n            if (type === 'npcs' || type === 'enemys') {\n              sx = tick % 2 * 32\n            }\n            // terrians items icons npcs enemys\n            if (destroy[[mapId, x, y]]) {\n              return null\n            }\n            if (type === 'enemys') {\n              enemys[name] = name\n            }\n            return <div style={{ x: x * 32, y: y * 32, height: 32, width: 32 }}>\n              <img src={type + '.png'} style={{ sy: detail.sy * 32, sx, height: 32, width: 32 }} />\n            </div>\n          } else {\n            debugger\n          }\n        }\n        return null\n      })\n    }\n  }\n\n  onRemoveMapEvent = (mapEvent) => {\n    const [x, y] = mapEvent\n    const mapId = this.props.saveData.mapId\n    this.props.saveData.destroy = this.props.saveData.destroy || {}\n    this.props.saveData.destroy[[mapId, x, y]] = 1\n  }\n\n  onTitle = () => {\n    this.props.onTitle()\n  }\n\n  render () {\n    this.interval--\n    if (this.interval === 0) {\n      this.tick++\n      this.interval = 10\n    }\n    const mapTerrains = this.renderMapTerrains()\n    const mapEvents = this.renderMapEvents()\n    return (\n      <div style={this.styles.map}>\n        <div style={{ x: 32 * 13, y: 0 }}>\n          <Status saveData={this.props.saveData} map={this.props.map}/>\n        </div>\n        {mapTerrains}\n        {mapEvents}\n        <Hero\n          mapTerrains={mapTerrains}\n          mapEvents={mapEvents}\n          saveData={this.props.saveData}\n          enemys={this.enemys}\n          map={this.props.map}\n          onLoadMap={this.props.onLoadMap}\n          removeMapEvent={this.onRemoveMapEvent}\n          onTitle={this.onTitle}\n        />\n      </div>\n    )\n  }\n}\n","import { formatText } from './utils'\n\nexport const loadImage = src => {\n  return new Promise(function (resolve, reject) {\n    const img = new Image()\n    img.addEventListener('load', () => resolve(img))\n    img.addEventListener('error', () => reject(img))\n    img.src = src\n  })\n}\n\nexport const loadSound = src => {\n  return new Promise(function (resolve, reject) {\n    const audio = new Audio()\n    audio.addEventListener('canplay', () => resolve(audio))\n    audio.addEventListener('error', () => reject(audio))\n    audio.src = src\n  })\n}\n\nexport function loadJSON (url) {\n  return fetch(url).then(data => data.json())\n}\n\nexport function loadText (url) {\n  return fetch(url).then(data => data.text()).then(data => formatText(data))\n}\n\nexport function checkFont (name, size = 16) {\n  return document.fonts.check(`${size}px ${name}`)\n}\n\nexport function loadFont ({ name, url }) {\n  if (checkFont(name)) {\n    return Promise.resolve()\n  }\n  const fontface = new FontFace(name, `url(\"${url}\")`)\n  document.fonts.add(fontface)\n  fontface.load()\n  return fontface.loaded\n}\n","import { loadImage, loadSound, loadJSON, loadFont, loadText } from './http'\n\nconst resource = {\n  images: {},\n  sounds: {},\n}\n\nwindow.$res = resource\n\nconst loaderMap = [\n  'game.json',\n  'save.json',\n  'shop.json',\n  'mapping.dat',\n]\n\nconst sprite = [\n  'enemys',\n  'items',\n  'animates',\n  'icons',\n  'npcs',\n  'terrains',\n  'boss',\n]\n\nconst arr3 = [].concat(loaderMap.map(v => `Data/${v}`), sprite.map(v => `Sprite/${v}.dat`))\n\nexport const loaderData = () => Promise.all(arr3.map(url => url.endsWith('.dat') ? loadText(`${url}`) : loadJSON(`${url}`)))\n  .then(([game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss]) => {\n    Object.assign(resource, { game, save, shop, mapping, enemys, items, animates, icons, npcs, terrains, boss })\n  })\n\nconst loadImages = () => {\n  const o = sprite.map(v => `Sprite/${v}.png`)\n  const o2 = ['Characters/hero.png', 'ground.png', 'Battlebacks/mota.jpg'].map(v => `Graph/${v}`)\n\n  return Promise.all([...o, ...o2].map(src => {\n    return new Promise((resolve) => {\n      loadImage(`${src}`).then((img) => {\n        src = src.replace('Graph/', '')\n        if (src.includes('Sprite')) {\n          src = src.split('/')[1]\n        }\n        resource.images[src] = img\n        resolve()\n      })\n    })\n  }))\n}\n\nexport const loaderImage = () => Promise.all([loadImages()])\nconst sounds = [\n  'bgm/terror.mp3',\n  'bgm/prologue.mp3',\n  'bgm/area1.mp3',\n  'bgm/area2.mp3',\n  'bgm/area3.mp3',\n  'enemy/redWizard.mp3',\n  'enemy/brownWizard.mp3',\n  'enemy/whiteKing.mp3',\n  'enemy/blackMagician.mp3',\n  'se/attack.mp3',\n  'se/floor.mp3',\n  'se/door.mp3',\n  'se/buy.mp3',\n  'se/item.mp3',\n  'se/dialogue.mp3',\n  'se/unlockCtrl.mp3',\n  'se/step.mp3',\n  'se/constants.mp3',\n  'se/sell.mp3',\n  'se/load.mp3',\n]\n\nexport const loaderMusic = () => Promise.all([\n  loadSounds(sounds),\n  // loadSounds(sounds.sounds),\n])\n\nexport const loaderFont = (font) => {\n  return loadFont(font)\n}\n\nconst loadSounds = data => {\n  return Promise.all(data.map(sound => loadSound(`Audio/${sound}`))).then(audioes => {\n    audioes.forEach((audio, i) => (resource.sounds[data[i]] = audio))\n  })\n}\n\nexport const loadMap = mapId => {\n  return loadJSON(`Maps/${mapId}.json`)\n}\n","import Engine from './Engine'\nimport Game from './Game'\n// eslint-disable-next-line no-new\nnew Engine(Game)\n","import UI from './core/UI'\nimport Audio from './core/Audio'\nimport { createNode } from './core/createNode'\nimport { patchNode } from './core/patchNode'\nexport default class Engine {\n  constructor (Game) {\n    if (this.check()) {\n      this.$resource = Object.create(null)\n      this.$state = Object.create(null)\n      this.Game = createNode(Game, null)\n      this.$foucs = null\n      this.$audio = new Audio()\n      window.$audio = this.$audio\n      this.ui = new UI()\n      this.gameStart()\n    }\n  }\n\n  check () {\n    if (location.protocol === 'file:') {\n      alert('不能直接运行index.html')\n    } else if (!navigator.userAgent.match(/Chrome\\/(\\d+)/) || RegExp.$1 < 88) {\n      alert('需要chrome最新浏览器')\n    } else {\n      return true\n    }\n  }\n\n  gameStop () {\n    cancelAnimationFrame(this.ident)\n    this.ident = -1\n  }\n\n  gameStart () {\n    const frame = () => {\n      this.keyFrame()\n      this.ident = requestAnimationFrame(frame)\n    }\n    frame()\n  }\n\n  keyFrame () {\n    this.root = patchNode(this.root, this.Game, this.ui)\n    this.ui.render(this.root)\n  }\n}\n","import { Component } from 'Engine'\nimport FPS from './Mota/FPS'\nimport Loading from './Mota/Loading'\nimport Title from './Mota/Title'\nimport Map from './Mota/Map'\nimport ScrollText from './Mota/ScrollText'\nimport { loaderData, loaderMusic, loaderImage, loadMap, loaderFont } from './loader'\n\nexport default class Game extends Component {\n  styles = {\n    app: {\n      height: 32 * 13,\n      width: 32 * 18,\n      textAlign: 'center',\n      textBaseline: 'middle',\n    },\n  };\n\n  async loadFont () {\n    this.loading = '加载字体'\n    const font = window.$res.game.font\n    await loaderFont(font)\n    this.styles.app.fontFamily = font.name\n  }\n\n  async create () {\n    this.loading = '加载数据'\n    await loaderData()\n    this.loading = '加载图片'\n    await loaderImage()\n    this.loading = '加载音乐'\n    await loaderMusic()\n    this.loading = false\n\n    this.saveData = window.$res.save\n  }\n\n  onLoadMap = async (data) => {\n    this.loading = '加载地图'\n    Object.assign(this.saveData, data)\n    this.map = await loadMap(this.saveData.mapId)\n    this.loading = false\n    this.randMapKey = `${this.saveData.mapId} ${new Date()}`\n  };\n\n  onTitle = () => {\n    this.map = null\n  }\n\n  render () {\n    return <div style={this.styles.app}>\n        {\n          this.loading\n            ? <Loading msg={this.loading} />\n            : this.map\n              ? this.map.text\n                ? <ScrollText map={this.map} onClose={this.onLoadMap} onTitle={this.onTitle}></ScrollText>\n                : <Map\n                  map={this.map}\n                  key={this.randMapKey}\n                  onLoadMap={this.onLoadMap}\n                  saveData={this.saveData}\n                  onEvent={this.onEvent}\n                />\n              : <Title onLoadMap={this.onLoadMap} />\n        }\n        <FPS />\n      </div>\n  }\n}\n"],"names":["createNode","tag","props","children","curFoucs","Component","constructor","$children","$c","$destory","KeyEventComponent","argu","$isFocus","$preFocus","this","destory","baseStyle","direction","color","filter","fontSize","font","document","fonts","check","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","isPrimitive","value","type","isFunc","f","getImage","src","window","$res","images","mouseEvents","keyEvents","UI","screen","canvas","createElement","context","getContext","el","width","height","dom","querySelector","body","appendChild","mergeStyle","bind","forEach","name","addEventListener","toLowerCase","e","push","preventDefault","passive","toDataURL","style","fontFamily","fillStyle","replace","clearRect","drawText","node","offsetX","offsetY","text","x","y","fillText","drawImage","sx","sy","swidth","sheight","drawBack","backgroundImage","backgroundColor","save","beginPath","rect","fill","closePath","restore","createPattern","drawBorder","borderWidth","borderColor","stroke","translate","box","transform","rotate","scale","angle","Math","PI","scaleX","scaleY","drawCircle","cx","cy","r","sAngle","eAngle","counterclockwise","strokeWidth","arc","drawLine","x1","y1","x2","y2","moveTo","lineTo","drawRect","parent","renderRect","renderPrimitive","start","left","center","right","end","alphabetic","hanging","ideographic","top","middle","bottom","a","Array","isArray","renderNode","event","onMouseMove","onMouseClick","runEvent","_node$props","onClick","moveEvent","moveEventTarget","render","root","self","$root","Audio","current","audioes","sounds","play","pause","loop","createInstance","next","Class","instance","create","destoryInstance","pre","o","length","pop","patchNode","key","_next$props","updateInstance","preChildren","nextChildren","max","i","FPS","fps","styles","timeStamp","Date","warn","toFixed","Loading","step","sin","msg","Select","select","activeIndex","Object","assign","onKeyDown","code","options","onChange","onConfirm","onClose","index","map","item","optionStyle","onMouseLeave","onMouseEnter","saveGame","saveData","localStorage","setItem","JSON","stringify","loadGame","parse","getItem","getStorage","Title","title","gameName","isLoad","onLoadMap","itemOption","detailOption","Menu","tick","menu","detail","Shop","shop","shopid","need","effect","choices","onShopEvent","split","Battle","battle","enemy","hero","battleMsg","location","hostname","hp","turn","atk","def","exp","money","proprety","enemyImageStyle","vsStyle","Talk","talk","talks","substr","leftStyle","rightStyle","Message","str","len","charCodeAt","calcLength","onMessageClose","Hero","enemys","keys","enemyId","cost","atkCount","floor","alt","ShopList","shops","entries","isCoincided","A","B","assignVector","vector","obj","convertPropertyStr","arr","unshift","propertyStr","v","propertyNames","lv","position","isCoincidedTerrains","heroStyle","mapTerrains","findIndex","isCoincidedEvents","mapEvents","styleHero","moveVector","showEnemyInfo","buying","console","log","updateVector","eventIndex","handleEvents","onShopClose","setEvent","mapEvent","info","mapping","items","remove","updateSaveData","property","propertyName","data","includes","slice","id","removeMapEvent","onTitle","mapId","destroy","condition","true","trueEvent","false","falseEvent","checkSaveData","error","onBattleClose","onMenuClose","showMenu","gets","n","Number","some","onShopListClose","onShopListConfirm","Talks","EnemyInfo","Status","walls","yellowKey","blueKey","redKey","wdith","ScrollText","bgm","$audio","ready","Map","interval","renderMapTerrains","status","terrains","line","renderMapEvents","events","onRemoveMapEvent","loadJSON","url","fetch","then","json","loadText","shift","row","trim","properties","isNaN","formatText","loadFont","size","checkFont","Promise","resolve","fontface","FontFace","add","load","loaded","resource","sprite","arr3","concat","loadImages","o2","all","reject","img","Image","loadImage","loadSounds","sound","loadSound","audio","Game","$resource","$state","$foucs","ui","gameStart","protocol","alert","navigator","userAgent","match","RegExp","$1","gameStop","cancelAnimationFrame","ident","frame","keyFrame","requestAnimationFrame","app","loading","game","loaderFont","endsWith","animates","icons","npcs","boss","async","randMapKey","onEvent"],"mappings":"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"}